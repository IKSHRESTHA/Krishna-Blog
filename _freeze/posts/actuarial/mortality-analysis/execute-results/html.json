{
  "hash": "482a137e23c17f36eb0198cf4d99ac45",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Mortality Table Analysis with R\"\nsubtitle: \"Exploring actuarial life tables and survival analysis\"\nauthor: \"Your Name\"\ndate: \"2025-04-20\"\ncategories: [actuarial, mortality, R]\nimage: \"../../images/placeholder.jpg\"\ndescription: \"A comprehensive analysis of mortality tables using R, with interactive visualizations and practical applications for actuaries.\"\ntoc: true\ntoc-depth: 3\ncode-fold: true\ncode-tools: true\ncode-link: true\nexecute:\n  echo: true\n  warning: false\n  message: false\n---\n\n\n\n\n\n\n\n## Introduction\n\nMortality tables are fundamental tools in actuarial science, providing the foundation for life insurance pricing, pension valuations, and demographic studies. This post explores how to work with mortality data in R, create visualizations, and perform key actuarial calculations.\n\n### What are Mortality Tables?\n\nMortality tables (also called life tables) present the probability of death for individuals at different ages. They typically include:\n\n- Age ($x$)\n- Number of survivors to age $x$ ($l_x$)\n- Number of deaths between ages $x$ and $x+1$ ($d_x$)\n- Probability of death between ages $x$ and $x+1$ ($q_x$)\n- Probability of survival from age $x$ to $x+1$ ($p_x$)\n- Life expectancy at age $x$ ($e_x$)\n\nThese tables form the statistical basis for calculating premiums, reserves, and other actuarial values.\n\n## Creating a Basic Mortality Table in R\n\nLet's start by creating a simple mortality table using the Gompertz-Makeham law of mortality, which is commonly used in actuarial work.\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Define parameters for Gompertz-Makeham law\nalpha <- 0.0002  # Constant component\nbeta <- 0.00001  # Age-dependent component (base)\ngamma <- 0.1     # Age-dependent component (exponential)\n\n# Create age range\nages <- 0:100\n\n# Calculate mortality rates using Gompertz-Makeham formula\nqx <- alpha + beta * exp(gamma * ages)\n\n# Ensure probabilities are between 0 and 1\nqx <- pmin(qx, 1)\n\n# Calculate survival probabilities\npx <- 1 - qx\n\n# Calculate number of survivors (starting with 100,000 lives)\nlx <- numeric(length(ages))\nlx[1] <- 100000\nfor (i in 2:length(ages)) {\n  lx[i] <- lx[i-1] * px[i-1]\n}\n\n# Calculate deaths\ndx <- numeric(length(ages))\nfor (i in 1:(length(ages)-1)) {\n  dx[i] <- lx[i] - lx[i+1]\n}\ndx[length(ages)] <- lx[length(ages)]\n\n# Create mortality table\nmortality_table <- data.frame(\n  Age = ages,\n  qx = qx,\n  px = px,\n  lx = lx,\n  dx = dx\n)\n\n# Display first 10 rows of the table\nkable(head(mortality_table, 10), \n      caption = \"Mortality Table (First 10 Ages)\",\n      digits = 5,\n      format.args = list(big.mark = \",\")) %>%\n  kable_styling(bootstrap_options = c(\"striped\", \"hover\", \"condensed\"))\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-striped table-hover table-condensed\" style=\"margin-left: auto; margin-right: auto;\">\n<caption>Mortality Table (First 10 Ages)</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:right;\"> Age </th>\n   <th style=\"text-align:right;\"> qx </th>\n   <th style=\"text-align:right;\"> px </th>\n   <th style=\"text-align:right;\"> lx </th>\n   <th style=\"text-align:right;\"> dx </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0.00021 </td>\n   <td style=\"text-align:right;\"> 0.99979 </td>\n   <td style=\"text-align:right;\"> 100,000.00 </td>\n   <td style=\"text-align:right;\"> 21.00000 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 0.00021 </td>\n   <td style=\"text-align:right;\"> 0.99979 </td>\n   <td style=\"text-align:right;\"> 99,979.00 </td>\n   <td style=\"text-align:right;\"> 21.10074 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 0.00021 </td>\n   <td style=\"text-align:right;\"> 0.99979 </td>\n   <td style=\"text-align:right;\"> 99,957.90 </td>\n   <td style=\"text-align:right;\"> 21.21247 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 0.00021 </td>\n   <td style=\"text-align:right;\"> 0.99979 </td>\n   <td style=\"text-align:right;\"> 99,936.69 </td>\n   <td style=\"text-align:right;\"> 21.33634 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 4 </td>\n   <td style=\"text-align:right;\"> 0.00021 </td>\n   <td style=\"text-align:right;\"> 0.99979 </td>\n   <td style=\"text-align:right;\"> 99,915.35 </td>\n   <td style=\"text-align:right;\"> 21.47363 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 5 </td>\n   <td style=\"text-align:right;\"> 0.00022 </td>\n   <td style=\"text-align:right;\"> 0.99978 </td>\n   <td style=\"text-align:right;\"> 99,893.88 </td>\n   <td style=\"text-align:right;\"> 21.62575 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 6 </td>\n   <td style=\"text-align:right;\"> 0.00022 </td>\n   <td style=\"text-align:right;\"> 0.99978 </td>\n   <td style=\"text-align:right;\"> 99,872.25 </td>\n   <td style=\"text-align:right;\"> 21.79424 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 7 </td>\n   <td style=\"text-align:right;\"> 0.00022 </td>\n   <td style=\"text-align:right;\"> 0.99978 </td>\n   <td style=\"text-align:right;\"> 99,850.46 </td>\n   <td style=\"text-align:right;\"> 21.98083 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 8 </td>\n   <td style=\"text-align:right;\"> 0.00022 </td>\n   <td style=\"text-align:right;\"> 0.99978 </td>\n   <td style=\"text-align:right;\"> 99,828.48 </td>\n   <td style=\"text-align:right;\"> 22.18742 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 9 </td>\n   <td style=\"text-align:right;\"> 0.00022 </td>\n   <td style=\"text-align:right;\"> 0.99978 </td>\n   <td style=\"text-align:right;\"> 99,806.29 </td>\n   <td style=\"text-align:right;\"> 22.41610 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n\n## Visualizing Mortality Data\n\nVisualization is crucial for understanding mortality patterns. Let's create some interactive plots to explore our mortality table.\n\n### Mortality Rates by Age\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\np <- ggplot(mortality_table, aes(x = Age, y = qx)) +\n  geom_line(color = \"#3498db\", size = 1) +\n  labs(\n    title = \"Mortality Rates by Age\",\n    subtitle = \"Based on Gompertz-Makeham Law\",\n    x = \"Age\",\n    y = \"Probability of Death (qx)\",\n    caption = \"Source: Simulated data\"\n  ) +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(face = \"bold\"),\n    plot.subtitle = element_text(color = \"gray50\")\n  )\n\n# Convert to interactive plot\nggplotly(p) %>%\n  layout(hovermode = \"x unified\")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"plotly html-widget html-fill-item\" id=\"htmlwidget-6e8101e870b342515926\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-6e8101e870b342515926\">{\"x\":{\"data\":[{\"x\":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100],\"y\":[0.00021000000000000001,0.00021105170918075649,0.0002122140275816017,0.00021349858807576005,0.00021491824697641271,0.00021648721270700128,0.00021822118800390511,0.00022013752707470479,0.0002222554092849247,0.00022459603111156951,0.00022718281828459046,0.00023004166023946434,0.00023320116922736548,0.00023669296667619245,0.00024055199966844677,0.00024481689070338065,0.00024953032424395116,0.00025473947391727205,0.00026049647464412948,0.00026685894442279271,0.00027389056098930649,0.00028166169912567651,0.00029025013499434126,0.00029974182454814728,0.00031023176380641607,0.00032182493960703477,0.00033463738035001693,0.0003487973172487284,0.00036444646771097058,0.00038174145369443066,0.00040085536923187672,0.00042197951281441643,0.00044532530197109353,0.00047112638920657895,0.00049964100047397025,0.00053115451958692312,0.00056598234443677991,0.00060447304360067408,0.0006470118449330084,0.0006940244910553019,0.00074598150033144235,0.00080340287597362007,0.00086686331040925152,0.00093699793699595789,0.0010145086866496815,0.0011001713130052181,0.0011948431564193388,0.0012994717245212355,0.0014151041751873498,0.0015428977968493555,0.0016841315910257663,0.0018402190729990186,0.0020127224187515124,0.0022033680997479185,0.0024140641620418717,0.0026469193226422039,0.0029042640742615281,0.0031886740096706031,0.0035029955990964895,0.0038503746786532891,0.0042342879349273515,0.0046585777008251719,0.0051274904109325633,0.0056457191012592948,0.0062184503787208224,0.0068514163304436186,0.0075509518924197329,0.0083240582516754345,0.0091784729165041851,0.010122747156050264,0.011166331584284586,0.012319670744925777,0.013594307643944183,0.015002999275845466,0.01655984429995927,0.018280424144560631,0.02018195895104119,0.022283479918872091,0.024606019776245009,0.0271728232826851,0.030009579870417285,0.033144680752838405,0.036609503073323585,0.040438723938223134,0.044670667476998584,0.049347688402991349,0.054516595913629784,0.06022912217261029,0.066542440062778901,0.073519735391559968,0.081230839275753849,0.089752927034825097,0.099171290587439287,0.10958019208165193,0.1210838073021699,0.13379726829661875,0.14784781565577296,0.16337607198015452,0.18053744927828527,0.199503704382303,0.22046465794806722],\"text\":[\"Age:   0<br />qx: 0.0002100000\",\"Age:   1<br />qx: 0.0002110517\",\"Age:   2<br />qx: 0.0002122140\",\"Age:   3<br />qx: 0.0002134986\",\"Age:   4<br />qx: 0.0002149182\",\"Age:   5<br />qx: 0.0002164872\",\"Age:   6<br />qx: 0.0002182212\",\"Age:   7<br />qx: 0.0002201375\",\"Age:   8<br />qx: 0.0002222554\",\"Age:   9<br />qx: 0.0002245960\",\"Age:  10<br />qx: 0.0002271828\",\"Age:  11<br />qx: 0.0002300417\",\"Age:  12<br />qx: 0.0002332012\",\"Age:  13<br />qx: 0.0002366930\",\"Age:  14<br />qx: 0.0002405520\",\"Age:  15<br />qx: 0.0002448169\",\"Age:  16<br />qx: 0.0002495303\",\"Age:  17<br />qx: 0.0002547395\",\"Age:  18<br />qx: 0.0002604965\",\"Age:  19<br />qx: 0.0002668589\",\"Age:  20<br />qx: 0.0002738906\",\"Age:  21<br />qx: 0.0002816617\",\"Age:  22<br />qx: 0.0002902501\",\"Age:  23<br />qx: 0.0002997418\",\"Age:  24<br />qx: 0.0003102318\",\"Age:  25<br />qx: 0.0003218249\",\"Age:  26<br />qx: 0.0003346374\",\"Age:  27<br />qx: 0.0003487973\",\"Age:  28<br />qx: 0.0003644465\",\"Age:  29<br />qx: 0.0003817415\",\"Age:  30<br />qx: 0.0004008554\",\"Age:  31<br />qx: 0.0004219795\",\"Age:  32<br />qx: 0.0004453253\",\"Age:  33<br />qx: 0.0004711264\",\"Age:  34<br />qx: 0.0004996410\",\"Age:  35<br />qx: 0.0005311545\",\"Age:  36<br />qx: 0.0005659823\",\"Age:  37<br />qx: 0.0006044730\",\"Age:  38<br />qx: 0.0006470118\",\"Age:  39<br />qx: 0.0006940245\",\"Age:  40<br />qx: 0.0007459815\",\"Age:  41<br />qx: 0.0008034029\",\"Age:  42<br />qx: 0.0008668633\",\"Age:  43<br />qx: 0.0009369979\",\"Age:  44<br />qx: 0.0010145087\",\"Age:  45<br />qx: 0.0011001713\",\"Age:  46<br />qx: 0.0011948432\",\"Age:  47<br />qx: 0.0012994717\",\"Age:  48<br />qx: 0.0014151042\",\"Age:  49<br />qx: 0.0015428978\",\"Age:  50<br />qx: 0.0016841316\",\"Age:  51<br />qx: 0.0018402191\",\"Age:  52<br />qx: 0.0020127224\",\"Age:  53<br />qx: 0.0022033681\",\"Age:  54<br />qx: 0.0024140642\",\"Age:  55<br />qx: 0.0026469193\",\"Age:  56<br />qx: 0.0029042641\",\"Age:  57<br />qx: 0.0031886740\",\"Age:  58<br />qx: 0.0035029956\",\"Age:  59<br />qx: 0.0038503747\",\"Age:  60<br />qx: 0.0042342879\",\"Age:  61<br />qx: 0.0046585777\",\"Age:  62<br />qx: 0.0051274904\",\"Age:  63<br />qx: 0.0056457191\",\"Age:  64<br />qx: 0.0062184504\",\"Age:  65<br />qx: 0.0068514163\",\"Age:  66<br />qx: 0.0075509519\",\"Age:  67<br />qx: 0.0083240583\",\"Age:  68<br />qx: 0.0091784729\",\"Age:  69<br />qx: 0.0101227472\",\"Age:  70<br />qx: 0.0111663316\",\"Age:  71<br />qx: 0.0123196707\",\"Age:  72<br />qx: 0.0135943076\",\"Age:  73<br />qx: 0.0150029993\",\"Age:  74<br />qx: 0.0165598443\",\"Age:  75<br />qx: 0.0182804241\",\"Age:  76<br />qx: 0.0201819590\",\"Age:  77<br />qx: 0.0222834799\",\"Age:  78<br />qx: 0.0246060198\",\"Age:  79<br />qx: 0.0271728233\",\"Age:  80<br />qx: 0.0300095799\",\"Age:  81<br />qx: 0.0331446808\",\"Age:  82<br />qx: 0.0366095031\",\"Age:  83<br />qx: 0.0404387239\",\"Age:  84<br />qx: 0.0446706675\",\"Age:  85<br />qx: 0.0493476884\",\"Age:  86<br />qx: 0.0545165959\",\"Age:  87<br />qx: 0.0602291222\",\"Age:  88<br />qx: 0.0665424401\",\"Age:  89<br />qx: 0.0735197354\",\"Age:  90<br />qx: 0.0812308393\",\"Age:  91<br />qx: 0.0897529270\",\"Age:  92<br />qx: 0.0991712906\",\"Age:  93<br />qx: 0.1095801921\",\"Age:  94<br />qx: 0.1210838073\",\"Age:  95<br />qx: 0.1337972683\",\"Age:  96<br />qx: 0.1478478157\",\"Age:  97<br />qx: 0.1633760720\",\"Age:  98<br />qx: 0.1805374493\",\"Age:  99<br />qx: 0.1995037044\",\"Age: 100<br />qx: 0.2204646579\"],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"width\":3.7795275590551185,\"color\":\"rgba(52,152,219,1)\",\"dash\":\"solid\"},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null}],\"layout\":{\"margin\":{\"t\":43.762557077625573,\"r\":7.3059360730593621,\"b\":40.182648401826491,\"l\":48.949771689497723},\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724},\"title\":{\"text\":\"<b> Mortality Rates by Age <\\/b>\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":17.534246575342465},\"x\":0,\"xref\":\"paper\"},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[-5,105],\"tickmode\":\"array\",\"ticktext\":[\"0\",\"25\",\"50\",\"75\",\"100\"],\"tickvals\":[0,24.999999999999996,50,75,100],\"categoryorder\":\"array\",\"categoryarray\":[\"0\",\"25\",\"50\",\"75\",\"100\"],\"nticks\":null,\"ticks\":\"\",\"tickcolor\":null,\"ticklen\":3.6529680365296811,\"tickwidth\":0,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(235,235,235,1)\",\"gridwidth\":0.66417600664176002,\"zeroline\":false,\"anchor\":\"y\",\"title\":{\"text\":\"Age\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[-0.010802732897403362,0.23147739084547059],\"tickmode\":\"array\",\"ticktext\":[\"0.00\",\"0.05\",\"0.10\",\"0.15\",\"0.20\"],\"tickvals\":[0,0.050000000000000003,0.10000000000000001,0.15000000000000002,0.20000000000000001],\"categoryorder\":\"array\",\"categoryarray\":[\"0.00\",\"0.05\",\"0.10\",\"0.15\",\"0.20\"],\"nticks\":null,\"ticks\":\"\",\"tickcolor\":null,\"ticklen\":3.6529680365296811,\"tickwidth\":0,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(235,235,235,1)\",\"gridwidth\":0.66417600664176002,\"zeroline\":false,\"anchor\":\"x\",\"title\":{\"text\":\"Probability of Death (qx)\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"shapes\":[{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0,\"y1\":1}],\"showlegend\":false,\"legend\":{\"bgcolor\":null,\"bordercolor\":null,\"borderwidth\":0,\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":11.68949771689498}},\"hovermode\":\"x unified\",\"barmode\":\"relative\"},\"config\":{\"doubleClick\":\"reset\",\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"source\":\"A\",\"attrs\":{\"34b033917513\":{\"x\":{},\"y\":{},\"type\":\"scatter\"}},\"cur_data\":\"34b033917513\",\"visdat\":{\"34b033917513\":[\"function (y) \",\"x\"]},\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.20000000000000001,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\n\n\n\n### Survival Curve\n\nThe survival curve shows the number of survivors at each age from an initial population.\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\np2 <- ggplot(mortality_table, aes(x = Age, y = lx)) +\n  geom_line(color = \"#2c3e50\", size = 1) +\n  labs(\n    title = \"Survival Curve\",\n    subtitle = \"Number of Survivors by Age (from 100,000 initial lives)\",\n    x = \"Age\",\n    y = \"Number of Survivors (lx)\",\n    caption = \"Source: Simulated data\"\n  ) +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(face = \"bold\"),\n    plot.subtitle = element_text(color = \"gray50\")\n  )\n\n# Convert to interactive plot\nggplotly(p2) %>%\n  layout(hovermode = \"x unified\")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"plotly html-widget html-fill-item\" id=\"htmlwidget-bc6761ca23fb7805aebb\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-bc6761ca23fb7805aebb\">{\"x\":{\"data\":[{\"x\":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100],\"y\":[100000,99979,99957.899261167811,99936.686792776993,99915.350451249775,99893.876819284764,99872.251072325671,99850.456831048054,99828.475998403985,99806.288579612679,99783.872483317726,99761.203301947608,99738.254069112547,99714.994991646934,99691.393153660261,99667.412189687413,99643.011923730694,99618.147970656719,99592.771296050065,99566.827730227407,99540.257431679798,99512.994294730815,99484.965295672679,99456.089771065701,99426.278621255289,99395.433431469908,99363.445502108603,99330.194779003228,99295.548673542522,99259.360761569027,99221.469348899132,99181.695890167553,99139.843246455712,99095.693765824617,99049.007169434801,98999.518224396714,98946.934182854893,98890.931965071242,98831.155062441801,98767.210134467998,98698.663271721482,98625.035894813336,98545.800257332448,98460.374518694443,98368.117350894579,98268.322041352731,98160.210052465671,98042.923997251797,97915.519989727982,97776.959328574885,97626.099473444192,97461.684275212334,97282.333424922472,97086.531091489669,96872.613725967487,96638.757020888312,96382.962027613597,96103.040453625887,95796.599186281092,95461.024120923132,95093.463410849625,94690.81030603862,94249.68580867385,93766.421448456473,93237.042571828191,92657.252649136601,92022.419235202266,91327.562374533169,90567.346425344032,89736.076489059356,88827.700875984621,87835.821314133733,86753.712915933473,85574.356253299862,84290.484248400666,82894.646953278978,81379.297647659419,79736.904003069794,77960.088303924349,76041.800829360174,73975.530413326836,71755.555824931624,69377.240834871787,66837.374523308841,64134.556386205128,61269.622944092145,58246.10868247832,55070.729111894289,51753.867440079281,48310.038817930799,44758.297547280534,41122.543472961021,37431.67482914593,33719.527327490163,30024.535046041281,26389.05003018917,22858.267223207054,19478.722344579939,16296.365200730404,13354.260994883125,10690.036457115842],\"text\":[\"Age:   0<br />lx: 100000.00\",\"Age:   1<br />lx:  99979.00\",\"Age:   2<br />lx:  99957.90\",\"Age:   3<br />lx:  99936.69\",\"Age:   4<br />lx:  99915.35\",\"Age:   5<br />lx:  99893.88\",\"Age:   6<br />lx:  99872.25\",\"Age:   7<br />lx:  99850.46\",\"Age:   8<br />lx:  99828.48\",\"Age:   9<br />lx:  99806.29\",\"Age:  10<br />lx:  99783.87\",\"Age:  11<br />lx:  99761.20\",\"Age:  12<br />lx:  99738.25\",\"Age:  13<br />lx:  99714.99\",\"Age:  14<br />lx:  99691.39\",\"Age:  15<br />lx:  99667.41\",\"Age:  16<br />lx:  99643.01\",\"Age:  17<br />lx:  99618.15\",\"Age:  18<br />lx:  99592.77\",\"Age:  19<br />lx:  99566.83\",\"Age:  20<br />lx:  99540.26\",\"Age:  21<br />lx:  99512.99\",\"Age:  22<br />lx:  99484.97\",\"Age:  23<br />lx:  99456.09\",\"Age:  24<br />lx:  99426.28\",\"Age:  25<br />lx:  99395.43\",\"Age:  26<br />lx:  99363.45\",\"Age:  27<br />lx:  99330.19\",\"Age:  28<br />lx:  99295.55\",\"Age:  29<br />lx:  99259.36\",\"Age:  30<br />lx:  99221.47\",\"Age:  31<br />lx:  99181.70\",\"Age:  32<br />lx:  99139.84\",\"Age:  33<br />lx:  99095.69\",\"Age:  34<br />lx:  99049.01\",\"Age:  35<br />lx:  98999.52\",\"Age:  36<br />lx:  98946.93\",\"Age:  37<br />lx:  98890.93\",\"Age:  38<br />lx:  98831.16\",\"Age:  39<br />lx:  98767.21\",\"Age:  40<br />lx:  98698.66\",\"Age:  41<br />lx:  98625.04\",\"Age:  42<br />lx:  98545.80\",\"Age:  43<br />lx:  98460.37\",\"Age:  44<br />lx:  98368.12\",\"Age:  45<br />lx:  98268.32\",\"Age:  46<br />lx:  98160.21\",\"Age:  47<br />lx:  98042.92\",\"Age:  48<br />lx:  97915.52\",\"Age:  49<br />lx:  97776.96\",\"Age:  50<br />lx:  97626.10\",\"Age:  51<br />lx:  97461.68\",\"Age:  52<br />lx:  97282.33\",\"Age:  53<br />lx:  97086.53\",\"Age:  54<br />lx:  96872.61\",\"Age:  55<br />lx:  96638.76\",\"Age:  56<br />lx:  96382.96\",\"Age:  57<br />lx:  96103.04\",\"Age:  58<br />lx:  95796.60\",\"Age:  59<br />lx:  95461.02\",\"Age:  60<br />lx:  95093.46\",\"Age:  61<br />lx:  94690.81\",\"Age:  62<br />lx:  94249.69\",\"Age:  63<br />lx:  93766.42\",\"Age:  64<br />lx:  93237.04\",\"Age:  65<br />lx:  92657.25\",\"Age:  66<br />lx:  92022.42\",\"Age:  67<br />lx:  91327.56\",\"Age:  68<br />lx:  90567.35\",\"Age:  69<br />lx:  89736.08\",\"Age:  70<br />lx:  88827.70\",\"Age:  71<br />lx:  87835.82\",\"Age:  72<br />lx:  86753.71\",\"Age:  73<br />lx:  85574.36\",\"Age:  74<br />lx:  84290.48\",\"Age:  75<br />lx:  82894.65\",\"Age:  76<br />lx:  81379.30\",\"Age:  77<br />lx:  79736.90\",\"Age:  78<br />lx:  77960.09\",\"Age:  79<br />lx:  76041.80\",\"Age:  80<br />lx:  73975.53\",\"Age:  81<br />lx:  71755.56\",\"Age:  82<br />lx:  69377.24\",\"Age:  83<br />lx:  66837.37\",\"Age:  84<br />lx:  64134.56\",\"Age:  85<br />lx:  61269.62\",\"Age:  86<br />lx:  58246.11\",\"Age:  87<br />lx:  55070.73\",\"Age:  88<br />lx:  51753.87\",\"Age:  89<br />lx:  48310.04\",\"Age:  90<br />lx:  44758.30\",\"Age:  91<br />lx:  41122.54\",\"Age:  92<br />lx:  37431.67\",\"Age:  93<br />lx:  33719.53\",\"Age:  94<br />lx:  30024.54\",\"Age:  95<br />lx:  26389.05\",\"Age:  96<br />lx:  22858.27\",\"Age:  97<br />lx:  19478.72\",\"Age:  98<br />lx:  16296.37\",\"Age:  99<br />lx:  13354.26\",\"Age: 100<br />lx:  10690.04\"],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"width\":3.7795275590551185,\"color\":\"rgba(44,62,80,1)\",\"dash\":\"solid\"},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null}],\"layout\":{\"margin\":{\"t\":43.762557077625573,\"r\":7.3059360730593621,\"b\":40.182648401826491,\"l\":60.639269406392714},\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724},\"title\":{\"text\":\"<b> Survival Curve <\\/b>\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":17.534246575342465},\"x\":0,\"xref\":\"paper\"},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[-5,105],\"tickmode\":\"array\",\"ticktext\":[\"0\",\"25\",\"50\",\"75\",\"100\"],\"tickvals\":[0,24.999999999999996,50,75,100],\"categoryorder\":\"array\",\"categoryarray\":[\"0\",\"25\",\"50\",\"75\",\"100\"],\"nticks\":null,\"ticks\":\"\",\"tickcolor\":null,\"ticklen\":3.6529680365296811,\"tickwidth\":0,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(235,235,235,1)\",\"gridwidth\":0.66417600664176002,\"zeroline\":false,\"anchor\":\"y\",\"title\":{\"text\":\"Age\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[6224.5382799716344,104465.49817714421],\"tickmode\":\"array\",\"ticktext\":[\"25000\",\"50000\",\"75000\",\"100000\"],\"tickvals\":[25000,50000,75000,100000],\"categoryorder\":\"array\",\"categoryarray\":[\"25000\",\"50000\",\"75000\",\"100000\"],\"nticks\":null,\"ticks\":\"\",\"tickcolor\":null,\"ticklen\":3.6529680365296811,\"tickwidth\":0,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(235,235,235,1)\",\"gridwidth\":0.66417600664176002,\"zeroline\":false,\"anchor\":\"x\",\"title\":{\"text\":\"Number of Survivors (lx)\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"shapes\":[{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0,\"y1\":1}],\"showlegend\":false,\"legend\":{\"bgcolor\":null,\"bordercolor\":null,\"borderwidth\":0,\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":11.68949771689498}},\"hovermode\":\"x unified\",\"barmode\":\"relative\"},\"config\":{\"doubleClick\":\"reset\",\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"source\":\"A\",\"attrs\":{\"34b019fb5fab\":{\"x\":{},\"y\":{},\"type\":\"scatter\"}},\"cur_data\":\"34b019fb5fab\",\"visdat\":{\"34b019fb5fab\":[\"function (y) \",\"x\"]},\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.20000000000000001,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\n\n\n\n## Calculating Life Expectancy\n\nLife expectancy is a key metric derived from mortality tables. Let's calculate and visualize life expectancy at different ages.\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Calculate temporary life expectancies\ncalculate_ex <- function(mortality_table) {\n  ages <- mortality_table$Age\n  lx <- mortality_table$lx\n  n <- length(ages)\n  \n  # Initialize ex vector\n  ex <- numeric(n)\n  \n  for (i in 1:n) {\n    # Sum of lx+t for t > 0\n    future_lx_sum <- sum(lx[(i+1):n])\n    \n    # Life expectancy formula: sum of lx+t / lx\n    ex[i] <- future_lx_sum / lx[i]\n  }\n  \n  return(ex)\n}\n\n# Add life expectancy to the table\nmortality_table$ex <- calculate_ex(mortality_table)\n\n# Visualize life expectancy\np3 <- ggplot(mortality_table, aes(x = Age, y = ex)) +\n  geom_line(color = \"#e74c3c\", size = 1) +\n  labs(\n    title = \"Life Expectancy by Age\",\n    subtitle = \"Expected remaining years of life\",\n    x = \"Age\",\n    y = \"Life Expectancy (ex)\",\n    caption = \"Source: Simulated data\"\n  ) +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(face = \"bold\"),\n    plot.subtitle = element_text(color = \"gray50\")\n  )\n\n# Convert to interactive plot\nggplotly(p3) %>%\n  layout(hovermode = \"x unified\")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"plotly html-widget html-fill-item\" id=\"htmlwidget-9e3dc4a992096d647530\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-9e3dc4a992096d647530\">{\"x\":{\"data\":[{\"x\":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100],\"y\":[85.050765734881281,84.06863014721219,83.086376720737917,82.104012557951037,81.121545391942817,80.13898364006819,79.156336461929627,78.173613821996412,77.19082655719464,76.20798644982311,75.225106306170531,74.242200041229836,73.259282769926415,72.276370905298265,71.293482264086705,70.310636180217486,69.327853626672194,68.345157346269573,67.362571991894413,66.380124276729589,65.39784313506054,64.415759894235521,63.433908458373217,62.452325504416578,61.471050691132184,60.490126881651364,59.509600380139346,58.529521183161577,57.549943246290937,56.570924766464934,55.592528480555337,54.614821980555114,53.637878045714061,52.661774991866622,51.686597038088756,50.712434690694558,49.73938514443509,48.767552700589455,47.797049201438988,46.827994480387183,45.860516826728436,44.894753463774677,43.930851038719133,42.968966122247139,42.009265715494266,41.051927761498668,40.097141657797088,39.145108766270177,38.196042915752315,37.250170892283613,36.307732911197746,35.368983064510175,34.434189736299182,33.503635977960464,32.577619834368974,31.656454611104987,30.740469072001396,29.830007555353621,28.925429996210756,28.027111841245119,27.135443841786202,26.250831709711363,25.37369562001512,24.50446954303294,23.643600388469924,22.791546942565276,21.948778578884376,21.115773722325297,20.293018044884896,19.48100237044488,18.680220264154293,17.891165279680731,17.114327834365763,16.350191677714008,15.599229912064299,14.861900514892358,14.138641298806915,13.429864226291016,12.735948969315411,12.057235565872356,11.394015971632298,10.746524228672433,10.114924864911718,9.4992989833089077,8.8996272778908398,8.3157688923746758,7.7474345677495338,7.1941518320313147,6.6552189493923475,6.1296427765178088,5.6160532616508467,5.1125835538753082,4.6166987027168496,4.124946235036675,3.6325858862912157,3.1330287420703975,2.6169693622523216,2.0710117398410568,1.4754392869718762,0.80049629561769697,null],\"text\":[\"Age:   0<br />ex: 85.0507657\",\"Age:   1<br />ex: 84.0686301\",\"Age:   2<br />ex: 83.0863767\",\"Age:   3<br />ex: 82.1040126\",\"Age:   4<br />ex: 81.1215454\",\"Age:   5<br />ex: 80.1389836\",\"Age:   6<br />ex: 79.1563365\",\"Age:   7<br />ex: 78.1736138\",\"Age:   8<br />ex: 77.1908266\",\"Age:   9<br />ex: 76.2079864\",\"Age:  10<br />ex: 75.2251063\",\"Age:  11<br />ex: 74.2422000\",\"Age:  12<br />ex: 73.2592828\",\"Age:  13<br />ex: 72.2763709\",\"Age:  14<br />ex: 71.2934823\",\"Age:  15<br />ex: 70.3106362\",\"Age:  16<br />ex: 69.3278536\",\"Age:  17<br />ex: 68.3451573\",\"Age:  18<br />ex: 67.3625720\",\"Age:  19<br />ex: 66.3801243\",\"Age:  20<br />ex: 65.3978431\",\"Age:  21<br />ex: 64.4157599\",\"Age:  22<br />ex: 63.4339085\",\"Age:  23<br />ex: 62.4523255\",\"Age:  24<br />ex: 61.4710507\",\"Age:  25<br />ex: 60.4901269\",\"Age:  26<br />ex: 59.5096004\",\"Age:  27<br />ex: 58.5295212\",\"Age:  28<br />ex: 57.5499432\",\"Age:  29<br />ex: 56.5709248\",\"Age:  30<br />ex: 55.5925285\",\"Age:  31<br />ex: 54.6148220\",\"Age:  32<br />ex: 53.6378780\",\"Age:  33<br />ex: 52.6617750\",\"Age:  34<br />ex: 51.6865970\",\"Age:  35<br />ex: 50.7124347\",\"Age:  36<br />ex: 49.7393851\",\"Age:  37<br />ex: 48.7675527\",\"Age:  38<br />ex: 47.7970492\",\"Age:  39<br />ex: 46.8279945\",\"Age:  40<br />ex: 45.8605168\",\"Age:  41<br />ex: 44.8947535\",\"Age:  42<br />ex: 43.9308510\",\"Age:  43<br />ex: 42.9689661\",\"Age:  44<br />ex: 42.0092657\",\"Age:  45<br />ex: 41.0519278\",\"Age:  46<br />ex: 40.0971417\",\"Age:  47<br />ex: 39.1451088\",\"Age:  48<br />ex: 38.1960429\",\"Age:  49<br />ex: 37.2501709\",\"Age:  50<br />ex: 36.3077329\",\"Age:  51<br />ex: 35.3689831\",\"Age:  52<br />ex: 34.4341897\",\"Age:  53<br />ex: 33.5036360\",\"Age:  54<br />ex: 32.5776198\",\"Age:  55<br />ex: 31.6564546\",\"Age:  56<br />ex: 30.7404691\",\"Age:  57<br />ex: 29.8300076\",\"Age:  58<br />ex: 28.9254300\",\"Age:  59<br />ex: 28.0271118\",\"Age:  60<br />ex: 27.1354438\",\"Age:  61<br />ex: 26.2508317\",\"Age:  62<br />ex: 25.3736956\",\"Age:  63<br />ex: 24.5044695\",\"Age:  64<br />ex: 23.6436004\",\"Age:  65<br />ex: 22.7915469\",\"Age:  66<br />ex: 21.9487786\",\"Age:  67<br />ex: 21.1157737\",\"Age:  68<br />ex: 20.2930180\",\"Age:  69<br />ex: 19.4810024\",\"Age:  70<br />ex: 18.6802203\",\"Age:  71<br />ex: 17.8911653\",\"Age:  72<br />ex: 17.1143278\",\"Age:  73<br />ex: 16.3501917\",\"Age:  74<br />ex: 15.5992299\",\"Age:  75<br />ex: 14.8619005\",\"Age:  76<br />ex: 14.1386413\",\"Age:  77<br />ex: 13.4298642\",\"Age:  78<br />ex: 12.7359490\",\"Age:  79<br />ex: 12.0572356\",\"Age:  80<br />ex: 11.3940160\",\"Age:  81<br />ex: 10.7465242\",\"Age:  82<br />ex: 10.1149249\",\"Age:  83<br />ex:  9.4992990\",\"Age:  84<br />ex:  8.8996273\",\"Age:  85<br />ex:  8.3157689\",\"Age:  86<br />ex:  7.7474346\",\"Age:  87<br />ex:  7.1941518\",\"Age:  88<br />ex:  6.6552189\",\"Age:  89<br />ex:  6.1296428\",\"Age:  90<br />ex:  5.6160533\",\"Age:  91<br />ex:  5.1125836\",\"Age:  92<br />ex:  4.6166987\",\"Age:  93<br />ex:  4.1249462\",\"Age:  94<br />ex:  3.6325859\",\"Age:  95<br />ex:  3.1330287\",\"Age:  96<br />ex:  2.6169694\",\"Age:  97<br />ex:  2.0710117\",\"Age:  98<br />ex:  1.4754393\",\"Age:  99<br />ex:  0.8004963\",\"Age: 100<br />ex:         NA\"],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"width\":3.7795275590551185,\"color\":\"rgba(231,76,60,1)\",\"dash\":\"solid\"},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null}],\"layout\":{\"margin\":{\"t\":43.762557077625573,\"r\":7.3059360730593621,\"b\":40.182648401826491,\"l\":37.260273972602747},\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724},\"title\":{\"text\":\"<b> Life Expectancy by Age <\\/b>\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":17.534246575342465},\"x\":0,\"xref\":\"paper\"},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[-5,105],\"tickmode\":\"array\",\"ticktext\":[\"0\",\"25\",\"50\",\"75\",\"100\"],\"tickvals\":[0,24.999999999999996,50,75,100],\"categoryorder\":\"array\",\"categoryarray\":[\"0\",\"25\",\"50\",\"75\",\"100\"],\"nticks\":null,\"ticks\":\"\",\"tickcolor\":null,\"ticklen\":3.6529680365296811,\"tickwidth\":0,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(235,235,235,1)\",\"gridwidth\":0.66417600664176002,\"zeroline\":false,\"anchor\":\"y\",\"title\":{\"text\":\"Age\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[-3.4120171763454832,89.263279206844459],\"tickmode\":\"array\",\"ticktext\":[\"0\",\"20\",\"40\",\"60\",\"80\"],\"tickvals\":[-4.4408920985006262e-16,20,40,60.000000000000007,80],\"categoryorder\":\"array\",\"categoryarray\":[\"0\",\"20\",\"40\",\"60\",\"80\"],\"nticks\":null,\"ticks\":\"\",\"tickcolor\":null,\"ticklen\":3.6529680365296811,\"tickwidth\":0,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(235,235,235,1)\",\"gridwidth\":0.66417600664176002,\"zeroline\":false,\"anchor\":\"x\",\"title\":{\"text\":\"Life Expectancy (ex)\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"shapes\":[{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0,\"y1\":1}],\"showlegend\":false,\"legend\":{\"bgcolor\":null,\"bordercolor\":null,\"borderwidth\":0,\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":11.68949771689498}},\"hovermode\":\"x unified\",\"barmode\":\"relative\"},\"config\":{\"doubleClick\":\"reset\",\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"source\":\"A\",\"attrs\":{\"34b04bbb4d5\":{\"x\":{},\"y\":{},\"type\":\"scatter\"}},\"cur_data\":\"34b04bbb4d5\",\"visdat\":{\"34b04bbb4d5\":[\"function (y) \",\"x\"]},\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.20000000000000001,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\n\n\n\n## Actuarial Present Values\n\nNow let's calculate some actuarial present values, which are essential for insurance and annuity pricing.\n\n### Present Value of Life Annuity\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Set interest rate\ninterest_rate <- 0.03\n\n# Calculate discount factor\nv <- 1 / (1 + interest_rate)\n\n# Calculate annuity values\ncalculate_annuity <- function(mortality_table, interest_rate) {\n  ages <- mortality_table$Age\n  lx <- mortality_table$lx\n  n <- length(ages)\n  \n  # Initialize annuity value vector\n  ax <- numeric(n)\n  \n  for (i in 1:n) {\n    # Sum of v^t * lx+t / lx for t > 0\n    pv_sum <- 0\n    for (t in 1:(n-i)) {\n      pv_sum <- pv_sum + (1 / (1 + interest_rate))^t * lx[i+t] / lx[i]\n    }\n    \n    ax[i] <- pv_sum\n  }\n  \n  return(ax)\n}\n\n# Add annuity values to the table\nmortality_table$ax <- calculate_annuity(mortality_table, interest_rate)\n\n# Display annuity values for selected ages\nselected_ages <- c(20, 30, 40, 50, 60, 65, 70, 80, 90)\nannuity_table <- mortality_table[mortality_table$Age %in% selected_ages, c(\"Age\", \"ax\")]\n\nkable(annuity_table, \n      caption = paste0(\"Present Value of Life Annuity (Interest Rate = \", interest_rate*100, \"%)\"),\n      col.names = c(\"Age\", \"Annuity Value (ax)\"),\n      digits = 4) %>%\n  kable_styling(bootstrap_options = c(\"striped\", \"hover\", \"condensed\"))\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-striped table-hover table-condensed\" style=\"margin-left: auto; margin-right: auto;\">\n<caption>Present Value of Life Annuity (Interest Rate = 3%)</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\">   </th>\n   <th style=\"text-align:right;\"> Age </th>\n   <th style=\"text-align:right;\"> Annuity Value (ax) </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> 21 </td>\n   <td style=\"text-align:right;\"> 20 </td>\n   <td style=\"text-align:right;\"> 28.0730 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 31 </td>\n   <td style=\"text-align:right;\"> 30 </td>\n   <td style=\"text-align:right;\"> 26.3664 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 41 </td>\n   <td style=\"text-align:right;\"> 40 </td>\n   <td style=\"text-align:right;\"> 24.1263 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 51 </td>\n   <td style=\"text-align:right;\"> 50 </td>\n   <td style=\"text-align:right;\"> 21.2479 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 61 </td>\n   <td style=\"text-align:right;\"> 60 </td>\n   <td style=\"text-align:right;\"> 17.6848 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 66 </td>\n   <td style=\"text-align:right;\"> 65 </td>\n   <td style=\"text-align:right;\"> 15.6688 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 71 </td>\n   <td style=\"text-align:right;\"> 70 </td>\n   <td style=\"text-align:right;\"> 13.5359 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 81 </td>\n   <td style=\"text-align:right;\"> 80 </td>\n   <td style=\"text-align:right;\"> 9.1334 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 91 </td>\n   <td style=\"text-align:right;\"> 90 </td>\n   <td style=\"text-align:right;\"> 4.9497 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n\n### Term Life Insurance Values\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Calculate term life insurance values\ncalculate_term_insurance <- function(mortality_table, interest_rate, term) {\n  ages <- mortality_table$Age\n  qx <- mortality_table$qx\n  px <- mortality_table$px\n  n <- length(ages)\n  \n  # Initialize insurance value vector\n  Ax <- numeric(n)\n  \n  for (i in 1:(n-term)) {\n    # Calculate term insurance value\n    value <- 0\n    cum_prob <- 1\n    \n    for (t in 0:(term-1)) {\n      if (i+t <= n) {\n        # Probability of death in year t\n        death_prob <- cum_prob * qx[i+t]\n        \n        # Present value of benefit\n        pv_benefit <- (1 / (1 + interest_rate))^(t+1) * death_prob\n        \n        value <- value + pv_benefit\n        \n        # Update cumulative survival probability\n        cum_prob <- cum_prob * px[i+t]\n      }\n    }\n    \n    Ax[i] <- value\n  }\n  \n  return(Ax)\n}\n\n# Calculate 10-year term insurance values\nterm <- 10\nmortality_table$A10x <- calculate_term_insurance(mortality_table, interest_rate, term)\n\n# Display insurance values for selected ages\ninsurance_table <- mortality_table[mortality_table$Age %in% selected_ages, c(\"Age\", \"A10x\")]\n\nkable(insurance_table, \n      caption = paste0(term, \"-Year Term Life Insurance Values (Interest Rate = \", interest_rate*100, \"%)\"),\n      col.names = c(\"Age\", \"Insurance Value (A10x)\"),\n      digits = 4) %>%\n  kable_styling(bootstrap_options = c(\"striped\", \"hover\", \"condensed\"))\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-striped table-hover table-condensed\" style=\"margin-left: auto; margin-right: auto;\">\n<caption>10-Year Term Life Insurance Values (Interest Rate = 3%)</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\">   </th>\n   <th style=\"text-align:right;\"> Age </th>\n   <th style=\"text-align:right;\"> Insurance Value (A10x) </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> 21 </td>\n   <td style=\"text-align:right;\"> 20 </td>\n   <td style=\"text-align:right;\"> 0.0027 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 31 </td>\n   <td style=\"text-align:right;\"> 30 </td>\n   <td style=\"text-align:right;\"> 0.0044 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 41 </td>\n   <td style=\"text-align:right;\"> 40 </td>\n   <td style=\"text-align:right;\"> 0.0091 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 51 </td>\n   <td style=\"text-align:right;\"> 50 </td>\n   <td style=\"text-align:right;\"> 0.0217 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 61 </td>\n   <td style=\"text-align:right;\"> 60 </td>\n   <td style=\"text-align:right;\"> 0.0550 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 66 </td>\n   <td style=\"text-align:right;\"> 65 </td>\n   <td style=\"text-align:right;\"> 0.0880 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 71 </td>\n   <td style=\"text-align:right;\"> 70 </td>\n   <td style=\"text-align:right;\"> 0.1398 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 81 </td>\n   <td style=\"text-align:right;\"> 80 </td>\n   <td style=\"text-align:right;\"> 0.3327 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 91 </td>\n   <td style=\"text-align:right;\"> 90 </td>\n   <td style=\"text-align:right;\"> 0.6542 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n\n## Comparing Different Mortality Tables\n\nIn practice, actuaries often need to compare different mortality tables. Let's create a second table using a different mortality law and compare them.\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create a second mortality table using Weibull distribution\nshape <- 2.5\nscale <- 80\n\n# Calculate mortality rates using Weibull\nqx_weibull <- pweibull(ages+1, shape, scale) - pweibull(ages, shape, scale)\nqx_weibull <- qx_weibull / (1 - pweibull(ages, shape, scale))\nqx_weibull[is.nan(qx_weibull)] <- 1\n\n# Calculate survival probabilities\npx_weibull <- 1 - qx_weibull\n\n# Calculate number of survivors\nlx_weibull <- numeric(length(ages))\nlx_weibull[1] <- 100000\nfor (i in 2:length(ages)) {\n  lx_weibull[i] <- lx_weibull[i-1] * px_weibull[i-1]\n}\n\n# Create comparison data frame\ncomparison_data <- data.frame(\n  Age = rep(ages, 2),\n  qx = c(qx, qx_weibull),\n  Model = rep(c(\"Gompertz-Makeham\", \"Weibull\"), each = length(ages))\n)\n\n# Create comparison plot\np4 <- ggplot(comparison_data, aes(x = Age, y = qx, color = Model)) +\n  geom_line(size = 1) +\n  scale_color_manual(values = c(\"#3498db\", \"#e74c3c\")) +\n  labs(\n    title = \"Comparison of Mortality Models\",\n    subtitle = \"Gompertz-Makeham vs. Weibull\",\n    x = \"Age\",\n    y = \"Probability of Death (qx)\",\n    caption = \"Source: Simulated data\"\n  ) +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(face = \"bold\"),\n    plot.subtitle = element_text(color = \"gray50\"),\n    legend.position = \"bottom\"\n  )\n\n# Convert to interactive plot\nggplotly(p4) %>%\n  layout(hovermode = \"x unified\")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"plotly html-widget html-fill-item\" id=\"htmlwidget-8691c44d270b41c0fd73\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-8691c44d270b41c0fd73\">{\"x\":{\"data\":[{\"x\":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100],\"y\":[0.00021000000000000001,0.00021105170918075649,0.0002122140275816017,0.00021349858807576005,0.00021491824697641271,0.00021648721270700128,0.00021822118800390511,0.00022013752707470479,0.0002222554092849247,0.00022459603111156951,0.00022718281828459046,0.00023004166023946434,0.00023320116922736548,0.00023669296667619245,0.00024055199966844677,0.00024481689070338065,0.00024953032424395116,0.00025473947391727205,0.00026049647464412948,0.00026685894442279271,0.00027389056098930649,0.00028166169912567651,0.00029025013499434126,0.00029974182454814728,0.00031023176380641607,0.00032182493960703477,0.00033463738035001693,0.0003487973172487284,0.00036444646771097058,0.00038174145369443066,0.00040085536923187672,0.00042197951281441643,0.00044532530197109353,0.00047112638920657895,0.00049964100047397025,0.00053115451958692312,0.00056598234443677991,0.00060447304360067408,0.0006470118449330084,0.0006940244910553019,0.00074598150033144235,0.00080340287597362007,0.00086686331040925152,0.00093699793699595789,0.0010145086866496815,0.0011001713130052181,0.0011948431564193388,0.0012994717245212355,0.0014151041751873498,0.0015428977968493555,0.0016841315910257663,0.0018402190729990186,0.0020127224187515124,0.0022033680997479185,0.0024140641620418717,0.0026469193226422039,0.0029042640742615281,0.0031886740096706031,0.0035029955990964895,0.0038503746786532891,0.0042342879349273515,0.0046585777008251719,0.0051274904109325633,0.0056457191012592948,0.0062184503787208224,0.0068514163304436186,0.0075509518924197329,0.0083240582516754345,0.0091784729165041851,0.010122747156050264,0.011166331584284586,0.012319670744925777,0.013594307643944183,0.015002999275845466,0.01655984429995927,0.018280424144560631,0.02018195895104119,0.022283479918872091,0.024606019776245009,0.0271728232826851,0.030009579870417285,0.033144680752838405,0.036609503073323585,0.040438723938223134,0.044670667476998584,0.049347688402991349,0.054516595913629784,0.06022912217261029,0.066542440062778901,0.073519735391559968,0.081230839275753849,0.089752927034825097,0.099171290587439287,0.10958019208165193,0.1210838073021699,0.13379726829661875,0.14784781565577296,0.16337607198015452,0.18053744927828527,0.199503704382303,0.22046465794806722],\"text\":[\"Age:   0<br />qx: 2.100000e-04<br />Model: Gompertz-Makeham\",\"Age:   1<br />qx: 2.110517e-04<br />Model: Gompertz-Makeham\",\"Age:   2<br />qx: 2.122140e-04<br />Model: Gompertz-Makeham\",\"Age:   3<br />qx: 2.134986e-04<br />Model: Gompertz-Makeham\",\"Age:   4<br />qx: 2.149182e-04<br />Model: Gompertz-Makeham\",\"Age:   5<br />qx: 2.164872e-04<br />Model: Gompertz-Makeham\",\"Age:   6<br />qx: 2.182212e-04<br />Model: Gompertz-Makeham\",\"Age:   7<br />qx: 2.201375e-04<br />Model: Gompertz-Makeham\",\"Age:   8<br />qx: 2.222554e-04<br />Model: Gompertz-Makeham\",\"Age:   9<br />qx: 2.245960e-04<br />Model: Gompertz-Makeham\",\"Age:  10<br />qx: 2.271828e-04<br />Model: Gompertz-Makeham\",\"Age:  11<br />qx: 2.300417e-04<br />Model: Gompertz-Makeham\",\"Age:  12<br />qx: 2.332012e-04<br />Model: Gompertz-Makeham\",\"Age:  13<br />qx: 2.366930e-04<br />Model: Gompertz-Makeham\",\"Age:  14<br />qx: 2.405520e-04<br />Model: Gompertz-Makeham\",\"Age:  15<br />qx: 2.448169e-04<br />Model: Gompertz-Makeham\",\"Age:  16<br />qx: 2.495303e-04<br />Model: Gompertz-Makeham\",\"Age:  17<br />qx: 2.547395e-04<br />Model: Gompertz-Makeham\",\"Age:  18<br />qx: 2.604965e-04<br />Model: Gompertz-Makeham\",\"Age:  19<br />qx: 2.668589e-04<br />Model: Gompertz-Makeham\",\"Age:  20<br />qx: 2.738906e-04<br />Model: Gompertz-Makeham\",\"Age:  21<br />qx: 2.816617e-04<br />Model: Gompertz-Makeham\",\"Age:  22<br />qx: 2.902501e-04<br />Model: Gompertz-Makeham\",\"Age:  23<br />qx: 2.997418e-04<br />Model: Gompertz-Makeham\",\"Age:  24<br />qx: 3.102318e-04<br />Model: Gompertz-Makeham\",\"Age:  25<br />qx: 3.218249e-04<br />Model: Gompertz-Makeham\",\"Age:  26<br />qx: 3.346374e-04<br />Model: Gompertz-Makeham\",\"Age:  27<br />qx: 3.487973e-04<br />Model: Gompertz-Makeham\",\"Age:  28<br />qx: 3.644465e-04<br />Model: Gompertz-Makeham\",\"Age:  29<br />qx: 3.817415e-04<br />Model: Gompertz-Makeham\",\"Age:  30<br />qx: 4.008554e-04<br />Model: Gompertz-Makeham\",\"Age:  31<br />qx: 4.219795e-04<br />Model: Gompertz-Makeham\",\"Age:  32<br />qx: 4.453253e-04<br />Model: Gompertz-Makeham\",\"Age:  33<br />qx: 4.711264e-04<br />Model: Gompertz-Makeham\",\"Age:  34<br />qx: 4.996410e-04<br />Model: Gompertz-Makeham\",\"Age:  35<br />qx: 5.311545e-04<br />Model: Gompertz-Makeham\",\"Age:  36<br />qx: 5.659823e-04<br />Model: Gompertz-Makeham\",\"Age:  37<br />qx: 6.044730e-04<br />Model: Gompertz-Makeham\",\"Age:  38<br />qx: 6.470118e-04<br />Model: Gompertz-Makeham\",\"Age:  39<br />qx: 6.940245e-04<br />Model: Gompertz-Makeham\",\"Age:  40<br />qx: 7.459815e-04<br />Model: Gompertz-Makeham\",\"Age:  41<br />qx: 8.034029e-04<br />Model: Gompertz-Makeham\",\"Age:  42<br />qx: 8.668633e-04<br />Model: Gompertz-Makeham\",\"Age:  43<br />qx: 9.369979e-04<br />Model: Gompertz-Makeham\",\"Age:  44<br />qx: 1.014509e-03<br />Model: Gompertz-Makeham\",\"Age:  45<br />qx: 1.100171e-03<br />Model: Gompertz-Makeham\",\"Age:  46<br />qx: 1.194843e-03<br />Model: Gompertz-Makeham\",\"Age:  47<br />qx: 1.299472e-03<br />Model: Gompertz-Makeham\",\"Age:  48<br />qx: 1.415104e-03<br />Model: Gompertz-Makeham\",\"Age:  49<br />qx: 1.542898e-03<br />Model: Gompertz-Makeham\",\"Age:  50<br />qx: 1.684132e-03<br />Model: Gompertz-Makeham\",\"Age:  51<br />qx: 1.840219e-03<br />Model: Gompertz-Makeham\",\"Age:  52<br />qx: 2.012722e-03<br />Model: Gompertz-Makeham\",\"Age:  53<br />qx: 2.203368e-03<br />Model: Gompertz-Makeham\",\"Age:  54<br />qx: 2.414064e-03<br />Model: Gompertz-Makeham\",\"Age:  55<br />qx: 2.646919e-03<br />Model: Gompertz-Makeham\",\"Age:  56<br />qx: 2.904264e-03<br />Model: Gompertz-Makeham\",\"Age:  57<br />qx: 3.188674e-03<br />Model: Gompertz-Makeham\",\"Age:  58<br />qx: 3.502996e-03<br />Model: Gompertz-Makeham\",\"Age:  59<br />qx: 3.850375e-03<br />Model: Gompertz-Makeham\",\"Age:  60<br />qx: 4.234288e-03<br />Model: Gompertz-Makeham\",\"Age:  61<br />qx: 4.658578e-03<br />Model: Gompertz-Makeham\",\"Age:  62<br />qx: 5.127490e-03<br />Model: Gompertz-Makeham\",\"Age:  63<br />qx: 5.645719e-03<br />Model: Gompertz-Makeham\",\"Age:  64<br />qx: 6.218450e-03<br />Model: Gompertz-Makeham\",\"Age:  65<br />qx: 6.851416e-03<br />Model: Gompertz-Makeham\",\"Age:  66<br />qx: 7.550952e-03<br />Model: Gompertz-Makeham\",\"Age:  67<br />qx: 8.324058e-03<br />Model: Gompertz-Makeham\",\"Age:  68<br />qx: 9.178473e-03<br />Model: Gompertz-Makeham\",\"Age:  69<br />qx: 1.012275e-02<br />Model: Gompertz-Makeham\",\"Age:  70<br />qx: 1.116633e-02<br />Model: Gompertz-Makeham\",\"Age:  71<br />qx: 1.231967e-02<br />Model: Gompertz-Makeham\",\"Age:  72<br />qx: 1.359431e-02<br />Model: Gompertz-Makeham\",\"Age:  73<br />qx: 1.500300e-02<br />Model: Gompertz-Makeham\",\"Age:  74<br />qx: 1.655984e-02<br />Model: Gompertz-Makeham\",\"Age:  75<br />qx: 1.828042e-02<br />Model: Gompertz-Makeham\",\"Age:  76<br />qx: 2.018196e-02<br />Model: Gompertz-Makeham\",\"Age:  77<br />qx: 2.228348e-02<br />Model: Gompertz-Makeham\",\"Age:  78<br />qx: 2.460602e-02<br />Model: Gompertz-Makeham\",\"Age:  79<br />qx: 2.717282e-02<br />Model: Gompertz-Makeham\",\"Age:  80<br />qx: 3.000958e-02<br />Model: Gompertz-Makeham\",\"Age:  81<br />qx: 3.314468e-02<br />Model: Gompertz-Makeham\",\"Age:  82<br />qx: 3.660950e-02<br />Model: Gompertz-Makeham\",\"Age:  83<br />qx: 4.043872e-02<br />Model: Gompertz-Makeham\",\"Age:  84<br />qx: 4.467067e-02<br />Model: Gompertz-Makeham\",\"Age:  85<br />qx: 4.934769e-02<br />Model: Gompertz-Makeham\",\"Age:  86<br />qx: 5.451660e-02<br />Model: Gompertz-Makeham\",\"Age:  87<br />qx: 6.022912e-02<br />Model: Gompertz-Makeham\",\"Age:  88<br />qx: 6.654244e-02<br />Model: Gompertz-Makeham\",\"Age:  89<br />qx: 7.351974e-02<br />Model: Gompertz-Makeham\",\"Age:  90<br />qx: 8.123084e-02<br />Model: Gompertz-Makeham\",\"Age:  91<br />qx: 8.975293e-02<br />Model: Gompertz-Makeham\",\"Age:  92<br />qx: 9.917129e-02<br />Model: Gompertz-Makeham\",\"Age:  93<br />qx: 1.095802e-01<br />Model: Gompertz-Makeham\",\"Age:  94<br />qx: 1.210838e-01<br />Model: Gompertz-Makeham\",\"Age:  95<br />qx: 1.337973e-01<br />Model: Gompertz-Makeham\",\"Age:  96<br />qx: 1.478478e-01<br />Model: Gompertz-Makeham\",\"Age:  97<br />qx: 1.633761e-01<br />Model: Gompertz-Makeham\",\"Age:  98<br />qx: 1.805374e-01<br />Model: Gompertz-Makeham\",\"Age:  99<br />qx: 1.995037e-01<br />Model: Gompertz-Makeham\",\"Age: 100<br />qx: 2.204647e-01<br />Model: Gompertz-Makeham\"],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"width\":3.7795275590551185,\"color\":\"rgba(52,152,219,1)\",\"dash\":\"solid\"},\"hoveron\":\"points\",\"name\":\"Gompertz-Makeham\",\"legendgroup\":\"Gompertz-Makeham\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100],\"y\":[1.7469128487215013e-05,8.1348586830300249e-05,0.00017348291474846662,0.00028665675894259734,0.00041745834563192846,0.0005637482272041834,0.00072401737182820351,0.00089712571008939833,0.0010821716703190605,0.0012784185528557177,0.0014852493281749832,0.0017021371153023194,0.0019286249625124346,0.0021643114660587397,0.002408840221448071,0.0026618918852227987,0.0029231780705140519,0.0031924365648777135,0.0034694275232823382,0.0037539303944530205,0.0040457414082814089,0.004344671499063201,0.0046505445718977223,0.0049631960425924725,0.0052824715979597706,0.0056082261354839878,0.0059403228503021955,0.0062786324441801138,0.0066230324362889512,0.006973406559531028,0.0073296442292264778,0.0076916400733750036,0.008059293515610402,0.0084325084034834151,0.0088111926759271934,0.0091952580647512439,0.0095846198258126482,0.0099791964961755842,0.010378909674116503,0.010783683819282269,0.011193446070690371,0.011608126080573071,0.01202765586233347,0.012451969651113804,0.012881003775656453,0.013314696540313182,0.013752988116189585,0.014195820440535672,0.014643137123598866,0.015094883362237785,0.015551005859685343,0.016011452750904209,0.016476173533045178,0.016945119000572013,0.01741824118465107,0.017895493296459689,0.018376829674087061,0.018862205732743879,0.01935157791802148,0.019844903661959182,0.020342141341714075,0.020843250240632508,0.0213481905115478,0.021856923142148703,0.022369409922262207,0.022885613412924059,0.023405496917109768,0.023929024452013496,0.024456160722774452,0.024986871097548349,0.025521121583847256,0.02605887880605285,0.026600109984041977,0.02714478291284746,0.027692865943289808,0.028244327963531508,0.028799138381479732,0.029357267108007089,0.029918684540933105,0.030483361549717227,0.03105126946084023,0.031622380043810988,0.032196665497792508,0.032774098438783442,0.033354651887351844,0.033938299256875103,0.034525014342259214,0.035114771309126158,0.035707544683427614,0.036303309341481738,0.036902040500387444,0.037503713708824889,0.038108304838206493,0.038715790074153732,0.039326145908315513,0.039939349130472597,0.040555376820938904,0.041174206343249455,0.041795815337091369,0.042420181711515369,0.04304728363836139],\"text\":[\"Age:   0<br />qx: 1.746913e-05<br />Model: Weibull\",\"Age:   1<br />qx: 8.134859e-05<br />Model: Weibull\",\"Age:   2<br />qx: 1.734829e-04<br />Model: Weibull\",\"Age:   3<br />qx: 2.866568e-04<br />Model: Weibull\",\"Age:   4<br />qx: 4.174583e-04<br />Model: Weibull\",\"Age:   5<br />qx: 5.637482e-04<br />Model: Weibull\",\"Age:   6<br />qx: 7.240174e-04<br />Model: Weibull\",\"Age:   7<br />qx: 8.971257e-04<br />Model: Weibull\",\"Age:   8<br />qx: 1.082172e-03<br />Model: Weibull\",\"Age:   9<br />qx: 1.278419e-03<br />Model: Weibull\",\"Age:  10<br />qx: 1.485249e-03<br />Model: Weibull\",\"Age:  11<br />qx: 1.702137e-03<br />Model: Weibull\",\"Age:  12<br />qx: 1.928625e-03<br />Model: Weibull\",\"Age:  13<br />qx: 2.164311e-03<br />Model: Weibull\",\"Age:  14<br />qx: 2.408840e-03<br />Model: Weibull\",\"Age:  15<br />qx: 2.661892e-03<br />Model: Weibull\",\"Age:  16<br />qx: 2.923178e-03<br />Model: Weibull\",\"Age:  17<br />qx: 3.192437e-03<br />Model: Weibull\",\"Age:  18<br />qx: 3.469428e-03<br />Model: Weibull\",\"Age:  19<br />qx: 3.753930e-03<br />Model: Weibull\",\"Age:  20<br />qx: 4.045741e-03<br />Model: Weibull\",\"Age:  21<br />qx: 4.344671e-03<br />Model: Weibull\",\"Age:  22<br />qx: 4.650545e-03<br />Model: Weibull\",\"Age:  23<br />qx: 4.963196e-03<br />Model: Weibull\",\"Age:  24<br />qx: 5.282472e-03<br />Model: Weibull\",\"Age:  25<br />qx: 5.608226e-03<br />Model: Weibull\",\"Age:  26<br />qx: 5.940323e-03<br />Model: Weibull\",\"Age:  27<br />qx: 6.278632e-03<br />Model: Weibull\",\"Age:  28<br />qx: 6.623032e-03<br />Model: Weibull\",\"Age:  29<br />qx: 6.973407e-03<br />Model: Weibull\",\"Age:  30<br />qx: 7.329644e-03<br />Model: Weibull\",\"Age:  31<br />qx: 7.691640e-03<br />Model: Weibull\",\"Age:  32<br />qx: 8.059294e-03<br />Model: Weibull\",\"Age:  33<br />qx: 8.432508e-03<br />Model: Weibull\",\"Age:  34<br />qx: 8.811193e-03<br />Model: Weibull\",\"Age:  35<br />qx: 9.195258e-03<br />Model: Weibull\",\"Age:  36<br />qx: 9.584620e-03<br />Model: Weibull\",\"Age:  37<br />qx: 9.979196e-03<br />Model: Weibull\",\"Age:  38<br />qx: 1.037891e-02<br />Model: Weibull\",\"Age:  39<br />qx: 1.078368e-02<br />Model: Weibull\",\"Age:  40<br />qx: 1.119345e-02<br />Model: Weibull\",\"Age:  41<br />qx: 1.160813e-02<br />Model: Weibull\",\"Age:  42<br />qx: 1.202766e-02<br />Model: Weibull\",\"Age:  43<br />qx: 1.245197e-02<br />Model: Weibull\",\"Age:  44<br />qx: 1.288100e-02<br />Model: Weibull\",\"Age:  45<br />qx: 1.331470e-02<br />Model: Weibull\",\"Age:  46<br />qx: 1.375299e-02<br />Model: Weibull\",\"Age:  47<br />qx: 1.419582e-02<br />Model: Weibull\",\"Age:  48<br />qx: 1.464314e-02<br />Model: Weibull\",\"Age:  49<br />qx: 1.509488e-02<br />Model: Weibull\",\"Age:  50<br />qx: 1.555101e-02<br />Model: Weibull\",\"Age:  51<br />qx: 1.601145e-02<br />Model: Weibull\",\"Age:  52<br />qx: 1.647617e-02<br />Model: Weibull\",\"Age:  53<br />qx: 1.694512e-02<br />Model: Weibull\",\"Age:  54<br />qx: 1.741824e-02<br />Model: Weibull\",\"Age:  55<br />qx: 1.789549e-02<br />Model: Weibull\",\"Age:  56<br />qx: 1.837683e-02<br />Model: Weibull\",\"Age:  57<br />qx: 1.886221e-02<br />Model: Weibull\",\"Age:  58<br />qx: 1.935158e-02<br />Model: Weibull\",\"Age:  59<br />qx: 1.984490e-02<br />Model: Weibull\",\"Age:  60<br />qx: 2.034214e-02<br />Model: Weibull\",\"Age:  61<br />qx: 2.084325e-02<br />Model: Weibull\",\"Age:  62<br />qx: 2.134819e-02<br />Model: Weibull\",\"Age:  63<br />qx: 2.185692e-02<br />Model: Weibull\",\"Age:  64<br />qx: 2.236941e-02<br />Model: Weibull\",\"Age:  65<br />qx: 2.288561e-02<br />Model: Weibull\",\"Age:  66<br />qx: 2.340550e-02<br />Model: Weibull\",\"Age:  67<br />qx: 2.392902e-02<br />Model: Weibull\",\"Age:  68<br />qx: 2.445616e-02<br />Model: Weibull\",\"Age:  69<br />qx: 2.498687e-02<br />Model: Weibull\",\"Age:  70<br />qx: 2.552112e-02<br />Model: Weibull\",\"Age:  71<br />qx: 2.605888e-02<br />Model: Weibull\",\"Age:  72<br />qx: 2.660011e-02<br />Model: Weibull\",\"Age:  73<br />qx: 2.714478e-02<br />Model: Weibull\",\"Age:  74<br />qx: 2.769287e-02<br />Model: Weibull\",\"Age:  75<br />qx: 2.824433e-02<br />Model: Weibull\",\"Age:  76<br />qx: 2.879914e-02<br />Model: Weibull\",\"Age:  77<br />qx: 2.935727e-02<br />Model: Weibull\",\"Age:  78<br />qx: 2.991868e-02<br />Model: Weibull\",\"Age:  79<br />qx: 3.048336e-02<br />Model: Weibull\",\"Age:  80<br />qx: 3.105127e-02<br />Model: Weibull\",\"Age:  81<br />qx: 3.162238e-02<br />Model: Weibull\",\"Age:  82<br />qx: 3.219667e-02<br />Model: Weibull\",\"Age:  83<br />qx: 3.277410e-02<br />Model: Weibull\",\"Age:  84<br />qx: 3.335465e-02<br />Model: Weibull\",\"Age:  85<br />qx: 3.393830e-02<br />Model: Weibull\",\"Age:  86<br />qx: 3.452501e-02<br />Model: Weibull\",\"Age:  87<br />qx: 3.511477e-02<br />Model: Weibull\",\"Age:  88<br />qx: 3.570754e-02<br />Model: Weibull\",\"Age:  89<br />qx: 3.630331e-02<br />Model: Weibull\",\"Age:  90<br />qx: 3.690204e-02<br />Model: Weibull\",\"Age:  91<br />qx: 3.750371e-02<br />Model: Weibull\",\"Age:  92<br />qx: 3.810830e-02<br />Model: Weibull\",\"Age:  93<br />qx: 3.871579e-02<br />Model: Weibull\",\"Age:  94<br />qx: 3.932615e-02<br />Model: Weibull\",\"Age:  95<br />qx: 3.993935e-02<br />Model: Weibull\",\"Age:  96<br />qx: 4.055538e-02<br />Model: Weibull\",\"Age:  97<br />qx: 4.117421e-02<br />Model: Weibull\",\"Age:  98<br />qx: 4.179582e-02<br />Model: Weibull\",\"Age:  99<br />qx: 4.242018e-02<br />Model: Weibull\",\"Age: 100<br />qx: 4.304728e-02<br />Model: Weibull\"],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"width\":3.7795275590551185,\"color\":\"rgba(231,76,60,1)\",\"dash\":\"solid\"},\"hoveron\":\"points\",\"name\":\"Weibull\",\"legendgroup\":\"Weibull\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null}],\"layout\":{\"margin\":{\"t\":43.762557077625573,\"r\":7.3059360730593621,\"b\":40.182648401826491,\"l\":48.949771689497723},\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724},\"title\":{\"text\":\"<b> Comparison of Mortality Models <\\/b>\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":17.534246575342465},\"x\":0,\"xref\":\"paper\"},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[-5,105],\"tickmode\":\"array\",\"ticktext\":[\"0\",\"25\",\"50\",\"75\",\"100\"],\"tickvals\":[0,24.999999999999996,50,75,100],\"categoryorder\":\"array\",\"categoryarray\":[\"0\",\"25\",\"50\",\"75\",\"100\"],\"nticks\":null,\"ticks\":\"\",\"tickcolor\":null,\"ticklen\":3.6529680365296811,\"tickwidth\":0,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(235,235,235,1)\",\"gridwidth\":0.66417600664176002,\"zeroline\":false,\"anchor\":\"y\",\"title\":{\"text\":\"Age\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[-0.011004890312491786,0.23148701738904623],\"tickmode\":\"array\",\"ticktext\":[\"0.00\",\"0.05\",\"0.10\",\"0.15\",\"0.20\"],\"tickvals\":[0,0.05000000000000001,0.10000000000000001,0.15000000000000002,0.20000000000000001],\"categoryorder\":\"array\",\"categoryarray\":[\"0.00\",\"0.05\",\"0.10\",\"0.15\",\"0.20\"],\"nticks\":null,\"ticks\":\"\",\"tickcolor\":null,\"ticklen\":3.6529680365296811,\"tickwidth\":0,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(235,235,235,1)\",\"gridwidth\":0.66417600664176002,\"zeroline\":false,\"anchor\":\"x\",\"title\":{\"text\":\"Probability of Death (qx)\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"shapes\":[{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0,\"y1\":1}],\"showlegend\":true,\"legend\":{\"bgcolor\":null,\"bordercolor\":null,\"borderwidth\":0,\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":11.68949771689498},\"title\":{\"text\":\"Model\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}}},\"hovermode\":\"x unified\",\"barmode\":\"relative\"},\"config\":{\"doubleClick\":\"reset\",\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"source\":\"A\",\"attrs\":{\"34b02dad22fe\":{\"x\":{},\"y\":{},\"colour\":{},\"type\":\"scatter\"}},\"cur_data\":\"34b02dad22fe\",\"visdat\":{\"34b02dad22fe\":[\"function (y) \",\"x\"]},\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.20000000000000001,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\n\n\n\n## Practical Applications\n\n### Premium Calculation Example\n\nLet's calculate a simple premium for a 10-year term life insurance policy with a $100,000 benefit.\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Function to calculate net single premium\ncalculate_nsp <- function(age, term, benefit, mortality_table, interest_rate) {\n  # Get index for the age\n  age_index <- which(mortality_table$Age == age)\n  \n  if (length(age_index) == 0) {\n    return(NA)\n  }\n  \n  # Get term insurance value\n  A_term <- mortality_table$A10x[age_index]\n  \n  # Calculate net single premium\n  nsp <- benefit * A_term\n  \n  return(nsp)\n}\n\n# Function to calculate annual premium\ncalculate_annual_premium <- function(age, term, benefit, mortality_table, interest_rate) {\n  # Get index for the age\n  age_index <- which(mortality_table$Age == age)\n  \n  if (length(age_index) == 0) {\n    return(NA)\n  }\n  \n  # Get term insurance value and annuity value\n  A_term <- mortality_table$A10x[age_index]\n  \n  # Calculate annuity value for term years\n  ax_term <- 0\n  cum_prob <- 1\n  v <- 1 / (1 + interest_rate)\n  \n  for (t in 0:(term-1)) {\n    if (age_index + t <= nrow(mortality_table)) {\n      ax_term <- ax_term + v^t * cum_prob\n      cum_prob <- cum_prob * mortality_table$px[age_index + t]\n    }\n  }\n  \n  # Calculate annual premium\n  annual_premium <- benefit * A_term / ax_term\n  \n  return(annual_premium)\n}\n\n# Calculate premiums for different ages\npremium_ages <- c(25, 30, 35, 40, 45, 50, 55, 60)\nbenefit <- 100000\nterm <- 10\n\n# Calculate premiums\nnsp_values <- sapply(premium_ages, calculate_nsp, term = term, benefit = benefit, \n                    mortality_table = mortality_table, interest_rate = interest_rate)\nannual_premiums <- sapply(premium_ages, calculate_annual_premium, term = term, benefit = benefit, \n                         mortality_table = mortality_table, interest_rate = interest_rate)\n\n# Create premium table\npremium_table <- data.frame(\n  Age = premium_ages,\n  NSP = nsp_values,\n  Annual_Premium = annual_premiums\n)\n\nkable(premium_table, \n      caption = paste0(\"10-Year Term Life Insurance Premiums ($\", format(benefit, big.mark = \",\"), \" Benefit)\"),\n      col.names = c(\"Age\", \"Net Single Premium ($)\", \"Annual Premium ($)\"),\n      digits = 2,\n      format.args = list(big.mark = \",\")) %>%\n  kable_styling(bootstrap_options = c(\"striped\", \"hover\", \"condensed\"))\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-striped table-hover table-condensed\" style=\"margin-left: auto; margin-right: auto;\">\n<caption>10-Year Term Life Insurance Premiums ($1e+05 Benefit)</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:right;\"> Age </th>\n   <th style=\"text-align:right;\"> Net Single Premium ($) \n   <th style=\"text-align:right;\"> Annual Premium ($) </th>\n  \n \n</caption>\n<tbody>\n  <tr>\n   <td style=\"text-align:right;\"> 25 </td>\n   <td style=\"text-align:right;\"> 335.77 </td>\n   <td style=\"text-align:right;\"> 38.27 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 30 </td>\n   <td style=\"text-align:right;\"> 442.86 </td>\n   <td style=\"text-align:right;\"> 50.50 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 35 </td>\n   <td style=\"text-align:right;\"> 619.17 </td>\n   <td style=\"text-align:right;\"> 70.66 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 40 </td>\n   <td style=\"text-align:right;\"> 909.16 </td>\n   <td style=\"text-align:right;\"> 103.89 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 45 </td>\n   <td style=\"text-align:right;\"> 1,385.40 </td>\n   <td style=\"text-align:right;\"> 158.62 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 50 </td>\n   <td style=\"text-align:right;\"> 2,165.49 </td>\n   <td style=\"text-align:right;\"> 248.75 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 55 </td>\n   <td style=\"text-align:right;\"> 3,437.93 </td>\n   <td style=\"text-align:right;\"> 397.07 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 60 </td>\n   <td style=\"text-align:right;\"> 5,499.06 </td>\n   <td style=\"text-align:right;\"> 640.81 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n\n### Visualizing Premium Trends\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create premium trend plot\np5 <- ggplot(premium_table, aes(x = Age, y = Annual_Premium)) +\n  geom_line(color = \"#2c3e50\", size = 1) +\n  geom_point(color = \"#3498db\", size = 3) +\n  labs(\n    title = \"Annual Premium by Age\",\n    subtitle = paste0(\"10-Year Term Life Insurance ($\", format(benefit, big.mark = \",\"), \" Benefit)\"),\n    x = \"Age\",\n    y = \"Annual Premium ($)\",\n    caption = \"Source: Simulated data\"\n  ) +\n  scale_y_continuous(labels = scales::dollar_format()) +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(face = \"bold\"),\n    plot.subtitle = element_text(color = \"gray50\")\n  )\n\n# Convert to interactive plot\nggplotly(p5) %>%\n  layout(hovermode = \"x unified\")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"plotly html-widget html-fill-item\" id=\"htmlwidget-56b09ed1d1b0202e949a\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-56b09ed1d1b0202e949a\">{\"x\":{\"data\":[{\"x\":[25,30,35,40,45,50,55,60],\"y\":[38.274875521225276,50.504973133447201,70.663670975364184,103.88527311999229,158.61910138998863,248.7530288412099,397.06826848541283,640.80962272557042],\"text\":[\"Age: 25<br />Annual_Premium:  38.27488\",\"Age: 30<br />Annual_Premium:  50.50497\",\"Age: 35<br />Annual_Premium:  70.66367\",\"Age: 40<br />Annual_Premium: 103.88527\",\"Age: 45<br />Annual_Premium: 158.61910\",\"Age: 50<br />Annual_Premium: 248.75303\",\"Age: 55<br />Annual_Premium: 397.06827\",\"Age: 60<br />Annual_Premium: 640.80962\"],\"type\":\"scatter\",\"mode\":\"lines+markers\",\"line\":{\"width\":3.7795275590551185,\"color\":\"rgba(44,62,80,1)\",\"dash\":\"solid\"},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(52,152,219,1)\",\"opacity\":1,\"size\":11.338582677165356,\"symbol\":\"circle\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(52,152,219,1)\"}},\"frame\":null}],\"layout\":{\"margin\":{\"t\":43.762557077625573,\"r\":7.3059360730593621,\"b\":40.182648401826491,\"l\":48.949771689497723},\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724},\"title\":{\"text\":\"<b> Annual Premium by Age <\\/b>\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":17.534246575342465},\"x\":0,\"xref\":\"paper\"},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[23.25,61.75],\"tickmode\":\"array\",\"ticktext\":[\"30\",\"40\",\"50\",\"60\"],\"tickvals\":[30,40,50,60],\"categoryorder\":\"array\",\"categoryarray\":[\"30\",\"40\",\"50\",\"60\"],\"nticks\":null,\"ticks\":\"\",\"tickcolor\":null,\"ticklen\":3.6529680365296811,\"tickwidth\":0,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(235,235,235,1)\",\"gridwidth\":0.66417600664176002,\"zeroline\":false,\"anchor\":\"y\",\"title\":{\"text\":\"Age\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[8.1481381610080135,670.93636008578767],\"tickmode\":\"array\",\"ticktext\":[\"$200\",\"$400\",\"$600\"],\"tickvals\":[200,400.00000000000006,600],\"categoryorder\":\"array\",\"categoryarray\":[\"$200\",\"$400\",\"$600\"],\"nticks\":null,\"ticks\":\"\",\"tickcolor\":null,\"ticklen\":3.6529680365296811,\"tickwidth\":0,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(235,235,235,1)\",\"gridwidth\":0.66417600664176002,\"zeroline\":false,\"anchor\":\"x\",\"title\":{\"text\":\"Annual Premium ($)\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"shapes\":[{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0,\"y1\":1}],\"showlegend\":false,\"legend\":{\"bgcolor\":null,\"bordercolor\":null,\"borderwidth\":0,\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":11.68949771689498}},\"hovermode\":\"x unified\",\"barmode\":\"relative\"},\"config\":{\"doubleClick\":\"reset\",\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"source\":\"A\",\"attrs\":{\"34b0601027f5\":{\"x\":{},\"y\":{},\"type\":\"scatter\"},\"34b012c524cc\":{\"x\":{},\"y\":{}}},\"cur_data\":\"34b0601027f5\",\"visdat\":{\"34b0601027f5\":[\"function (y) \",\"x\"],\"34b012c524cc\":[\"function (y) \",\"x\"]},\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.20000000000000001,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\n\n\n\n## Conclusion\n\nThis post has demonstrated how to work with mortality tables in R, from basic construction to practical applications in insurance pricing. The interactive visualizations help in understanding the patterns and relationships in mortality data.\n\nFor actuaries and data scientists, R provides powerful tools for mortality analysis, allowing for sophisticated modeling and visualization that can enhance decision-making in insurance and pension contexts.\n\nIn future posts, we'll explore more advanced topics such as:\n\n- Stochastic mortality modeling\n- Multi-state models for health insurance\n- Bayesian approaches to mortality projection\n- Machine learning applications in mortality analysis\n\n## References\n\n1. Dickson, D. C., Hardy, M. R., & Waters, H. R. (2013). *Actuarial Mathematics for Life Contingent Risks*. Cambridge University Press.\n\n2. Bowers, N. L., Gerber, H. U., Hickman, J. C., Jones, D. A., & Nesbitt, C. J. (1997). *Actuarial Mathematics*. Society of Actuaries.\n\n3. Charpentier, A. (2014). *Computational Actuarial Science with R*. CRC Press.\n\n4. Society of Actuaries. (2019). *Life Tables and Mortality Models*. Education and Examination Committee of the Society of Actuaries.\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../site_libs/kePrint-0.0.1/kePrint.js\"></script>\n<link href=\"../../site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/htmlwidgets-1.6.3/htmlwidgets.js\"></script>\n<script src=\"../../site_libs/plotly-binding-4.10.3/plotly.js\"></script>\n<script src=\"../../site_libs/typedarray-0.1/typedarray.min.js\"></script>\n<script src=\"../../site_libs/jquery-3.5.1/jquery.min.js\"></script>\n<link href=\"../../site_libs/crosstalk-1.2.1/css/crosstalk.min.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/crosstalk-1.2.1/js/crosstalk.min.js\"></script>\n<link href=\"../../site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/plotly-main-2.11.1/plotly-latest.min.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}