<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.52">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Your Name">
<meta name="dcterms.date" content="2025-04-20">
<meta name="description" content="A comprehensive analysis of mortality tables using R, with interactive visualizations and practical applications for actuaries.">
<title>Mortality Table Analysis with R – Actuarial &amp; Data Science Hub</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><script src="../../site_libs/kePrint-0.0.1/kePrint.js"></script><link href="../../site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script src="../../site_libs/htmlwidgets-1.6.3/htmlwidgets.js"></script><script src="../../site_libs/plotly-binding-4.10.3/plotly.js"></script><script src="../../site_libs/typedarray-0.1/typedarray.min.js"></script><script src="../../site_libs/jquery-3.5.1/jquery.min.js"></script><link href="../../site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="../../site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script><link href="../../site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="../../site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script><!-- Meta tags for SEO optimization --><meta name="description" content="A comprehensive analysis of mortality tables using R, with interactive visualizations and practical applications for actuaries.">
<meta name="keywords" content="actuarial science, data science, data analysis, R programming, statistics, risk modeling">
<meta name="author" content="Your Name">
<!-- Open Graph tags for social media sharing --><meta property="og:title" content="Mortality Table Analysis with R – Actuarial &amp; Data Science Hub">
<meta property="og:description" content="A comprehensive analysis of mortality tables using R, with interactive visualizations and practical applications for actuaries.">
<meta property="og:image" content="../../images/placeholder.jpg">
<meta property="og:url" content="?meta:site-url?meta:path">
<meta property="og:type" content="website">
<meta property="og:site_name" content="Actuarial &amp; Data Science Hub">
<!-- Twitter Card tags --><meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Mortality Table Analysis with R – Actuarial &amp; Data Science Hub">
<meta name="twitter:description" content="A comprehensive analysis of mortality tables using R, with interactive visualizations and practical applications for actuaries.">
<meta name="twitter:image" content="../../images/placeholder.jpg">
<!-- Schema.org markup for Google --><script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "?meta:schema-type",
  "headline": "Mortality Table Analysis with R",
  "description": "A comprehensive analysis of mortality tables using R, with interactive visualizations and practical applications for actuaries.",
  "image": "../../images/placeholder.jpg",
  "author": {
    "@type": "Person",
    "name": "Your Name"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Actuarial & Data Science Hub",
    "logo": {
      "@type": "ImageObject",
      "url": "?meta:site-url/images/logo.png"
    }
  },
  "datePublished": "April 20, 2025",
  "dateModified": "?meta:last-modified"
}
</script><!-- Canonical URL --><link rel="canonical" href="?meta:site-url?meta:path">
<!-- Preconnect to external domains --><link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
<!-- Font loading --><link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&amp;family=Fira+Code:wght@400;500&amp;display=swap" rel="stylesheet">
<!-- Responsive viewport meta tag --><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<!-- Google Analytics script (replace UA-XXXXXXXX-X with your actual tracking ID) --><!-- Google tag (gtag.js) --><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-XXXXXXXXXX');
</script><!-- Custom JavaScript for enhanced interactivity --><script>
  document.addEventListener('DOMContentLoaded', function() {
    // Initialize tooltips
    const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
    tooltipTriggerList.map(function (tooltipTriggerEl) {
      return new bootstrap.Tooltip(tooltipTriggerEl);
    });
    
    // Add smooth scrolling to all links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        
        document.querySelector(this.getAttribute('href')).scrollIntoView({
          behavior: 'smooth'
        });
      });
    });
    
    // Add active class to current navigation item
    const currentLocation = location.pathname;
    const menuItems = document.querySelectorAll('.navbar-nav a');
    const menuLength = menuItems.length;
    for (let i = 0; i < menuLength; i++) {
      if (menuItems[i].getAttribute('href') === currentLocation) {
        menuItems[i].classList.add('active');
      }
    }
  });
</script><script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script><script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script><link rel="stylesheet" href="../../styles.css">
<meta property="og:title" content="Mortality Table Analysis with R – Actuarial &amp; Data Science Hub">
<meta property="og:description" content="A comprehensive analysis of mortality tables using R, with interactive visualizations and practical applications for actuaries.">
<meta property="og:image" content="../../images/placeholder.jpg">
<meta property="og:site_name" content="Actuarial &amp; Data Science Hub">
<meta name="twitter:title" content="Mortality Table Analysis with R – Actuarial &amp; Data Science Hub">
<meta name="twitter:description" content="A comprehensive analysis of mortality tables using R, with interactive visualizations and practical applications for actuaries.">
<meta name="twitter:image" content="../../images/placeholder.jpg">
<meta name="twitter:card" content="summary_large_image">
</head>
<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg " data-bs-theme="dark"><div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../images/logo.png" alt="" class="navbar-logo"></a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Actuarial &amp; Data Science Hub</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
<li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about/index.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-blog" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Blog</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-blog">
<li>
    <a class="dropdown-item" href="../../posts/_index.qmd">
 <span class="dropdown-text">All Posts</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../posts/actuarial/index.html">
 <span class="dropdown-text">Actuarial Science</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../posts/data-science/index.html">
 <span class="dropdown-text">Data Science</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../posts/data-analysis/index.html">
 <span class="dropdown-text">Data Analysis</span></a>
  </li>  
    </ul>
</li>
  <li class="nav-item">
    <a class="nav-link" href="../../projects/index.html"> 
<span class="menu-text">Projects</span></a>
  </li>  
</ul>
<ul class="navbar-nav navbar-nav-scroll ms-auto">
<li class="nav-item compact">
    <a class="nav-link" href="../../index.xml"> <i class="bi bi-rss" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/username"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://linkedin.com/in/username"> <i class="bi bi-linkedin" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
</div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">On this page</h2>
   
  <ul>
<li>
<a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a>
  <ul class="collapse">
<li><a href="#what-are-mortality-tables" id="toc-what-are-mortality-tables" class="nav-link" data-scroll-target="#what-are-mortality-tables">What are Mortality Tables?</a></li>
  </ul>
</li>
  <li><a href="#creating-a-basic-mortality-table-in-r" id="toc-creating-a-basic-mortality-table-in-r" class="nav-link" data-scroll-target="#creating-a-basic-mortality-table-in-r">Creating a Basic Mortality Table in R</a></li>
  <li>
<a href="#visualizing-mortality-data" id="toc-visualizing-mortality-data" class="nav-link" data-scroll-target="#visualizing-mortality-data">Visualizing Mortality Data</a>
  <ul class="collapse">
<li><a href="#mortality-rates-by-age" id="toc-mortality-rates-by-age" class="nav-link" data-scroll-target="#mortality-rates-by-age">Mortality Rates by Age</a></li>
  <li><a href="#survival-curve" id="toc-survival-curve" class="nav-link" data-scroll-target="#survival-curve">Survival Curve</a></li>
  </ul>
</li>
  <li><a href="#calculating-life-expectancy" id="toc-calculating-life-expectancy" class="nav-link" data-scroll-target="#calculating-life-expectancy">Calculating Life Expectancy</a></li>
  <li>
<a href="#actuarial-present-values" id="toc-actuarial-present-values" class="nav-link" data-scroll-target="#actuarial-present-values">Actuarial Present Values</a>
  <ul class="collapse">
<li><a href="#present-value-of-life-annuity" id="toc-present-value-of-life-annuity" class="nav-link" data-scroll-target="#present-value-of-life-annuity">Present Value of Life Annuity</a></li>
  <li><a href="#term-life-insurance-values" id="toc-term-life-insurance-values" class="nav-link" data-scroll-target="#term-life-insurance-values">Term Life Insurance Values</a></li>
  </ul>
</li>
  <li><a href="#comparing-different-mortality-tables" id="toc-comparing-different-mortality-tables" class="nav-link" data-scroll-target="#comparing-different-mortality-tables">Comparing Different Mortality Tables</a></li>
  <li>
<a href="#practical-applications" id="toc-practical-applications" class="nav-link" data-scroll-target="#practical-applications">Practical Applications</a>
  <ul class="collapse">
<li><a href="#premium-calculation-example" id="toc-premium-calculation-example" class="nav-link" data-scroll-target="#premium-calculation-example">Premium Calculation Example</a></li>
  <li><a href="#visualizing-premium-trends" id="toc-visualizing-premium-trends" class="nav-link" data-scroll-target="#visualizing-premium-trends">Visualizing Premium Trends</a></li>
  </ul>
</li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul><div class="toc-actions"><ul><li><a href="https://github.com/username/quarto-website/edit/main/posts/actuarial/mortality-analysis.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/username/quarto-website/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Mortality Table Analysis with R</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
<p class="subtitle lead">Exploring actuarial life tables and survival analysis</p>
  <div class="quarto-categories">
    <div class="quarto-category">actuarial</div>
    <div class="quarto-category">mortality</div>
    <div class="quarto-category">R</div>
  </div>
  </div>

<div>
  <div class="description">
    A comprehensive analysis of mortality tables using R, with interactive visualizations and practical applications for actuaries.
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Your Name </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">April 20, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header><section id="introduction" class="level2"><h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>Mortality tables are fundamental tools in actuarial science, providing the foundation for life insurance pricing, pension valuations, and demographic studies. This post explores how to work with mortality data in R, create visualizations, and perform key actuarial calculations.</p>
<section id="what-are-mortality-tables" class="level3"><h3 class="anchored" data-anchor-id="what-are-mortality-tables">What are Mortality Tables?</h3>
<p>Mortality tables (also called life tables) present the probability of death for individuals at different ages. They typically include:</p>
<ul>
<li>Age (<span class="math inline">\(x\)</span>)</li>
<li>Number of survivors to age <span class="math inline">\(x\)</span> (<span class="math inline">\(l_x\)</span>)</li>
<li>Number of deaths between ages <span class="math inline">\(x\)</span> and <span class="math inline">\(x+1\)</span> (<span class="math inline">\(d_x\)</span>)</li>
<li>Probability of death between ages <span class="math inline">\(x\)</span> and <span class="math inline">\(x+1\)</span> (<span class="math inline">\(q_x\)</span>)</li>
<li>Probability of survival from age <span class="math inline">\(x\)</span> to <span class="math inline">\(x+1\)</span> (<span class="math inline">\(p_x\)</span>)</li>
<li>Life expectancy at age <span class="math inline">\(x\)</span> (<span class="math inline">\(e_x\)</span>)</li>
</ul>
<p>These tables form the statistical basis for calculating premiums, reserves, and other actuarial values.</p>
</section></section><section id="creating-a-basic-mortality-table-in-r" class="level2"><h2 class="anchored" data-anchor-id="creating-a-basic-mortality-table-in-r">Creating a Basic Mortality Table in R</h2>
<p>Let’s start by creating a simple mortality table using the Gompertz-Makeham law of mortality, which is commonly used in actuarial work.</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Define parameters for Gompertz-Makeham law</span></span>
<span><span class="va">alpha</span> <span class="op">&lt;-</span> <span class="fl">0.0002</span>  <span class="co"># Constant component</span></span>
<span><span class="va">beta</span> <span class="op">&lt;-</span> <span class="fl">0.00001</span>  <span class="co"># Age-dependent component (base)</span></span>
<span><span class="va">gamma</span> <span class="op">&lt;-</span> <span class="fl">0.1</span>     <span class="co"># Age-dependent component (exponential)</span></span>
<span></span>
<span><span class="co"># Create age range</span></span>
<span><span class="va">ages</span> <span class="op">&lt;-</span> <span class="fl">0</span><span class="op">:</span><span class="fl">100</span></span>
<span></span>
<span><span class="co"># Calculate mortality rates using Gompertz-Makeham formula</span></span>
<span><span class="va">qx</span> <span class="op">&lt;-</span> <span class="va">alpha</span> <span class="op">+</span> <span class="va">beta</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html">exp</a></span><span class="op">(</span><span class="va">gamma</span> <span class="op">*</span> <span class="va">ages</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Ensure probabilities are between 0 and 1</span></span>
<span><span class="va">qx</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">pmin</a></span><span class="op">(</span><span class="va">qx</span>, <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Calculate survival probabilities</span></span>
<span><span class="va">px</span> <span class="op">&lt;-</span> <span class="fl">1</span> <span class="op">-</span> <span class="va">qx</span></span>
<span></span>
<span><span class="co"># Calculate number of survivors (starting with 100,000 lives)</span></span>
<span><span class="va">lx</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">ages</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">lx</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">100000</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">2</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">ages</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">lx</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">lx</span><span class="op">[</span><span class="va">i</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span> <span class="op">*</span> <span class="va">px</span><span class="op">[</span><span class="va">i</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Calculate deaths</span></span>
<span><span class="va">dx</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">ages</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">ages</span><span class="op">)</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">dx</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">lx</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">-</span> <span class="va">lx</span><span class="op">[</span><span class="va">i</span><span class="op">+</span><span class="fl">1</span><span class="op">]</span></span>
<span><span class="op">}</span></span>
<span><span class="va">dx</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">ages</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">lx</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">ages</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Create mortality table</span></span>
<span><span class="va">mortality_table</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span></span>
<span>  Age <span class="op">=</span> <span class="va">ages</span>,</span>
<span>  qx <span class="op">=</span> <span class="va">qx</span>,</span>
<span>  px <span class="op">=</span> <span class="va">px</span>,</span>
<span>  lx <span class="op">=</span> <span class="va">lx</span>,</span>
<span>  dx <span class="op">=</span> <span class="va">dx</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Display first 10 rows of the table</span></span>
<span><span class="fu">kable</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">mortality_table</span>, <span class="fl">10</span><span class="op">)</span>, </span>
<span>      caption <span class="op">=</span> <span class="st">"Mortality Table (First 10 Ages)"</span>,</span>
<span>      digits <span class="op">=</span> <span class="fl">5</span>,</span>
<span>      format.args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>big.mark <span class="op">=</span> <span class="st">","</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">kable_styling</span><span class="op">(</span>bootstrap_options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"striped"</span>, <span class="st">"hover"</span>, <span class="st">"condensed"</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<caption>Mortality Table (First 10 Ages)</caption>
<thead><tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">Age</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">qx</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">px</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">lx</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">dx</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00021</td>
<td style="text-align: right;">0.99979</td>
<td style="text-align: right;">100,000.00</td>
<td style="text-align: right;">21.00000</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.00021</td>
<td style="text-align: right;">0.99979</td>
<td style="text-align: right;">99,979.00</td>
<td style="text-align: right;">21.10074</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: right;">0.00021</td>
<td style="text-align: right;">0.99979</td>
<td style="text-align: right;">99,957.90</td>
<td style="text-align: right;">21.21247</td>
</tr>
<tr class="even">
<td style="text-align: right;">3</td>
<td style="text-align: right;">0.00021</td>
<td style="text-align: right;">0.99979</td>
<td style="text-align: right;">99,936.69</td>
<td style="text-align: right;">21.33634</td>
</tr>
<tr class="odd">
<td style="text-align: right;">4</td>
<td style="text-align: right;">0.00021</td>
<td style="text-align: right;">0.99979</td>
<td style="text-align: right;">99,915.35</td>
<td style="text-align: right;">21.47363</td>
</tr>
<tr class="even">
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.00022</td>
<td style="text-align: right;">0.99978</td>
<td style="text-align: right;">99,893.88</td>
<td style="text-align: right;">21.62575</td>
</tr>
<tr class="odd">
<td style="text-align: right;">6</td>
<td style="text-align: right;">0.00022</td>
<td style="text-align: right;">0.99978</td>
<td style="text-align: right;">99,872.25</td>
<td style="text-align: right;">21.79424</td>
</tr>
<tr class="even">
<td style="text-align: right;">7</td>
<td style="text-align: right;">0.00022</td>
<td style="text-align: right;">0.99978</td>
<td style="text-align: right;">99,850.46</td>
<td style="text-align: right;">21.98083</td>
</tr>
<tr class="odd">
<td style="text-align: right;">8</td>
<td style="text-align: right;">0.00022</td>
<td style="text-align: right;">0.99978</td>
<td style="text-align: right;">99,828.48</td>
<td style="text-align: right;">22.18742</td>
</tr>
<tr class="even">
<td style="text-align: right;">9</td>
<td style="text-align: right;">0.00022</td>
<td style="text-align: right;">0.99978</td>
<td style="text-align: right;">99,806.29</td>
<td style="text-align: right;">22.41610</td>
</tr>
</tbody>
</table>
</div>
</div>
</section><section id="visualizing-mortality-data" class="level2"><h2 class="anchored" data-anchor-id="visualizing-mortality-data">Visualizing Mortality Data</h2>
<p>Visualization is crucial for understanding mortality patterns. Let’s create some interactive plots to explore our mortality table.</p>
<section id="mortality-rates-by-age" class="level3"><h3 class="anchored" data-anchor-id="mortality-rates-by-age">Mortality Rates by Age</h3>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span><span class="va">mortality_table</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">Age</span>, y <span class="op">=</span> <span class="va">qx</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span>color <span class="op">=</span> <span class="st">"#3498db"</span>, size <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Mortality Rates by Age"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"Based on Gompertz-Makeham Law"</span>,</span>
<span>    x <span class="op">=</span> <span class="st">"Age"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Probability of Death (qx)"</span>,</span>
<span>    caption <span class="op">=</span> <span class="st">"Source: Simulated data"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_minimal</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span></span>
<span>    plot.title <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>face <span class="op">=</span> <span class="st">"bold"</span><span class="op">)</span>,</span>
<span>    plot.subtitle <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>color <span class="op">=</span> <span class="st">"gray50"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># Convert to interactive plot</span></span>
<span><span class="fu">ggplotly</span><span class="op">(</span><span class="va">p</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/layout.html">layout</a></span><span class="op">(</span>hovermode <span class="op">=</span> <span class="st">"x unified"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-6e8101e870b342515926" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-6e8101e870b342515926">{"x":{"data":[{"x":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100],"y":[0.00021000000000000001,0.00021105170918075649,0.0002122140275816017,0.00021349858807576005,0.00021491824697641271,0.00021648721270700128,0.00021822118800390511,0.00022013752707470479,0.0002222554092849247,0.00022459603111156951,0.00022718281828459046,0.00023004166023946434,0.00023320116922736548,0.00023669296667619245,0.00024055199966844677,0.00024481689070338065,0.00024953032424395116,0.00025473947391727205,0.00026049647464412948,0.00026685894442279271,0.00027389056098930649,0.00028166169912567651,0.00029025013499434126,0.00029974182454814728,0.00031023176380641607,0.00032182493960703477,0.00033463738035001693,0.0003487973172487284,0.00036444646771097058,0.00038174145369443066,0.00040085536923187672,0.00042197951281441643,0.00044532530197109353,0.00047112638920657895,0.00049964100047397025,0.00053115451958692312,0.00056598234443677991,0.00060447304360067408,0.0006470118449330084,0.0006940244910553019,0.00074598150033144235,0.00080340287597362007,0.00086686331040925152,0.00093699793699595789,0.0010145086866496815,0.0011001713130052181,0.0011948431564193388,0.0012994717245212355,0.0014151041751873498,0.0015428977968493555,0.0016841315910257663,0.0018402190729990186,0.0020127224187515124,0.0022033680997479185,0.0024140641620418717,0.0026469193226422039,0.0029042640742615281,0.0031886740096706031,0.0035029955990964895,0.0038503746786532891,0.0042342879349273515,0.0046585777008251719,0.0051274904109325633,0.0056457191012592948,0.0062184503787208224,0.0068514163304436186,0.0075509518924197329,0.0083240582516754345,0.0091784729165041851,0.010122747156050264,0.011166331584284586,0.012319670744925777,0.013594307643944183,0.015002999275845466,0.01655984429995927,0.018280424144560631,0.02018195895104119,0.022283479918872091,0.024606019776245009,0.0271728232826851,0.030009579870417285,0.033144680752838405,0.036609503073323585,0.040438723938223134,0.044670667476998584,0.049347688402991349,0.054516595913629784,0.06022912217261029,0.066542440062778901,0.073519735391559968,0.081230839275753849,0.089752927034825097,0.099171290587439287,0.10958019208165193,0.1210838073021699,0.13379726829661875,0.14784781565577296,0.16337607198015452,0.18053744927828527,0.199503704382303,0.22046465794806722],"text":["Age:   0<br />qx: 0.0002100000","Age:   1<br />qx: 0.0002110517","Age:   2<br />qx: 0.0002122140","Age:   3<br />qx: 0.0002134986","Age:   4<br />qx: 0.0002149182","Age:   5<br />qx: 0.0002164872","Age:   6<br />qx: 0.0002182212","Age:   7<br />qx: 0.0002201375","Age:   8<br />qx: 0.0002222554","Age:   9<br />qx: 0.0002245960","Age:  10<br />qx: 0.0002271828","Age:  11<br />qx: 0.0002300417","Age:  12<br />qx: 0.0002332012","Age:  13<br />qx: 0.0002366930","Age:  14<br />qx: 0.0002405520","Age:  15<br />qx: 0.0002448169","Age:  16<br />qx: 0.0002495303","Age:  17<br />qx: 0.0002547395","Age:  18<br />qx: 0.0002604965","Age:  19<br />qx: 0.0002668589","Age:  20<br />qx: 0.0002738906","Age:  21<br />qx: 0.0002816617","Age:  22<br />qx: 0.0002902501","Age:  23<br />qx: 0.0002997418","Age:  24<br />qx: 0.0003102318","Age:  25<br />qx: 0.0003218249","Age:  26<br />qx: 0.0003346374","Age:  27<br />qx: 0.0003487973","Age:  28<br />qx: 0.0003644465","Age:  29<br />qx: 0.0003817415","Age:  30<br />qx: 0.0004008554","Age:  31<br />qx: 0.0004219795","Age:  32<br />qx: 0.0004453253","Age:  33<br />qx: 0.0004711264","Age:  34<br />qx: 0.0004996410","Age:  35<br />qx: 0.0005311545","Age:  36<br />qx: 0.0005659823","Age:  37<br />qx: 0.0006044730","Age:  38<br />qx: 0.0006470118","Age:  39<br />qx: 0.0006940245","Age:  40<br />qx: 0.0007459815","Age:  41<br />qx: 0.0008034029","Age:  42<br />qx: 0.0008668633","Age:  43<br />qx: 0.0009369979","Age:  44<br />qx: 0.0010145087","Age:  45<br />qx: 0.0011001713","Age:  46<br />qx: 0.0011948432","Age:  47<br />qx: 0.0012994717","Age:  48<br />qx: 0.0014151042","Age:  49<br />qx: 0.0015428978","Age:  50<br />qx: 0.0016841316","Age:  51<br />qx: 0.0018402191","Age:  52<br />qx: 0.0020127224","Age:  53<br />qx: 0.0022033681","Age:  54<br />qx: 0.0024140642","Age:  55<br />qx: 0.0026469193","Age:  56<br />qx: 0.0029042641","Age:  57<br />qx: 0.0031886740","Age:  58<br />qx: 0.0035029956","Age:  59<br />qx: 0.0038503747","Age:  60<br />qx: 0.0042342879","Age:  61<br />qx: 0.0046585777","Age:  62<br />qx: 0.0051274904","Age:  63<br />qx: 0.0056457191","Age:  64<br />qx: 0.0062184504","Age:  65<br />qx: 0.0068514163","Age:  66<br />qx: 0.0075509519","Age:  67<br />qx: 0.0083240583","Age:  68<br />qx: 0.0091784729","Age:  69<br />qx: 0.0101227472","Age:  70<br />qx: 0.0111663316","Age:  71<br />qx: 0.0123196707","Age:  72<br />qx: 0.0135943076","Age:  73<br />qx: 0.0150029993","Age:  74<br />qx: 0.0165598443","Age:  75<br />qx: 0.0182804241","Age:  76<br />qx: 0.0201819590","Age:  77<br />qx: 0.0222834799","Age:  78<br />qx: 0.0246060198","Age:  79<br />qx: 0.0271728233","Age:  80<br />qx: 0.0300095799","Age:  81<br />qx: 0.0331446808","Age:  82<br />qx: 0.0366095031","Age:  83<br />qx: 0.0404387239","Age:  84<br />qx: 0.0446706675","Age:  85<br />qx: 0.0493476884","Age:  86<br />qx: 0.0545165959","Age:  87<br />qx: 0.0602291222","Age:  88<br />qx: 0.0665424401","Age:  89<br />qx: 0.0735197354","Age:  90<br />qx: 0.0812308393","Age:  91<br />qx: 0.0897529270","Age:  92<br />qx: 0.0991712906","Age:  93<br />qx: 0.1095801921","Age:  94<br />qx: 0.1210838073","Age:  95<br />qx: 0.1337972683","Age:  96<br />qx: 0.1478478157","Age:  97<br />qx: 0.1633760720","Age:  98<br />qx: 0.1805374493","Age:  99<br />qx: 0.1995037044","Age: 100<br />qx: 0.2204646579"],"type":"scatter","mode":"lines","line":{"width":3.7795275590551185,"color":"rgba(52,152,219,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.762557077625573,"r":7.3059360730593621,"b":40.182648401826491,"l":48.949771689497723},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"<b> Mortality Rates by Age <\/b>","font":{"color":"rgba(0,0,0,1)","family":"","size":17.534246575342465},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-5,105],"tickmode":"array","ticktext":["0","25","50","75","100"],"tickvals":[0,24.999999999999996,50,75,100],"categoryorder":"array","categoryarray":["0","25","50","75","100"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"Age","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.010802732897403362,0.23147739084547059],"tickmode":"array","ticktext":["0.00","0.05","0.10","0.15","0.20"],"tickvals":[0,0.050000000000000003,0.10000000000000001,0.15000000000000002,0.20000000000000001],"categoryorder":"array","categoryarray":["0.00","0.05","0.10","0.15","0.20"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"Probability of Death (qx)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498}},"hovermode":"x unified","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"34b033917513":{"x":{},"y":{},"type":"scatter"}},"cur_data":"34b033917513","visdat":{"34b033917513":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section><section id="survival-curve" class="level3"><h3 class="anchored" data-anchor-id="survival-curve">Survival Curve</h3>
<p>The survival curve shows the number of survivors at each age from an initial population.</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">p2</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span><span class="va">mortality_table</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">Age</span>, y <span class="op">=</span> <span class="va">lx</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span>color <span class="op">=</span> <span class="st">"#2c3e50"</span>, size <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Survival Curve"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"Number of Survivors by Age (from 100,000 initial lives)"</span>,</span>
<span>    x <span class="op">=</span> <span class="st">"Age"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Number of Survivors (lx)"</span>,</span>
<span>    caption <span class="op">=</span> <span class="st">"Source: Simulated data"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_minimal</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span></span>
<span>    plot.title <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>face <span class="op">=</span> <span class="st">"bold"</span><span class="op">)</span>,</span>
<span>    plot.subtitle <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>color <span class="op">=</span> <span class="st">"gray50"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># Convert to interactive plot</span></span>
<span><span class="fu">ggplotly</span><span class="op">(</span><span class="va">p2</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/layout.html">layout</a></span><span class="op">(</span>hovermode <span class="op">=</span> <span class="st">"x unified"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-bc6761ca23fb7805aebb" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-bc6761ca23fb7805aebb">{"x":{"data":[{"x":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100],"y":[100000,99979,99957.899261167811,99936.686792776993,99915.350451249775,99893.876819284764,99872.251072325671,99850.456831048054,99828.475998403985,99806.288579612679,99783.872483317726,99761.203301947608,99738.254069112547,99714.994991646934,99691.393153660261,99667.412189687413,99643.011923730694,99618.147970656719,99592.771296050065,99566.827730227407,99540.257431679798,99512.994294730815,99484.965295672679,99456.089771065701,99426.278621255289,99395.433431469908,99363.445502108603,99330.194779003228,99295.548673542522,99259.360761569027,99221.469348899132,99181.695890167553,99139.843246455712,99095.693765824617,99049.007169434801,98999.518224396714,98946.934182854893,98890.931965071242,98831.155062441801,98767.210134467998,98698.663271721482,98625.035894813336,98545.800257332448,98460.374518694443,98368.117350894579,98268.322041352731,98160.210052465671,98042.923997251797,97915.519989727982,97776.959328574885,97626.099473444192,97461.684275212334,97282.333424922472,97086.531091489669,96872.613725967487,96638.757020888312,96382.962027613597,96103.040453625887,95796.599186281092,95461.024120923132,95093.463410849625,94690.81030603862,94249.68580867385,93766.421448456473,93237.042571828191,92657.252649136601,92022.419235202266,91327.562374533169,90567.346425344032,89736.076489059356,88827.700875984621,87835.821314133733,86753.712915933473,85574.356253299862,84290.484248400666,82894.646953278978,81379.297647659419,79736.904003069794,77960.088303924349,76041.800829360174,73975.530413326836,71755.555824931624,69377.240834871787,66837.374523308841,64134.556386205128,61269.622944092145,58246.10868247832,55070.729111894289,51753.867440079281,48310.038817930799,44758.297547280534,41122.543472961021,37431.67482914593,33719.527327490163,30024.535046041281,26389.05003018917,22858.267223207054,19478.722344579939,16296.365200730404,13354.260994883125,10690.036457115842],"text":["Age:   0<br />lx: 100000.00","Age:   1<br />lx:  99979.00","Age:   2<br />lx:  99957.90","Age:   3<br />lx:  99936.69","Age:   4<br />lx:  99915.35","Age:   5<br />lx:  99893.88","Age:   6<br />lx:  99872.25","Age:   7<br />lx:  99850.46","Age:   8<br />lx:  99828.48","Age:   9<br />lx:  99806.29","Age:  10<br />lx:  99783.87","Age:  11<br />lx:  99761.20","Age:  12<br />lx:  99738.25","Age:  13<br />lx:  99714.99","Age:  14<br />lx:  99691.39","Age:  15<br />lx:  99667.41","Age:  16<br />lx:  99643.01","Age:  17<br />lx:  99618.15","Age:  18<br />lx:  99592.77","Age:  19<br />lx:  99566.83","Age:  20<br />lx:  99540.26","Age:  21<br />lx:  99512.99","Age:  22<br />lx:  99484.97","Age:  23<br />lx:  99456.09","Age:  24<br />lx:  99426.28","Age:  25<br />lx:  99395.43","Age:  26<br />lx:  99363.45","Age:  27<br />lx:  99330.19","Age:  28<br />lx:  99295.55","Age:  29<br />lx:  99259.36","Age:  30<br />lx:  99221.47","Age:  31<br />lx:  99181.70","Age:  32<br />lx:  99139.84","Age:  33<br />lx:  99095.69","Age:  34<br />lx:  99049.01","Age:  35<br />lx:  98999.52","Age:  36<br />lx:  98946.93","Age:  37<br />lx:  98890.93","Age:  38<br />lx:  98831.16","Age:  39<br />lx:  98767.21","Age:  40<br />lx:  98698.66","Age:  41<br />lx:  98625.04","Age:  42<br />lx:  98545.80","Age:  43<br />lx:  98460.37","Age:  44<br />lx:  98368.12","Age:  45<br />lx:  98268.32","Age:  46<br />lx:  98160.21","Age:  47<br />lx:  98042.92","Age:  48<br />lx:  97915.52","Age:  49<br />lx:  97776.96","Age:  50<br />lx:  97626.10","Age:  51<br />lx:  97461.68","Age:  52<br />lx:  97282.33","Age:  53<br />lx:  97086.53","Age:  54<br />lx:  96872.61","Age:  55<br />lx:  96638.76","Age:  56<br />lx:  96382.96","Age:  57<br />lx:  96103.04","Age:  58<br />lx:  95796.60","Age:  59<br />lx:  95461.02","Age:  60<br />lx:  95093.46","Age:  61<br />lx:  94690.81","Age:  62<br />lx:  94249.69","Age:  63<br />lx:  93766.42","Age:  64<br />lx:  93237.04","Age:  65<br />lx:  92657.25","Age:  66<br />lx:  92022.42","Age:  67<br />lx:  91327.56","Age:  68<br />lx:  90567.35","Age:  69<br />lx:  89736.08","Age:  70<br />lx:  88827.70","Age:  71<br />lx:  87835.82","Age:  72<br />lx:  86753.71","Age:  73<br />lx:  85574.36","Age:  74<br />lx:  84290.48","Age:  75<br />lx:  82894.65","Age:  76<br />lx:  81379.30","Age:  77<br />lx:  79736.90","Age:  78<br />lx:  77960.09","Age:  79<br />lx:  76041.80","Age:  80<br />lx:  73975.53","Age:  81<br />lx:  71755.56","Age:  82<br />lx:  69377.24","Age:  83<br />lx:  66837.37","Age:  84<br />lx:  64134.56","Age:  85<br />lx:  61269.62","Age:  86<br />lx:  58246.11","Age:  87<br />lx:  55070.73","Age:  88<br />lx:  51753.87","Age:  89<br />lx:  48310.04","Age:  90<br />lx:  44758.30","Age:  91<br />lx:  41122.54","Age:  92<br />lx:  37431.67","Age:  93<br />lx:  33719.53","Age:  94<br />lx:  30024.54","Age:  95<br />lx:  26389.05","Age:  96<br />lx:  22858.27","Age:  97<br />lx:  19478.72","Age:  98<br />lx:  16296.37","Age:  99<br />lx:  13354.26","Age: 100<br />lx:  10690.04"],"type":"scatter","mode":"lines","line":{"width":3.7795275590551185,"color":"rgba(44,62,80,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.762557077625573,"r":7.3059360730593621,"b":40.182648401826491,"l":60.639269406392714},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"<b> Survival Curve <\/b>","font":{"color":"rgba(0,0,0,1)","family":"","size":17.534246575342465},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-5,105],"tickmode":"array","ticktext":["0","25","50","75","100"],"tickvals":[0,24.999999999999996,50,75,100],"categoryorder":"array","categoryarray":["0","25","50","75","100"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"Age","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[6224.5382799716344,104465.49817714421],"tickmode":"array","ticktext":["25000","50000","75000","100000"],"tickvals":[25000,50000,75000,100000],"categoryorder":"array","categoryarray":["25000","50000","75000","100000"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"Number of Survivors (lx)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498}},"hovermode":"x unified","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"34b019fb5fab":{"x":{},"y":{},"type":"scatter"}},"cur_data":"34b019fb5fab","visdat":{"34b019fb5fab":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section></section><section id="calculating-life-expectancy" class="level2"><h2 class="anchored" data-anchor-id="calculating-life-expectancy">Calculating Life Expectancy</h2>
<p>Life expectancy is a key metric derived from mortality tables. Let’s calculate and visualize life expectancy at different ages.</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Calculate temporary life expectancies</span></span>
<span><span class="va">calculate_ex</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">mortality_table</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">ages</span> <span class="op">&lt;-</span> <span class="va">mortality_table</span><span class="op">$</span><span class="va">Age</span></span>
<span>  <span class="va">lx</span> <span class="op">&lt;-</span> <span class="va">mortality_table</span><span class="op">$</span><span class="va">lx</span></span>
<span>  <span class="va">n</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">ages</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># Initialize ex vector</span></span>
<span>  <span class="va">ex</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">numeric</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="va">n</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="co"># Sum of lx+t for t &gt; 0</span></span>
<span>    <span class="va">future_lx_sum</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">lx</span><span class="op">[</span><span class="op">(</span><span class="va">i</span><span class="op">+</span><span class="fl">1</span><span class="op">)</span><span class="op">:</span><span class="va">n</span><span class="op">]</span><span class="op">)</span></span>
<span>    </span>
<span>    <span class="co"># Life expectancy formula: sum of lx+t / lx</span></span>
<span>    <span class="va">ex</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">future_lx_sum</span> <span class="op">/</span> <span class="va">lx</span><span class="op">[</span><span class="va">i</span><span class="op">]</span></span>
<span>  <span class="op">}</span></span>
<span>  </span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">ex</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Add life expectancy to the table</span></span>
<span><span class="va">mortality_table</span><span class="op">$</span><span class="va">ex</span> <span class="op">&lt;-</span> <span class="fu">calculate_ex</span><span class="op">(</span><span class="va">mortality_table</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Visualize life expectancy</span></span>
<span><span class="va">p3</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span><span class="va">mortality_table</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">Age</span>, y <span class="op">=</span> <span class="va">ex</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span>color <span class="op">=</span> <span class="st">"#e74c3c"</span>, size <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Life Expectancy by Age"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"Expected remaining years of life"</span>,</span>
<span>    x <span class="op">=</span> <span class="st">"Age"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Life Expectancy (ex)"</span>,</span>
<span>    caption <span class="op">=</span> <span class="st">"Source: Simulated data"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_minimal</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span></span>
<span>    plot.title <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>face <span class="op">=</span> <span class="st">"bold"</span><span class="op">)</span>,</span>
<span>    plot.subtitle <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>color <span class="op">=</span> <span class="st">"gray50"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># Convert to interactive plot</span></span>
<span><span class="fu">ggplotly</span><span class="op">(</span><span class="va">p3</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/layout.html">layout</a></span><span class="op">(</span>hovermode <span class="op">=</span> <span class="st">"x unified"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-9e3dc4a992096d647530" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-9e3dc4a992096d647530">{"x":{"data":[{"x":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100],"y":[85.050765734881281,84.06863014721219,83.086376720737917,82.104012557951037,81.121545391942817,80.13898364006819,79.156336461929627,78.173613821996412,77.19082655719464,76.20798644982311,75.225106306170531,74.242200041229836,73.259282769926415,72.276370905298265,71.293482264086705,70.310636180217486,69.327853626672194,68.345157346269573,67.362571991894413,66.380124276729589,65.39784313506054,64.415759894235521,63.433908458373217,62.452325504416578,61.471050691132184,60.490126881651364,59.509600380139346,58.529521183161577,57.549943246290937,56.570924766464934,55.592528480555337,54.614821980555114,53.637878045714061,52.661774991866622,51.686597038088756,50.712434690694558,49.73938514443509,48.767552700589455,47.797049201438988,46.827994480387183,45.860516826728436,44.894753463774677,43.930851038719133,42.968966122247139,42.009265715494266,41.051927761498668,40.097141657797088,39.145108766270177,38.196042915752315,37.250170892283613,36.307732911197746,35.368983064510175,34.434189736299182,33.503635977960464,32.577619834368974,31.656454611104987,30.740469072001396,29.830007555353621,28.925429996210756,28.027111841245119,27.135443841786202,26.250831709711363,25.37369562001512,24.50446954303294,23.643600388469924,22.791546942565276,21.948778578884376,21.115773722325297,20.293018044884896,19.48100237044488,18.680220264154293,17.891165279680731,17.114327834365763,16.350191677714008,15.599229912064299,14.861900514892358,14.138641298806915,13.429864226291016,12.735948969315411,12.057235565872356,11.394015971632298,10.746524228672433,10.114924864911718,9.4992989833089077,8.8996272778908398,8.3157688923746758,7.7474345677495338,7.1941518320313147,6.6552189493923475,6.1296427765178088,5.6160532616508467,5.1125835538753082,4.6166987027168496,4.124946235036675,3.6325858862912157,3.1330287420703975,2.6169693622523216,2.0710117398410568,1.4754392869718762,0.80049629561769697,null],"text":["Age:   0<br />ex: 85.0507657","Age:   1<br />ex: 84.0686301","Age:   2<br />ex: 83.0863767","Age:   3<br />ex: 82.1040126","Age:   4<br />ex: 81.1215454","Age:   5<br />ex: 80.1389836","Age:   6<br />ex: 79.1563365","Age:   7<br />ex: 78.1736138","Age:   8<br />ex: 77.1908266","Age:   9<br />ex: 76.2079864","Age:  10<br />ex: 75.2251063","Age:  11<br />ex: 74.2422000","Age:  12<br />ex: 73.2592828","Age:  13<br />ex: 72.2763709","Age:  14<br />ex: 71.2934823","Age:  15<br />ex: 70.3106362","Age:  16<br />ex: 69.3278536","Age:  17<br />ex: 68.3451573","Age:  18<br />ex: 67.3625720","Age:  19<br />ex: 66.3801243","Age:  20<br />ex: 65.3978431","Age:  21<br />ex: 64.4157599","Age:  22<br />ex: 63.4339085","Age:  23<br />ex: 62.4523255","Age:  24<br />ex: 61.4710507","Age:  25<br />ex: 60.4901269","Age:  26<br />ex: 59.5096004","Age:  27<br />ex: 58.5295212","Age:  28<br />ex: 57.5499432","Age:  29<br />ex: 56.5709248","Age:  30<br />ex: 55.5925285","Age:  31<br />ex: 54.6148220","Age:  32<br />ex: 53.6378780","Age:  33<br />ex: 52.6617750","Age:  34<br />ex: 51.6865970","Age:  35<br />ex: 50.7124347","Age:  36<br />ex: 49.7393851","Age:  37<br />ex: 48.7675527","Age:  38<br />ex: 47.7970492","Age:  39<br />ex: 46.8279945","Age:  40<br />ex: 45.8605168","Age:  41<br />ex: 44.8947535","Age:  42<br />ex: 43.9308510","Age:  43<br />ex: 42.9689661","Age:  44<br />ex: 42.0092657","Age:  45<br />ex: 41.0519278","Age:  46<br />ex: 40.0971417","Age:  47<br />ex: 39.1451088","Age:  48<br />ex: 38.1960429","Age:  49<br />ex: 37.2501709","Age:  50<br />ex: 36.3077329","Age:  51<br />ex: 35.3689831","Age:  52<br />ex: 34.4341897","Age:  53<br />ex: 33.5036360","Age:  54<br />ex: 32.5776198","Age:  55<br />ex: 31.6564546","Age:  56<br />ex: 30.7404691","Age:  57<br />ex: 29.8300076","Age:  58<br />ex: 28.9254300","Age:  59<br />ex: 28.0271118","Age:  60<br />ex: 27.1354438","Age:  61<br />ex: 26.2508317","Age:  62<br />ex: 25.3736956","Age:  63<br />ex: 24.5044695","Age:  64<br />ex: 23.6436004","Age:  65<br />ex: 22.7915469","Age:  66<br />ex: 21.9487786","Age:  67<br />ex: 21.1157737","Age:  68<br />ex: 20.2930180","Age:  69<br />ex: 19.4810024","Age:  70<br />ex: 18.6802203","Age:  71<br />ex: 17.8911653","Age:  72<br />ex: 17.1143278","Age:  73<br />ex: 16.3501917","Age:  74<br />ex: 15.5992299","Age:  75<br />ex: 14.8619005","Age:  76<br />ex: 14.1386413","Age:  77<br />ex: 13.4298642","Age:  78<br />ex: 12.7359490","Age:  79<br />ex: 12.0572356","Age:  80<br />ex: 11.3940160","Age:  81<br />ex: 10.7465242","Age:  82<br />ex: 10.1149249","Age:  83<br />ex:  9.4992990","Age:  84<br />ex:  8.8996273","Age:  85<br />ex:  8.3157689","Age:  86<br />ex:  7.7474346","Age:  87<br />ex:  7.1941518","Age:  88<br />ex:  6.6552189","Age:  89<br />ex:  6.1296428","Age:  90<br />ex:  5.6160533","Age:  91<br />ex:  5.1125836","Age:  92<br />ex:  4.6166987","Age:  93<br />ex:  4.1249462","Age:  94<br />ex:  3.6325859","Age:  95<br />ex:  3.1330287","Age:  96<br />ex:  2.6169694","Age:  97<br />ex:  2.0710117","Age:  98<br />ex:  1.4754393","Age:  99<br />ex:  0.8004963","Age: 100<br />ex:         NA"],"type":"scatter","mode":"lines","line":{"width":3.7795275590551185,"color":"rgba(231,76,60,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.762557077625573,"r":7.3059360730593621,"b":40.182648401826491,"l":37.260273972602747},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"<b> Life Expectancy by Age <\/b>","font":{"color":"rgba(0,0,0,1)","family":"","size":17.534246575342465},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-5,105],"tickmode":"array","ticktext":["0","25","50","75","100"],"tickvals":[0,24.999999999999996,50,75,100],"categoryorder":"array","categoryarray":["0","25","50","75","100"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"Age","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-3.4120171763454832,89.263279206844459],"tickmode":"array","ticktext":["0","20","40","60","80"],"tickvals":[-4.4408920985006262e-16,20,40,60.000000000000007,80],"categoryorder":"array","categoryarray":["0","20","40","60","80"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"Life Expectancy (ex)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498}},"hovermode":"x unified","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"34b04bbb4d5":{"x":{},"y":{},"type":"scatter"}},"cur_data":"34b04bbb4d5","visdat":{"34b04bbb4d5":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section><section id="actuarial-present-values" class="level2"><h2 class="anchored" data-anchor-id="actuarial-present-values">Actuarial Present Values</h2>
<p>Now let’s calculate some actuarial present values, which are essential for insurance and annuity pricing.</p>
<section id="present-value-of-life-annuity" class="level3"><h3 class="anchored" data-anchor-id="present-value-of-life-annuity">Present Value of Life Annuity</h3>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Set interest rate</span></span>
<span><span class="va">interest_rate</span> <span class="op">&lt;-</span> <span class="fl">0.03</span></span>
<span></span>
<span><span class="co"># Calculate discount factor</span></span>
<span><span class="va">v</span> <span class="op">&lt;-</span> <span class="fl">1</span> <span class="op">/</span> <span class="op">(</span><span class="fl">1</span> <span class="op">+</span> <span class="va">interest_rate</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Calculate annuity values</span></span>
<span><span class="va">calculate_annuity</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">mortality_table</span>, <span class="va">interest_rate</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">ages</span> <span class="op">&lt;-</span> <span class="va">mortality_table</span><span class="op">$</span><span class="va">Age</span></span>
<span>  <span class="va">lx</span> <span class="op">&lt;-</span> <span class="va">mortality_table</span><span class="op">$</span><span class="va">lx</span></span>
<span>  <span class="va">n</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">ages</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># Initialize annuity value vector</span></span>
<span>  <span class="va">ax</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">numeric</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="va">n</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="co"># Sum of v^t * lx+t / lx for t &gt; 0</span></span>
<span>    <span class="va">pv_sum</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span>    <span class="kw">for</span> <span class="op">(</span><span class="va">t</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="op">(</span><span class="va">n</span><span class="op">-</span><span class="va">i</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">pv_sum</span> <span class="op">&lt;-</span> <span class="va">pv_sum</span> <span class="op">+</span> <span class="op">(</span><span class="fl">1</span> <span class="op">/</span> <span class="op">(</span><span class="fl">1</span> <span class="op">+</span> <span class="va">interest_rate</span><span class="op">)</span><span class="op">)</span><span class="op">^</span><span class="va">t</span> <span class="op">*</span> <span class="va">lx</span><span class="op">[</span><span class="va">i</span><span class="op">+</span><span class="va">t</span><span class="op">]</span> <span class="op">/</span> <span class="va">lx</span><span class="op">[</span><span class="va">i</span><span class="op">]</span></span>
<span>    <span class="op">}</span></span>
<span>    </span>
<span>    <span class="va">ax</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">pv_sum</span></span>
<span>  <span class="op">}</span></span>
<span>  </span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">ax</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Add annuity values to the table</span></span>
<span><span class="va">mortality_table</span><span class="op">$</span><span class="va">ax</span> <span class="op">&lt;-</span> <span class="fu">calculate_annuity</span><span class="op">(</span><span class="va">mortality_table</span>, <span class="va">interest_rate</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Display annuity values for selected ages</span></span>
<span><span class="va">selected_ages</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">20</span>, <span class="fl">30</span>, <span class="fl">40</span>, <span class="fl">50</span>, <span class="fl">60</span>, <span class="fl">65</span>, <span class="fl">70</span>, <span class="fl">80</span>, <span class="fl">90</span><span class="op">)</span></span>
<span><span class="va">annuity_table</span> <span class="op">&lt;-</span> <span class="va">mortality_table</span><span class="op">[</span><span class="va">mortality_table</span><span class="op">$</span><span class="va">Age</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="va">selected_ages</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Age"</span>, <span class="st">"ax"</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="fu">kable</span><span class="op">(</span><span class="va">annuity_table</span>, </span>
<span>      caption <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"Present Value of Life Annuity (Interest Rate = "</span>, <span class="va">interest_rate</span><span class="op">*</span><span class="fl">100</span>, <span class="st">"%)"</span><span class="op">)</span>,</span>
<span>      col.names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Age"</span>, <span class="st">"Annuity Value (ax)"</span><span class="op">)</span>,</span>
<span>      digits <span class="op">=</span> <span class="fl">4</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">kable_styling</span><span class="op">(</span>bootstrap_options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"striped"</span>, <span class="st">"hover"</span>, <span class="st">"condensed"</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<caption>Present Value of Life Annuity (Interest Rate = 3%)</caption>
<thead><tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Age</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Annuity Value (ax)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">21</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">28.0730</td>
</tr>
<tr class="even">
<td style="text-align: left;">31</td>
<td style="text-align: right;">30</td>
<td style="text-align: right;">26.3664</td>
</tr>
<tr class="odd">
<td style="text-align: left;">41</td>
<td style="text-align: right;">40</td>
<td style="text-align: right;">24.1263</td>
</tr>
<tr class="even">
<td style="text-align: left;">51</td>
<td style="text-align: right;">50</td>
<td style="text-align: right;">21.2479</td>
</tr>
<tr class="odd">
<td style="text-align: left;">61</td>
<td style="text-align: right;">60</td>
<td style="text-align: right;">17.6848</td>
</tr>
<tr class="even">
<td style="text-align: left;">66</td>
<td style="text-align: right;">65</td>
<td style="text-align: right;">15.6688</td>
</tr>
<tr class="odd">
<td style="text-align: left;">71</td>
<td style="text-align: right;">70</td>
<td style="text-align: right;">13.5359</td>
</tr>
<tr class="even">
<td style="text-align: left;">81</td>
<td style="text-align: right;">80</td>
<td style="text-align: right;">9.1334</td>
</tr>
<tr class="odd">
<td style="text-align: left;">91</td>
<td style="text-align: right;">90</td>
<td style="text-align: right;">4.9497</td>
</tr>
</tbody>
</table>
</div>
</div>
</section><section id="term-life-insurance-values" class="level3"><h3 class="anchored" data-anchor-id="term-life-insurance-values">Term Life Insurance Values</h3>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb6"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Calculate term life insurance values</span></span>
<span><span class="va">calculate_term_insurance</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">mortality_table</span>, <span class="va">interest_rate</span>, <span class="va">term</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">ages</span> <span class="op">&lt;-</span> <span class="va">mortality_table</span><span class="op">$</span><span class="va">Age</span></span>
<span>  <span class="va">qx</span> <span class="op">&lt;-</span> <span class="va">mortality_table</span><span class="op">$</span><span class="va">qx</span></span>
<span>  <span class="va">px</span> <span class="op">&lt;-</span> <span class="va">mortality_table</span><span class="op">$</span><span class="va">px</span></span>
<span>  <span class="va">n</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">ages</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># Initialize insurance value vector</span></span>
<span>  <span class="va">Ax</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">numeric</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="op">(</span><span class="va">n</span><span class="op">-</span><span class="va">term</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="co"># Calculate term insurance value</span></span>
<span>    <span class="va">value</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span>    <span class="va">cum_prob</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span>    </span>
<span>    <span class="kw">for</span> <span class="op">(</span><span class="va">t</span> <span class="kw">in</span> <span class="fl">0</span><span class="op">:</span><span class="op">(</span><span class="va">term</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="kw">if</span> <span class="op">(</span><span class="va">i</span><span class="op">+</span><span class="va">t</span> <span class="op">&lt;=</span> <span class="va">n</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="co"># Probability of death in year t</span></span>
<span>        <span class="va">death_prob</span> <span class="op">&lt;-</span> <span class="va">cum_prob</span> <span class="op">*</span> <span class="va">qx</span><span class="op">[</span><span class="va">i</span><span class="op">+</span><span class="va">t</span><span class="op">]</span></span>
<span>        </span>
<span>        <span class="co"># Present value of benefit</span></span>
<span>        <span class="va">pv_benefit</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="fl">1</span> <span class="op">/</span> <span class="op">(</span><span class="fl">1</span> <span class="op">+</span> <span class="va">interest_rate</span><span class="op">)</span><span class="op">)</span><span class="op">^</span><span class="op">(</span><span class="va">t</span><span class="op">+</span><span class="fl">1</span><span class="op">)</span> <span class="op">*</span> <span class="va">death_prob</span></span>
<span>        </span>
<span>        <span class="va">value</span> <span class="op">&lt;-</span> <span class="va">value</span> <span class="op">+</span> <span class="va">pv_benefit</span></span>
<span>        </span>
<span>        <span class="co"># Update cumulative survival probability</span></span>
<span>        <span class="va">cum_prob</span> <span class="op">&lt;-</span> <span class="va">cum_prob</span> <span class="op">*</span> <span class="va">px</span><span class="op">[</span><span class="va">i</span><span class="op">+</span><span class="va">t</span><span class="op">]</span></span>
<span>      <span class="op">}</span></span>
<span>    <span class="op">}</span></span>
<span>    </span>
<span>    <span class="va">Ax</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">value</span></span>
<span>  <span class="op">}</span></span>
<span>  </span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">Ax</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Calculate 10-year term insurance values</span></span>
<span><span class="va">term</span> <span class="op">&lt;-</span> <span class="fl">10</span></span>
<span><span class="va">mortality_table</span><span class="op">$</span><span class="va">A10x</span> <span class="op">&lt;-</span> <span class="fu">calculate_term_insurance</span><span class="op">(</span><span class="va">mortality_table</span>, <span class="va">interest_rate</span>, <span class="va">term</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Display insurance values for selected ages</span></span>
<span><span class="va">insurance_table</span> <span class="op">&lt;-</span> <span class="va">mortality_table</span><span class="op">[</span><span class="va">mortality_table</span><span class="op">$</span><span class="va">Age</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="va">selected_ages</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Age"</span>, <span class="st">"A10x"</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="fu">kable</span><span class="op">(</span><span class="va">insurance_table</span>, </span>
<span>      caption <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="va">term</span>, <span class="st">"-Year Term Life Insurance Values (Interest Rate = "</span>, <span class="va">interest_rate</span><span class="op">*</span><span class="fl">100</span>, <span class="st">"%)"</span><span class="op">)</span>,</span>
<span>      col.names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Age"</span>, <span class="st">"Insurance Value (A10x)"</span><span class="op">)</span>,</span>
<span>      digits <span class="op">=</span> <span class="fl">4</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">kable_styling</span><span class="op">(</span>bootstrap_options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"striped"</span>, <span class="st">"hover"</span>, <span class="st">"condensed"</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<caption>10-Year Term Life Insurance Values (Interest Rate = 3%)</caption>
<thead><tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Age</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Insurance Value (A10x)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">21</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">0.0027</td>
</tr>
<tr class="even">
<td style="text-align: left;">31</td>
<td style="text-align: right;">30</td>
<td style="text-align: right;">0.0044</td>
</tr>
<tr class="odd">
<td style="text-align: left;">41</td>
<td style="text-align: right;">40</td>
<td style="text-align: right;">0.0091</td>
</tr>
<tr class="even">
<td style="text-align: left;">51</td>
<td style="text-align: right;">50</td>
<td style="text-align: right;">0.0217</td>
</tr>
<tr class="odd">
<td style="text-align: left;">61</td>
<td style="text-align: right;">60</td>
<td style="text-align: right;">0.0550</td>
</tr>
<tr class="even">
<td style="text-align: left;">66</td>
<td style="text-align: right;">65</td>
<td style="text-align: right;">0.0880</td>
</tr>
<tr class="odd">
<td style="text-align: left;">71</td>
<td style="text-align: right;">70</td>
<td style="text-align: right;">0.1398</td>
</tr>
<tr class="even">
<td style="text-align: left;">81</td>
<td style="text-align: right;">80</td>
<td style="text-align: right;">0.3327</td>
</tr>
<tr class="odd">
<td style="text-align: left;">91</td>
<td style="text-align: right;">90</td>
<td style="text-align: right;">0.6542</td>
</tr>
</tbody>
</table>
</div>
</div>
</section></section><section id="comparing-different-mortality-tables" class="level2"><h2 class="anchored" data-anchor-id="comparing-different-mortality-tables">Comparing Different Mortality Tables</h2>
<p>In practice, actuaries often need to compare different mortality tables. Let’s create a second table using a different mortality law and compare them.</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Create a second mortality table using Weibull distribution</span></span>
<span><span class="va">shape</span> <span class="op">&lt;-</span> <span class="fl">2.5</span></span>
<span><span class="va">scale</span> <span class="op">&lt;-</span> <span class="fl">80</span></span>
<span></span>
<span><span class="co"># Calculate mortality rates using Weibull</span></span>
<span><span class="va">qx_weibull</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Weibull.html">pweibull</a></span><span class="op">(</span><span class="va">ages</span><span class="op">+</span><span class="fl">1</span>, <span class="va">shape</span>, <span class="va">scale</span><span class="op">)</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Weibull.html">pweibull</a></span><span class="op">(</span><span class="va">ages</span>, <span class="va">shape</span>, <span class="va">scale</span><span class="op">)</span></span>
<span><span class="va">qx_weibull</span> <span class="op">&lt;-</span> <span class="va">qx_weibull</span> <span class="op">/</span> <span class="op">(</span><span class="fl">1</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Weibull.html">pweibull</a></span><span class="op">(</span><span class="va">ages</span>, <span class="va">shape</span>, <span class="va">scale</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">qx_weibull</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/is.finite.html">is.nan</a></span><span class="op">(</span><span class="va">qx_weibull</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span></span>
<span><span class="co"># Calculate survival probabilities</span></span>
<span><span class="va">px_weibull</span> <span class="op">&lt;-</span> <span class="fl">1</span> <span class="op">-</span> <span class="va">qx_weibull</span></span>
<span></span>
<span><span class="co"># Calculate number of survivors</span></span>
<span><span class="va">lx_weibull</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">ages</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">lx_weibull</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">100000</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">2</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">ages</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">lx_weibull</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">lx_weibull</span><span class="op">[</span><span class="va">i</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span> <span class="op">*</span> <span class="va">px_weibull</span><span class="op">[</span><span class="va">i</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Create comparison data frame</span></span>
<span><span class="va">comparison_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span></span>
<span>  Age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="va">ages</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>  qx <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">qx</span>, <span class="va">qx_weibull</span><span class="op">)</span>,</span>
<span>  Model <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Gompertz-Makeham"</span>, <span class="st">"Weibull"</span><span class="op">)</span>, each <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">ages</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create comparison plot</span></span>
<span><span class="va">p4</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span><span class="va">comparison_data</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">Age</span>, y <span class="op">=</span> <span class="va">qx</span>, color <span class="op">=</span> <span class="va">Model</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span>size <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_color_manual</span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"#3498db"</span>, <span class="st">"#e74c3c"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Comparison of Mortality Models"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"Gompertz-Makeham vs. Weibull"</span>,</span>
<span>    x <span class="op">=</span> <span class="st">"Age"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Probability of Death (qx)"</span>,</span>
<span>    caption <span class="op">=</span> <span class="st">"Source: Simulated data"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_minimal</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span></span>
<span>    plot.title <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>face <span class="op">=</span> <span class="st">"bold"</span><span class="op">)</span>,</span>
<span>    plot.subtitle <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>color <span class="op">=</span> <span class="st">"gray50"</span><span class="op">)</span>,</span>
<span>    legend.position <span class="op">=</span> <span class="st">"bottom"</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># Convert to interactive plot</span></span>
<span><span class="fu">ggplotly</span><span class="op">(</span><span class="va">p4</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/layout.html">layout</a></span><span class="op">(</span>hovermode <span class="op">=</span> <span class="st">"x unified"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-8691c44d270b41c0fd73" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-8691c44d270b41c0fd73">{"x":{"data":[{"x":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100],"y":[0.00021000000000000001,0.00021105170918075649,0.0002122140275816017,0.00021349858807576005,0.00021491824697641271,0.00021648721270700128,0.00021822118800390511,0.00022013752707470479,0.0002222554092849247,0.00022459603111156951,0.00022718281828459046,0.00023004166023946434,0.00023320116922736548,0.00023669296667619245,0.00024055199966844677,0.00024481689070338065,0.00024953032424395116,0.00025473947391727205,0.00026049647464412948,0.00026685894442279271,0.00027389056098930649,0.00028166169912567651,0.00029025013499434126,0.00029974182454814728,0.00031023176380641607,0.00032182493960703477,0.00033463738035001693,0.0003487973172487284,0.00036444646771097058,0.00038174145369443066,0.00040085536923187672,0.00042197951281441643,0.00044532530197109353,0.00047112638920657895,0.00049964100047397025,0.00053115451958692312,0.00056598234443677991,0.00060447304360067408,0.0006470118449330084,0.0006940244910553019,0.00074598150033144235,0.00080340287597362007,0.00086686331040925152,0.00093699793699595789,0.0010145086866496815,0.0011001713130052181,0.0011948431564193388,0.0012994717245212355,0.0014151041751873498,0.0015428977968493555,0.0016841315910257663,0.0018402190729990186,0.0020127224187515124,0.0022033680997479185,0.0024140641620418717,0.0026469193226422039,0.0029042640742615281,0.0031886740096706031,0.0035029955990964895,0.0038503746786532891,0.0042342879349273515,0.0046585777008251719,0.0051274904109325633,0.0056457191012592948,0.0062184503787208224,0.0068514163304436186,0.0075509518924197329,0.0083240582516754345,0.0091784729165041851,0.010122747156050264,0.011166331584284586,0.012319670744925777,0.013594307643944183,0.015002999275845466,0.01655984429995927,0.018280424144560631,0.02018195895104119,0.022283479918872091,0.024606019776245009,0.0271728232826851,0.030009579870417285,0.033144680752838405,0.036609503073323585,0.040438723938223134,0.044670667476998584,0.049347688402991349,0.054516595913629784,0.06022912217261029,0.066542440062778901,0.073519735391559968,0.081230839275753849,0.089752927034825097,0.099171290587439287,0.10958019208165193,0.1210838073021699,0.13379726829661875,0.14784781565577296,0.16337607198015452,0.18053744927828527,0.199503704382303,0.22046465794806722],"text":["Age:   0<br />qx: 2.100000e-04<br />Model: Gompertz-Makeham","Age:   1<br />qx: 2.110517e-04<br />Model: Gompertz-Makeham","Age:   2<br />qx: 2.122140e-04<br />Model: Gompertz-Makeham","Age:   3<br />qx: 2.134986e-04<br />Model: Gompertz-Makeham","Age:   4<br />qx: 2.149182e-04<br />Model: Gompertz-Makeham","Age:   5<br />qx: 2.164872e-04<br />Model: Gompertz-Makeham","Age:   6<br />qx: 2.182212e-04<br />Model: Gompertz-Makeham","Age:   7<br />qx: 2.201375e-04<br />Model: Gompertz-Makeham","Age:   8<br />qx: 2.222554e-04<br />Model: Gompertz-Makeham","Age:   9<br />qx: 2.245960e-04<br />Model: Gompertz-Makeham","Age:  10<br />qx: 2.271828e-04<br />Model: Gompertz-Makeham","Age:  11<br />qx: 2.300417e-04<br />Model: Gompertz-Makeham","Age:  12<br />qx: 2.332012e-04<br />Model: Gompertz-Makeham","Age:  13<br />qx: 2.366930e-04<br />Model: Gompertz-Makeham","Age:  14<br />qx: 2.405520e-04<br />Model: Gompertz-Makeham","Age:  15<br />qx: 2.448169e-04<br />Model: Gompertz-Makeham","Age:  16<br />qx: 2.495303e-04<br />Model: Gompertz-Makeham","Age:  17<br />qx: 2.547395e-04<br />Model: Gompertz-Makeham","Age:  18<br />qx: 2.604965e-04<br />Model: Gompertz-Makeham","Age:  19<br />qx: 2.668589e-04<br />Model: Gompertz-Makeham","Age:  20<br />qx: 2.738906e-04<br />Model: Gompertz-Makeham","Age:  21<br />qx: 2.816617e-04<br />Model: Gompertz-Makeham","Age:  22<br />qx: 2.902501e-04<br />Model: Gompertz-Makeham","Age:  23<br />qx: 2.997418e-04<br />Model: Gompertz-Makeham","Age:  24<br />qx: 3.102318e-04<br />Model: Gompertz-Makeham","Age:  25<br />qx: 3.218249e-04<br />Model: Gompertz-Makeham","Age:  26<br />qx: 3.346374e-04<br />Model: Gompertz-Makeham","Age:  27<br />qx: 3.487973e-04<br />Model: Gompertz-Makeham","Age:  28<br />qx: 3.644465e-04<br />Model: Gompertz-Makeham","Age:  29<br />qx: 3.817415e-04<br />Model: Gompertz-Makeham","Age:  30<br />qx: 4.008554e-04<br />Model: Gompertz-Makeham","Age:  31<br />qx: 4.219795e-04<br />Model: Gompertz-Makeham","Age:  32<br />qx: 4.453253e-04<br />Model: Gompertz-Makeham","Age:  33<br />qx: 4.711264e-04<br />Model: Gompertz-Makeham","Age:  34<br />qx: 4.996410e-04<br />Model: Gompertz-Makeham","Age:  35<br />qx: 5.311545e-04<br />Model: Gompertz-Makeham","Age:  36<br />qx: 5.659823e-04<br />Model: Gompertz-Makeham","Age:  37<br />qx: 6.044730e-04<br />Model: Gompertz-Makeham","Age:  38<br />qx: 6.470118e-04<br />Model: Gompertz-Makeham","Age:  39<br />qx: 6.940245e-04<br />Model: Gompertz-Makeham","Age:  40<br />qx: 7.459815e-04<br />Model: Gompertz-Makeham","Age:  41<br />qx: 8.034029e-04<br />Model: Gompertz-Makeham","Age:  42<br />qx: 8.668633e-04<br />Model: Gompertz-Makeham","Age:  43<br />qx: 9.369979e-04<br />Model: Gompertz-Makeham","Age:  44<br />qx: 1.014509e-03<br />Model: Gompertz-Makeham","Age:  45<br />qx: 1.100171e-03<br />Model: Gompertz-Makeham","Age:  46<br />qx: 1.194843e-03<br />Model: Gompertz-Makeham","Age:  47<br />qx: 1.299472e-03<br />Model: Gompertz-Makeham","Age:  48<br />qx: 1.415104e-03<br />Model: Gompertz-Makeham","Age:  49<br />qx: 1.542898e-03<br />Model: Gompertz-Makeham","Age:  50<br />qx: 1.684132e-03<br />Model: Gompertz-Makeham","Age:  51<br />qx: 1.840219e-03<br />Model: Gompertz-Makeham","Age:  52<br />qx: 2.012722e-03<br />Model: Gompertz-Makeham","Age:  53<br />qx: 2.203368e-03<br />Model: Gompertz-Makeham","Age:  54<br />qx: 2.414064e-03<br />Model: Gompertz-Makeham","Age:  55<br />qx: 2.646919e-03<br />Model: Gompertz-Makeham","Age:  56<br />qx: 2.904264e-03<br />Model: Gompertz-Makeham","Age:  57<br />qx: 3.188674e-03<br />Model: Gompertz-Makeham","Age:  58<br />qx: 3.502996e-03<br />Model: Gompertz-Makeham","Age:  59<br />qx: 3.850375e-03<br />Model: Gompertz-Makeham","Age:  60<br />qx: 4.234288e-03<br />Model: Gompertz-Makeham","Age:  61<br />qx: 4.658578e-03<br />Model: Gompertz-Makeham","Age:  62<br />qx: 5.127490e-03<br />Model: Gompertz-Makeham","Age:  63<br />qx: 5.645719e-03<br />Model: Gompertz-Makeham","Age:  64<br />qx: 6.218450e-03<br />Model: Gompertz-Makeham","Age:  65<br />qx: 6.851416e-03<br />Model: Gompertz-Makeham","Age:  66<br />qx: 7.550952e-03<br />Model: Gompertz-Makeham","Age:  67<br />qx: 8.324058e-03<br />Model: Gompertz-Makeham","Age:  68<br />qx: 9.178473e-03<br />Model: Gompertz-Makeham","Age:  69<br />qx: 1.012275e-02<br />Model: Gompertz-Makeham","Age:  70<br />qx: 1.116633e-02<br />Model: Gompertz-Makeham","Age:  71<br />qx: 1.231967e-02<br />Model: Gompertz-Makeham","Age:  72<br />qx: 1.359431e-02<br />Model: Gompertz-Makeham","Age:  73<br />qx: 1.500300e-02<br />Model: Gompertz-Makeham","Age:  74<br />qx: 1.655984e-02<br />Model: Gompertz-Makeham","Age:  75<br />qx: 1.828042e-02<br />Model: Gompertz-Makeham","Age:  76<br />qx: 2.018196e-02<br />Model: Gompertz-Makeham","Age:  77<br />qx: 2.228348e-02<br />Model: Gompertz-Makeham","Age:  78<br />qx: 2.460602e-02<br />Model: Gompertz-Makeham","Age:  79<br />qx: 2.717282e-02<br />Model: Gompertz-Makeham","Age:  80<br />qx: 3.000958e-02<br />Model: Gompertz-Makeham","Age:  81<br />qx: 3.314468e-02<br />Model: Gompertz-Makeham","Age:  82<br />qx: 3.660950e-02<br />Model: Gompertz-Makeham","Age:  83<br />qx: 4.043872e-02<br />Model: Gompertz-Makeham","Age:  84<br />qx: 4.467067e-02<br />Model: Gompertz-Makeham","Age:  85<br />qx: 4.934769e-02<br />Model: Gompertz-Makeham","Age:  86<br />qx: 5.451660e-02<br />Model: Gompertz-Makeham","Age:  87<br />qx: 6.022912e-02<br />Model: Gompertz-Makeham","Age:  88<br />qx: 6.654244e-02<br />Model: Gompertz-Makeham","Age:  89<br />qx: 7.351974e-02<br />Model: Gompertz-Makeham","Age:  90<br />qx: 8.123084e-02<br />Model: Gompertz-Makeham","Age:  91<br />qx: 8.975293e-02<br />Model: Gompertz-Makeham","Age:  92<br />qx: 9.917129e-02<br />Model: Gompertz-Makeham","Age:  93<br />qx: 1.095802e-01<br />Model: Gompertz-Makeham","Age:  94<br />qx: 1.210838e-01<br />Model: Gompertz-Makeham","Age:  95<br />qx: 1.337973e-01<br />Model: Gompertz-Makeham","Age:  96<br />qx: 1.478478e-01<br />Model: Gompertz-Makeham","Age:  97<br />qx: 1.633761e-01<br />Model: Gompertz-Makeham","Age:  98<br />qx: 1.805374e-01<br />Model: Gompertz-Makeham","Age:  99<br />qx: 1.995037e-01<br />Model: Gompertz-Makeham","Age: 100<br />qx: 2.204647e-01<br />Model: Gompertz-Makeham"],"type":"scatter","mode":"lines","line":{"width":3.7795275590551185,"color":"rgba(52,152,219,1)","dash":"solid"},"hoveron":"points","name":"Gompertz-Makeham","legendgroup":"Gompertz-Makeham","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100],"y":[1.7469128487215013e-05,8.1348586830300249e-05,0.00017348291474846662,0.00028665675894259734,0.00041745834563192846,0.0005637482272041834,0.00072401737182820351,0.00089712571008939833,0.0010821716703190605,0.0012784185528557177,0.0014852493281749832,0.0017021371153023194,0.0019286249625124346,0.0021643114660587397,0.002408840221448071,0.0026618918852227987,0.0029231780705140519,0.0031924365648777135,0.0034694275232823382,0.0037539303944530205,0.0040457414082814089,0.004344671499063201,0.0046505445718977223,0.0049631960425924725,0.0052824715979597706,0.0056082261354839878,0.0059403228503021955,0.0062786324441801138,0.0066230324362889512,0.006973406559531028,0.0073296442292264778,0.0076916400733750036,0.008059293515610402,0.0084325084034834151,0.0088111926759271934,0.0091952580647512439,0.0095846198258126482,0.0099791964961755842,0.010378909674116503,0.010783683819282269,0.011193446070690371,0.011608126080573071,0.01202765586233347,0.012451969651113804,0.012881003775656453,0.013314696540313182,0.013752988116189585,0.014195820440535672,0.014643137123598866,0.015094883362237785,0.015551005859685343,0.016011452750904209,0.016476173533045178,0.016945119000572013,0.01741824118465107,0.017895493296459689,0.018376829674087061,0.018862205732743879,0.01935157791802148,0.019844903661959182,0.020342141341714075,0.020843250240632508,0.0213481905115478,0.021856923142148703,0.022369409922262207,0.022885613412924059,0.023405496917109768,0.023929024452013496,0.024456160722774452,0.024986871097548349,0.025521121583847256,0.02605887880605285,0.026600109984041977,0.02714478291284746,0.027692865943289808,0.028244327963531508,0.028799138381479732,0.029357267108007089,0.029918684540933105,0.030483361549717227,0.03105126946084023,0.031622380043810988,0.032196665497792508,0.032774098438783442,0.033354651887351844,0.033938299256875103,0.034525014342259214,0.035114771309126158,0.035707544683427614,0.036303309341481738,0.036902040500387444,0.037503713708824889,0.038108304838206493,0.038715790074153732,0.039326145908315513,0.039939349130472597,0.040555376820938904,0.041174206343249455,0.041795815337091369,0.042420181711515369,0.04304728363836139],"text":["Age:   0<br />qx: 1.746913e-05<br />Model: Weibull","Age:   1<br />qx: 8.134859e-05<br />Model: Weibull","Age:   2<br />qx: 1.734829e-04<br />Model: Weibull","Age:   3<br />qx: 2.866568e-04<br />Model: Weibull","Age:   4<br />qx: 4.174583e-04<br />Model: Weibull","Age:   5<br />qx: 5.637482e-04<br />Model: Weibull","Age:   6<br />qx: 7.240174e-04<br />Model: Weibull","Age:   7<br />qx: 8.971257e-04<br />Model: Weibull","Age:   8<br />qx: 1.082172e-03<br />Model: Weibull","Age:   9<br />qx: 1.278419e-03<br />Model: Weibull","Age:  10<br />qx: 1.485249e-03<br />Model: Weibull","Age:  11<br />qx: 1.702137e-03<br />Model: Weibull","Age:  12<br />qx: 1.928625e-03<br />Model: Weibull","Age:  13<br />qx: 2.164311e-03<br />Model: Weibull","Age:  14<br />qx: 2.408840e-03<br />Model: Weibull","Age:  15<br />qx: 2.661892e-03<br />Model: Weibull","Age:  16<br />qx: 2.923178e-03<br />Model: Weibull","Age:  17<br />qx: 3.192437e-03<br />Model: Weibull","Age:  18<br />qx: 3.469428e-03<br />Model: Weibull","Age:  19<br />qx: 3.753930e-03<br />Model: Weibull","Age:  20<br />qx: 4.045741e-03<br />Model: Weibull","Age:  21<br />qx: 4.344671e-03<br />Model: Weibull","Age:  22<br />qx: 4.650545e-03<br />Model: Weibull","Age:  23<br />qx: 4.963196e-03<br />Model: Weibull","Age:  24<br />qx: 5.282472e-03<br />Model: Weibull","Age:  25<br />qx: 5.608226e-03<br />Model: Weibull","Age:  26<br />qx: 5.940323e-03<br />Model: Weibull","Age:  27<br />qx: 6.278632e-03<br />Model: Weibull","Age:  28<br />qx: 6.623032e-03<br />Model: Weibull","Age:  29<br />qx: 6.973407e-03<br />Model: Weibull","Age:  30<br />qx: 7.329644e-03<br />Model: Weibull","Age:  31<br />qx: 7.691640e-03<br />Model: Weibull","Age:  32<br />qx: 8.059294e-03<br />Model: Weibull","Age:  33<br />qx: 8.432508e-03<br />Model: Weibull","Age:  34<br />qx: 8.811193e-03<br />Model: Weibull","Age:  35<br />qx: 9.195258e-03<br />Model: Weibull","Age:  36<br />qx: 9.584620e-03<br />Model: Weibull","Age:  37<br />qx: 9.979196e-03<br />Model: Weibull","Age:  38<br />qx: 1.037891e-02<br />Model: Weibull","Age:  39<br />qx: 1.078368e-02<br />Model: Weibull","Age:  40<br />qx: 1.119345e-02<br />Model: Weibull","Age:  41<br />qx: 1.160813e-02<br />Model: Weibull","Age:  42<br />qx: 1.202766e-02<br />Model: Weibull","Age:  43<br />qx: 1.245197e-02<br />Model: Weibull","Age:  44<br />qx: 1.288100e-02<br />Model: Weibull","Age:  45<br />qx: 1.331470e-02<br />Model: Weibull","Age:  46<br />qx: 1.375299e-02<br />Model: Weibull","Age:  47<br />qx: 1.419582e-02<br />Model: Weibull","Age:  48<br />qx: 1.464314e-02<br />Model: Weibull","Age:  49<br />qx: 1.509488e-02<br />Model: Weibull","Age:  50<br />qx: 1.555101e-02<br />Model: Weibull","Age:  51<br />qx: 1.601145e-02<br />Model: Weibull","Age:  52<br />qx: 1.647617e-02<br />Model: Weibull","Age:  53<br />qx: 1.694512e-02<br />Model: Weibull","Age:  54<br />qx: 1.741824e-02<br />Model: Weibull","Age:  55<br />qx: 1.789549e-02<br />Model: Weibull","Age:  56<br />qx: 1.837683e-02<br />Model: Weibull","Age:  57<br />qx: 1.886221e-02<br />Model: Weibull","Age:  58<br />qx: 1.935158e-02<br />Model: Weibull","Age:  59<br />qx: 1.984490e-02<br />Model: Weibull","Age:  60<br />qx: 2.034214e-02<br />Model: Weibull","Age:  61<br />qx: 2.084325e-02<br />Model: Weibull","Age:  62<br />qx: 2.134819e-02<br />Model: Weibull","Age:  63<br />qx: 2.185692e-02<br />Model: Weibull","Age:  64<br />qx: 2.236941e-02<br />Model: Weibull","Age:  65<br />qx: 2.288561e-02<br />Model: Weibull","Age:  66<br />qx: 2.340550e-02<br />Model: Weibull","Age:  67<br />qx: 2.392902e-02<br />Model: Weibull","Age:  68<br />qx: 2.445616e-02<br />Model: Weibull","Age:  69<br />qx: 2.498687e-02<br />Model: Weibull","Age:  70<br />qx: 2.552112e-02<br />Model: Weibull","Age:  71<br />qx: 2.605888e-02<br />Model: Weibull","Age:  72<br />qx: 2.660011e-02<br />Model: Weibull","Age:  73<br />qx: 2.714478e-02<br />Model: Weibull","Age:  74<br />qx: 2.769287e-02<br />Model: Weibull","Age:  75<br />qx: 2.824433e-02<br />Model: Weibull","Age:  76<br />qx: 2.879914e-02<br />Model: Weibull","Age:  77<br />qx: 2.935727e-02<br />Model: Weibull","Age:  78<br />qx: 2.991868e-02<br />Model: Weibull","Age:  79<br />qx: 3.048336e-02<br />Model: Weibull","Age:  80<br />qx: 3.105127e-02<br />Model: Weibull","Age:  81<br />qx: 3.162238e-02<br />Model: Weibull","Age:  82<br />qx: 3.219667e-02<br />Model: Weibull","Age:  83<br />qx: 3.277410e-02<br />Model: Weibull","Age:  84<br />qx: 3.335465e-02<br />Model: Weibull","Age:  85<br />qx: 3.393830e-02<br />Model: Weibull","Age:  86<br />qx: 3.452501e-02<br />Model: Weibull","Age:  87<br />qx: 3.511477e-02<br />Model: Weibull","Age:  88<br />qx: 3.570754e-02<br />Model: Weibull","Age:  89<br />qx: 3.630331e-02<br />Model: Weibull","Age:  90<br />qx: 3.690204e-02<br />Model: Weibull","Age:  91<br />qx: 3.750371e-02<br />Model: Weibull","Age:  92<br />qx: 3.810830e-02<br />Model: Weibull","Age:  93<br />qx: 3.871579e-02<br />Model: Weibull","Age:  94<br />qx: 3.932615e-02<br />Model: Weibull","Age:  95<br />qx: 3.993935e-02<br />Model: Weibull","Age:  96<br />qx: 4.055538e-02<br />Model: Weibull","Age:  97<br />qx: 4.117421e-02<br />Model: Weibull","Age:  98<br />qx: 4.179582e-02<br />Model: Weibull","Age:  99<br />qx: 4.242018e-02<br />Model: Weibull","Age: 100<br />qx: 4.304728e-02<br />Model: Weibull"],"type":"scatter","mode":"lines","line":{"width":3.7795275590551185,"color":"rgba(231,76,60,1)","dash":"solid"},"hoveron":"points","name":"Weibull","legendgroup":"Weibull","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.762557077625573,"r":7.3059360730593621,"b":40.182648401826491,"l":48.949771689497723},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"<b> Comparison of Mortality Models <\/b>","font":{"color":"rgba(0,0,0,1)","family":"","size":17.534246575342465},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-5,105],"tickmode":"array","ticktext":["0","25","50","75","100"],"tickvals":[0,24.999999999999996,50,75,100],"categoryorder":"array","categoryarray":["0","25","50","75","100"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"Age","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.011004890312491786,0.23148701738904623],"tickmode":"array","ticktext":["0.00","0.05","0.10","0.15","0.20"],"tickvals":[0,0.05000000000000001,0.10000000000000001,0.15000000000000002,0.20000000000000001],"categoryorder":"array","categoryarray":["0.00","0.05","0.10","0.15","0.20"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"Probability of Death (qx)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498},"title":{"text":"Model","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}}},"hovermode":"x unified","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"34b02dad22fe":{"x":{},"y":{},"colour":{},"type":"scatter"}},"cur_data":"34b02dad22fe","visdat":{"34b02dad22fe":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section><section id="practical-applications" class="level2"><h2 class="anchored" data-anchor-id="practical-applications">Practical Applications</h2>
<section id="premium-calculation-example" class="level3"><h3 class="anchored" data-anchor-id="premium-calculation-example">Premium Calculation Example</h3>
<p>Let’s calculate a simple premium for a 10-year term life insurance policy with a $100,000 benefit.</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Function to calculate net single premium</span></span>
<span><span class="va">calculate_nsp</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">age</span>, <span class="va">term</span>, <span class="va">benefit</span>, <span class="va">mortality_table</span>, <span class="va">interest_rate</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># Get index for the age</span></span>
<span>  <span class="va">age_index</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span><span class="op">(</span><span class="va">mortality_table</span><span class="op">$</span><span class="va">Age</span> <span class="op">==</span> <span class="va">age</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">age_index</span><span class="op">)</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="cn">NA</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span>  </span>
<span>  <span class="co"># Get term insurance value</span></span>
<span>  <span class="va">A_term</span> <span class="op">&lt;-</span> <span class="va">mortality_table</span><span class="op">$</span><span class="va">A10x</span><span class="op">[</span><span class="va">age_index</span><span class="op">]</span></span>
<span>  </span>
<span>  <span class="co"># Calculate net single premium</span></span>
<span>  <span class="va">nsp</span> <span class="op">&lt;-</span> <span class="va">benefit</span> <span class="op">*</span> <span class="va">A_term</span></span>
<span>  </span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">nsp</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Function to calculate annual premium</span></span>
<span><span class="va">calculate_annual_premium</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">age</span>, <span class="va">term</span>, <span class="va">benefit</span>, <span class="va">mortality_table</span>, <span class="va">interest_rate</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># Get index for the age</span></span>
<span>  <span class="va">age_index</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span><span class="op">(</span><span class="va">mortality_table</span><span class="op">$</span><span class="va">Age</span> <span class="op">==</span> <span class="va">age</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">age_index</span><span class="op">)</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="cn">NA</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span>  </span>
<span>  <span class="co"># Get term insurance value and annuity value</span></span>
<span>  <span class="va">A_term</span> <span class="op">&lt;-</span> <span class="va">mortality_table</span><span class="op">$</span><span class="va">A10x</span><span class="op">[</span><span class="va">age_index</span><span class="op">]</span></span>
<span>  </span>
<span>  <span class="co"># Calculate annuity value for term years</span></span>
<span>  <span class="va">ax_term</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span>  <span class="va">cum_prob</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span>  <span class="va">v</span> <span class="op">&lt;-</span> <span class="fl">1</span> <span class="op">/</span> <span class="op">(</span><span class="fl">1</span> <span class="op">+</span> <span class="va">interest_rate</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="kw">for</span> <span class="op">(</span><span class="va">t</span> <span class="kw">in</span> <span class="fl">0</span><span class="op">:</span><span class="op">(</span><span class="va">term</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="va">age_index</span> <span class="op">+</span> <span class="va">t</span> <span class="op">&lt;=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">mortality_table</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">ax_term</span> <span class="op">&lt;-</span> <span class="va">ax_term</span> <span class="op">+</span> <span class="va">v</span><span class="op">^</span><span class="va">t</span> <span class="op">*</span> <span class="va">cum_prob</span></span>
<span>      <span class="va">cum_prob</span> <span class="op">&lt;-</span> <span class="va">cum_prob</span> <span class="op">*</span> <span class="va">mortality_table</span><span class="op">$</span><span class="va">px</span><span class="op">[</span><span class="va">age_index</span> <span class="op">+</span> <span class="va">t</span><span class="op">]</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">}</span></span>
<span>  </span>
<span>  <span class="co"># Calculate annual premium</span></span>
<span>  <span class="va">annual_premium</span> <span class="op">&lt;-</span> <span class="va">benefit</span> <span class="op">*</span> <span class="va">A_term</span> <span class="op">/</span> <span class="va">ax_term</span></span>
<span>  </span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">annual_premium</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Calculate premiums for different ages</span></span>
<span><span class="va">premium_ages</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">25</span>, <span class="fl">30</span>, <span class="fl">35</span>, <span class="fl">40</span>, <span class="fl">45</span>, <span class="fl">50</span>, <span class="fl">55</span>, <span class="fl">60</span><span class="op">)</span></span>
<span><span class="va">benefit</span> <span class="op">&lt;-</span> <span class="fl">100000</span></span>
<span><span class="va">term</span> <span class="op">&lt;-</span> <span class="fl">10</span></span>
<span></span>
<span><span class="co"># Calculate premiums</span></span>
<span><span class="va">nsp_values</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">sapply</a></span><span class="op">(</span><span class="va">premium_ages</span>, <span class="va">calculate_nsp</span>, term <span class="op">=</span> <span class="va">term</span>, benefit <span class="op">=</span> <span class="va">benefit</span>, </span>
<span>                    mortality_table <span class="op">=</span> <span class="va">mortality_table</span>, interest_rate <span class="op">=</span> <span class="va">interest_rate</span><span class="op">)</span></span>
<span><span class="va">annual_premiums</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">sapply</a></span><span class="op">(</span><span class="va">premium_ages</span>, <span class="va">calculate_annual_premium</span>, term <span class="op">=</span> <span class="va">term</span>, benefit <span class="op">=</span> <span class="va">benefit</span>, </span>
<span>                         mortality_table <span class="op">=</span> <span class="va">mortality_table</span>, interest_rate <span class="op">=</span> <span class="va">interest_rate</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create premium table</span></span>
<span><span class="va">premium_table</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span></span>
<span>  Age <span class="op">=</span> <span class="va">premium_ages</span>,</span>
<span>  NSP <span class="op">=</span> <span class="va">nsp_values</span>,</span>
<span>  Annual_Premium <span class="op">=</span> <span class="va">annual_premiums</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">kable</span><span class="op">(</span><span class="va">premium_table</span>, </span>
<span>      caption <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"10-Year Term Life Insurance Premiums ($"</span>, <span class="fu"><a href="https://rdrr.io/r/base/format.html">format</a></span><span class="op">(</span><span class="va">benefit</span>, big.mark <span class="op">=</span> <span class="st">","</span><span class="op">)</span>, <span class="st">" Benefit)"</span><span class="op">)</span>,</span>
<span>      col.names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Age"</span>, <span class="st">"Net Single Premium ($)"</span>, <span class="st">"Annual Premium ($)"</span><span class="op">)</span>,</span>
<span>      digits <span class="op">=</span> <span class="fl">2</span>,</span>
<span>      format.args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>big.mark <span class="op">=</span> <span class="st">","</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">kable_styling</span><span class="op">(</span>bootstrap_options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"striped"</span>, <span class="st">"hover"</span>, <span class="st">"condensed"</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<table class="table table-striped table-hover table-condensed" style="margin-left: auto; margin-right: auto;">
<caption>10-Year Term Life Insurance Premiums ($1e+05 Benefit)</caption>
 <thead><tr>
<th style="text-align:right;"> Age </th>
   <th style="text-align:right;"> Net Single Premium ($) 
   </th>
<th style="text-align:right;"> Annual Premium ($) </th>
  
 

</tr></thead>
<tbody>
<tr>
<td style="text-align:right;"> 25 </td>
   <td style="text-align:right;"> 335.77 </td>
   <td style="text-align:right;"> 38.27 </td>
  </tr>
<tr>
<td style="text-align:right;"> 30 </td>
   <td style="text-align:right;"> 442.86 </td>
   <td style="text-align:right;"> 50.50 </td>
  </tr>
<tr>
<td style="text-align:right;"> 35 </td>
   <td style="text-align:right;"> 619.17 </td>
   <td style="text-align:right;"> 70.66 </td>
  </tr>
<tr>
<td style="text-align:right;"> 40 </td>
   <td style="text-align:right;"> 909.16 </td>
   <td style="text-align:right;"> 103.89 </td>
  </tr>
<tr>
<td style="text-align:right;"> 45 </td>
   <td style="text-align:right;"> 1,385.40 </td>
   <td style="text-align:right;"> 158.62 </td>
  </tr>
<tr>
<td style="text-align:right;"> 50 </td>
   <td style="text-align:right;"> 2,165.49 </td>
   <td style="text-align:right;"> 248.75 </td>
  </tr>
<tr>
<td style="text-align:right;"> 55 </td>
   <td style="text-align:right;"> 3,437.93 </td>
   <td style="text-align:right;"> 397.07 </td>
  </tr>
<tr>
<td style="text-align:right;"> 60 </td>
   <td style="text-align:right;"> 5,499.06 </td>
   <td style="text-align:right;"> 640.81 </td>
  </tr>
</tbody>
</table>
</div>
</div>
</section><section id="visualizing-premium-trends" class="level3"><h3 class="anchored" data-anchor-id="visualizing-premium-trends">Visualizing Premium Trends</h3>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb9"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Create premium trend plot</span></span>
<span><span class="va">p5</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span><span class="va">premium_table</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">Age</span>, y <span class="op">=</span> <span class="va">Annual_Premium</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span>color <span class="op">=</span> <span class="st">"#2c3e50"</span>, size <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span>color <span class="op">=</span> <span class="st">"#3498db"</span>, size <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Annual Premium by Age"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"10-Year Term Life Insurance ($"</span>, <span class="fu"><a href="https://rdrr.io/r/base/format.html">format</a></span><span class="op">(</span><span class="va">benefit</span>, big.mark <span class="op">=</span> <span class="st">","</span><span class="op">)</span>, <span class="st">" Benefit)"</span><span class="op">)</span>,</span>
<span>    x <span class="op">=</span> <span class="st">"Age"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Annual Premium ($)"</span>,</span>
<span>    caption <span class="op">=</span> <span class="st">"Source: Simulated data"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_y_continuous</span><span class="op">(</span>labels <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/dollar_format.html">dollar_format</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_minimal</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span></span>
<span>    plot.title <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>face <span class="op">=</span> <span class="st">"bold"</span><span class="op">)</span>,</span>
<span>    plot.subtitle <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>color <span class="op">=</span> <span class="st">"gray50"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># Convert to interactive plot</span></span>
<span><span class="fu">ggplotly</span><span class="op">(</span><span class="va">p5</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/layout.html">layout</a></span><span class="op">(</span>hovermode <span class="op">=</span> <span class="st">"x unified"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-56b09ed1d1b0202e949a" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-56b09ed1d1b0202e949a">{"x":{"data":[{"x":[25,30,35,40,45,50,55,60],"y":[38.274875521225276,50.504973133447201,70.663670975364184,103.88527311999229,158.61910138998863,248.7530288412099,397.06826848541283,640.80962272557042],"text":["Age: 25<br />Annual_Premium:  38.27488","Age: 30<br />Annual_Premium:  50.50497","Age: 35<br />Annual_Premium:  70.66367","Age: 40<br />Annual_Premium: 103.88527","Age: 45<br />Annual_Premium: 158.61910","Age: 50<br />Annual_Premium: 248.75303","Age: 55<br />Annual_Premium: 397.06827","Age: 60<br />Annual_Premium: 640.80962"],"type":"scatter","mode":"lines+markers","line":{"width":3.7795275590551185,"color":"rgba(44,62,80,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(52,152,219,1)","opacity":1,"size":11.338582677165356,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(52,152,219,1)"}},"frame":null}],"layout":{"margin":{"t":43.762557077625573,"r":7.3059360730593621,"b":40.182648401826491,"l":48.949771689497723},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"<b> Annual Premium by Age <\/b>","font":{"color":"rgba(0,0,0,1)","family":"","size":17.534246575342465},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[23.25,61.75],"tickmode":"array","ticktext":["30","40","50","60"],"tickvals":[30,40,50,60],"categoryorder":"array","categoryarray":["30","40","50","60"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"Age","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[8.1481381610080135,670.93636008578767],"tickmode":"array","ticktext":["$200","$400","$600"],"tickvals":[200,400.00000000000006,600],"categoryorder":"array","categoryarray":["$200","$400","$600"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"Annual Premium ($)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498}},"hovermode":"x unified","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"34b0601027f5":{"x":{},"y":{},"type":"scatter"},"34b012c524cc":{"x":{},"y":{}}},"cur_data":"34b0601027f5","visdat":{"34b0601027f5":["function (y) ","x"],"34b012c524cc":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section></section><section id="conclusion" class="level2"><h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<p>This post has demonstrated how to work with mortality tables in R, from basic construction to practical applications in insurance pricing. The interactive visualizations help in understanding the patterns and relationships in mortality data.</p>
<p>For actuaries and data scientists, R provides powerful tools for mortality analysis, allowing for sophisticated modeling and visualization that can enhance decision-making in insurance and pension contexts.</p>
<p>In future posts, we’ll explore more advanced topics such as:</p>
<ul>
<li>Stochastic mortality modeling</li>
<li>Multi-state models for health insurance</li>
<li>Bayesian approaches to mortality projection</li>
<li>Machine learning applications in mortality analysis</li>
</ul></section><section id="references" class="level2"><h2 class="anchored" data-anchor-id="references">References</h2>
<ol type="1">
<li><p>Dickson, D. C., Hardy, M. R., &amp; Waters, H. R. (2013). <em>Actuarial Mathematics for Life Contingent Risks</em>. Cambridge University Press.</p></li>
<li><p>Bowers, N. L., Gerber, H. U., Hickman, J. C., Jones, D. A., &amp; Nesbitt, C. J. (1997). <em>Actuarial Mathematics</em>. Society of Actuaries.</p></li>
<li><p>Charpentier, A. (2014). <em>Computational Actuarial Science with R</em>. CRC Press.</p></li>
<li><p>Society of Actuaries. (2019). <em>Life Tables and Mortality Models</em>. Education and Examination Committee of the Society of Actuaries.</p></li>
</ol>


<!-- -->

</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><script src="https://giscus.app/client.js" data-repo="username/quarto-website" data-repo-id="your-repo-id" data-category="Comments" data-category-id="your-category-id" data-mapping="pathname" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="bottom" data-theme="light" data-lang="en" crossorigin="anonymous" data-loading="lazy" async="">
</script><input type="hidden" id="giscus-base-theme" value="light"><input type="hidden" id="giscus-alt-theme" value="light"><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb10" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Mortality Table Analysis with R"</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="an">subtitle:</span><span class="co"> "Exploring actuarial life tables and survival analysis"</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> "Your Name"</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> "2025-04-20"</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="an">categories:</span><span class="co"> [actuarial, mortality, R]</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="an">image:</span><span class="co"> "../../images/placeholder.jpg"</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="an">description:</span><span class="co"> "A comprehensive analysis of mortality tables using R, with interactive visualizations and practical applications for actuaries."</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="an">toc:</span><span class="co"> true</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="an">toc-depth:</span><span class="co"> 3</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a><span class="an">code-fold:</span><span class="co"> true</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a><span class="an">code-tools:</span><span class="co"> true</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a><span class="an">code-link:</span><span class="co"> true</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a><span class="an">execute:</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a><span class="co">  echo: true</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a><span class="co">  warning: false</span></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a><span class="co">  message: false</span></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a><span class="in">```{r setup}</span></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a><span class="in">#| label: setup</span></span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a><span class="in">#| include: false</span></span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a><span class="in"># Load required packages</span></span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a><span class="in">library(tidyverse)</span></span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a><span class="in">library(knitr)</span></span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a><span class="in">library(kableExtra)</span></span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a><span class="in">library(plotly)</span></span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a><span class="in">library(lifecontingencies)</span></span>
<span id="cb10-30"><a href="#cb10-30" aria-hidden="true" tabindex="-1"></a><span class="in">library(actuar)</span></span>
<span id="cb10-31"><a href="#cb10-31" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb10-32"><a href="#cb10-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-33"><a href="#cb10-33" aria-hidden="true" tabindex="-1"></a><span class="fu">## Introduction</span></span>
<span id="cb10-34"><a href="#cb10-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-35"><a href="#cb10-35" aria-hidden="true" tabindex="-1"></a>Mortality tables are fundamental tools in actuarial science, providing the foundation for life insurance pricing, pension valuations, and demographic studies. This post explores how to work with mortality data in R, create visualizations, and perform key actuarial calculations.</span>
<span id="cb10-36"><a href="#cb10-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-37"><a href="#cb10-37" aria-hidden="true" tabindex="-1"></a><span class="fu">### What are Mortality Tables?</span></span>
<span id="cb10-38"><a href="#cb10-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-39"><a href="#cb10-39" aria-hidden="true" tabindex="-1"></a>Mortality tables (also called life tables) present the probability of death for individuals at different ages. They typically include:</span>
<span id="cb10-40"><a href="#cb10-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-41"><a href="#cb10-41" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Age ($x$)</span>
<span id="cb10-42"><a href="#cb10-42" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Number of survivors to age $x$ ($l_x$)</span>
<span id="cb10-43"><a href="#cb10-43" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Number of deaths between ages $x$ and $x+1$ ($d_x$)</span>
<span id="cb10-44"><a href="#cb10-44" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Probability of death between ages $x$ and $x+1$ ($q_x$)</span>
<span id="cb10-45"><a href="#cb10-45" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Probability of survival from age $x$ to $x+1$ ($p_x$)</span>
<span id="cb10-46"><a href="#cb10-46" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Life expectancy at age $x$ ($e_x$)</span>
<span id="cb10-47"><a href="#cb10-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-48"><a href="#cb10-48" aria-hidden="true" tabindex="-1"></a>These tables form the statistical basis for calculating premiums, reserves, and other actuarial values.</span>
<span id="cb10-49"><a href="#cb10-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-50"><a href="#cb10-50" aria-hidden="true" tabindex="-1"></a><span class="fu">## Creating a Basic Mortality Table in R</span></span>
<span id="cb10-51"><a href="#cb10-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-52"><a href="#cb10-52" aria-hidden="true" tabindex="-1"></a>Let's start by creating a simple mortality table using the Gompertz-Makeham law of mortality, which is commonly used in actuarial work.</span>
<span id="cb10-53"><a href="#cb10-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-54"><a href="#cb10-54" aria-hidden="true" tabindex="-1"></a><span class="in">```{r mortality-table}</span></span>
<span id="cb10-55"><a href="#cb10-55" aria-hidden="true" tabindex="-1"></a><span class="in">#| label: mortality-table</span></span>
<span id="cb10-56"><a href="#cb10-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-57"><a href="#cb10-57" aria-hidden="true" tabindex="-1"></a><span class="in"># Define parameters for Gompertz-Makeham law</span></span>
<span id="cb10-58"><a href="#cb10-58" aria-hidden="true" tabindex="-1"></a><span class="in">alpha &lt;- 0.0002  # Constant component</span></span>
<span id="cb10-59"><a href="#cb10-59" aria-hidden="true" tabindex="-1"></a><span class="in">beta &lt;- 0.00001  # Age-dependent component (base)</span></span>
<span id="cb10-60"><a href="#cb10-60" aria-hidden="true" tabindex="-1"></a><span class="in">gamma &lt;- 0.1     # Age-dependent component (exponential)</span></span>
<span id="cb10-61"><a href="#cb10-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-62"><a href="#cb10-62" aria-hidden="true" tabindex="-1"></a><span class="in"># Create age range</span></span>
<span id="cb10-63"><a href="#cb10-63" aria-hidden="true" tabindex="-1"></a><span class="in">ages &lt;- 0:100</span></span>
<span id="cb10-64"><a href="#cb10-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-65"><a href="#cb10-65" aria-hidden="true" tabindex="-1"></a><span class="in"># Calculate mortality rates using Gompertz-Makeham formula</span></span>
<span id="cb10-66"><a href="#cb10-66" aria-hidden="true" tabindex="-1"></a><span class="in">qx &lt;- alpha + beta * exp(gamma * ages)</span></span>
<span id="cb10-67"><a href="#cb10-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-68"><a href="#cb10-68" aria-hidden="true" tabindex="-1"></a><span class="in"># Ensure probabilities are between 0 and 1</span></span>
<span id="cb10-69"><a href="#cb10-69" aria-hidden="true" tabindex="-1"></a><span class="in">qx &lt;- pmin(qx, 1)</span></span>
<span id="cb10-70"><a href="#cb10-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-71"><a href="#cb10-71" aria-hidden="true" tabindex="-1"></a><span class="in"># Calculate survival probabilities</span></span>
<span id="cb10-72"><a href="#cb10-72" aria-hidden="true" tabindex="-1"></a><span class="in">px &lt;- 1 - qx</span></span>
<span id="cb10-73"><a href="#cb10-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-74"><a href="#cb10-74" aria-hidden="true" tabindex="-1"></a><span class="in"># Calculate number of survivors (starting with 100,000 lives)</span></span>
<span id="cb10-75"><a href="#cb10-75" aria-hidden="true" tabindex="-1"></a><span class="in">lx &lt;- numeric(length(ages))</span></span>
<span id="cb10-76"><a href="#cb10-76" aria-hidden="true" tabindex="-1"></a><span class="in">lx[1] &lt;- 100000</span></span>
<span id="cb10-77"><a href="#cb10-77" aria-hidden="true" tabindex="-1"></a><span class="in">for (i in 2:length(ages)) {</span></span>
<span id="cb10-78"><a href="#cb10-78" aria-hidden="true" tabindex="-1"></a><span class="in">  lx[i] &lt;- lx[i-1] * px[i-1]</span></span>
<span id="cb10-79"><a href="#cb10-79" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb10-80"><a href="#cb10-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-81"><a href="#cb10-81" aria-hidden="true" tabindex="-1"></a><span class="in"># Calculate deaths</span></span>
<span id="cb10-82"><a href="#cb10-82" aria-hidden="true" tabindex="-1"></a><span class="in">dx &lt;- numeric(length(ages))</span></span>
<span id="cb10-83"><a href="#cb10-83" aria-hidden="true" tabindex="-1"></a><span class="in">for (i in 1:(length(ages)-1)) {</span></span>
<span id="cb10-84"><a href="#cb10-84" aria-hidden="true" tabindex="-1"></a><span class="in">  dx[i] &lt;- lx[i] - lx[i+1]</span></span>
<span id="cb10-85"><a href="#cb10-85" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb10-86"><a href="#cb10-86" aria-hidden="true" tabindex="-1"></a><span class="in">dx[length(ages)] &lt;- lx[length(ages)]</span></span>
<span id="cb10-87"><a href="#cb10-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-88"><a href="#cb10-88" aria-hidden="true" tabindex="-1"></a><span class="in"># Create mortality table</span></span>
<span id="cb10-89"><a href="#cb10-89" aria-hidden="true" tabindex="-1"></a><span class="in">mortality_table &lt;- data.frame(</span></span>
<span id="cb10-90"><a href="#cb10-90" aria-hidden="true" tabindex="-1"></a><span class="in">  Age = ages,</span></span>
<span id="cb10-91"><a href="#cb10-91" aria-hidden="true" tabindex="-1"></a><span class="in">  qx = qx,</span></span>
<span id="cb10-92"><a href="#cb10-92" aria-hidden="true" tabindex="-1"></a><span class="in">  px = px,</span></span>
<span id="cb10-93"><a href="#cb10-93" aria-hidden="true" tabindex="-1"></a><span class="in">  lx = lx,</span></span>
<span id="cb10-94"><a href="#cb10-94" aria-hidden="true" tabindex="-1"></a><span class="in">  dx = dx</span></span>
<span id="cb10-95"><a href="#cb10-95" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb10-96"><a href="#cb10-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-97"><a href="#cb10-97" aria-hidden="true" tabindex="-1"></a><span class="in"># Display first 10 rows of the table</span></span>
<span id="cb10-98"><a href="#cb10-98" aria-hidden="true" tabindex="-1"></a><span class="in">kable(head(mortality_table, 10), </span></span>
<span id="cb10-99"><a href="#cb10-99" aria-hidden="true" tabindex="-1"></a><span class="in">      caption = "Mortality Table (First 10 Ages)",</span></span>
<span id="cb10-100"><a href="#cb10-100" aria-hidden="true" tabindex="-1"></a><span class="in">      digits = 5,</span></span>
<span id="cb10-101"><a href="#cb10-101" aria-hidden="true" tabindex="-1"></a><span class="in">      format.args = list(big.mark = ",")) %&gt;%</span></span>
<span id="cb10-102"><a href="#cb10-102" aria-hidden="true" tabindex="-1"></a><span class="in">  kable_styling(bootstrap_options = c("striped", "hover", "condensed"))</span></span>
<span id="cb10-103"><a href="#cb10-103" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb10-104"><a href="#cb10-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-105"><a href="#cb10-105" aria-hidden="true" tabindex="-1"></a><span class="fu">## Visualizing Mortality Data</span></span>
<span id="cb10-106"><a href="#cb10-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-107"><a href="#cb10-107" aria-hidden="true" tabindex="-1"></a>Visualization is crucial for understanding mortality patterns. Let's create some interactive plots to explore our mortality table.</span>
<span id="cb10-108"><a href="#cb10-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-109"><a href="#cb10-109" aria-hidden="true" tabindex="-1"></a><span class="fu">### Mortality Rates by Age</span></span>
<span id="cb10-110"><a href="#cb10-110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-111"><a href="#cb10-111" aria-hidden="true" tabindex="-1"></a><span class="in">```{r mortality-plot}</span></span>
<span id="cb10-112"><a href="#cb10-112" aria-hidden="true" tabindex="-1"></a><span class="in">#| label: mortality-plot</span></span>
<span id="cb10-113"><a href="#cb10-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-114"><a href="#cb10-114" aria-hidden="true" tabindex="-1"></a><span class="in">p &lt;- ggplot(mortality_table, aes(x = Age, y = qx)) +</span></span>
<span id="cb10-115"><a href="#cb10-115" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_line(color = "#3498db", size = 1) +</span></span>
<span id="cb10-116"><a href="#cb10-116" aria-hidden="true" tabindex="-1"></a><span class="in">  labs(</span></span>
<span id="cb10-117"><a href="#cb10-117" aria-hidden="true" tabindex="-1"></a><span class="in">    title = "Mortality Rates by Age",</span></span>
<span id="cb10-118"><a href="#cb10-118" aria-hidden="true" tabindex="-1"></a><span class="in">    subtitle = "Based on Gompertz-Makeham Law",</span></span>
<span id="cb10-119"><a href="#cb10-119" aria-hidden="true" tabindex="-1"></a><span class="in">    x = "Age",</span></span>
<span id="cb10-120"><a href="#cb10-120" aria-hidden="true" tabindex="-1"></a><span class="in">    y = "Probability of Death (qx)",</span></span>
<span id="cb10-121"><a href="#cb10-121" aria-hidden="true" tabindex="-1"></a><span class="in">    caption = "Source: Simulated data"</span></span>
<span id="cb10-122"><a href="#cb10-122" aria-hidden="true" tabindex="-1"></a><span class="in">  ) +</span></span>
<span id="cb10-123"><a href="#cb10-123" aria-hidden="true" tabindex="-1"></a><span class="in">  theme_minimal() +</span></span>
<span id="cb10-124"><a href="#cb10-124" aria-hidden="true" tabindex="-1"></a><span class="in">  theme(</span></span>
<span id="cb10-125"><a href="#cb10-125" aria-hidden="true" tabindex="-1"></a><span class="in">    plot.title = element_text(face = "bold"),</span></span>
<span id="cb10-126"><a href="#cb10-126" aria-hidden="true" tabindex="-1"></a><span class="in">    plot.subtitle = element_text(color = "gray50")</span></span>
<span id="cb10-127"><a href="#cb10-127" aria-hidden="true" tabindex="-1"></a><span class="in">  )</span></span>
<span id="cb10-128"><a href="#cb10-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-129"><a href="#cb10-129" aria-hidden="true" tabindex="-1"></a><span class="in"># Convert to interactive plot</span></span>
<span id="cb10-130"><a href="#cb10-130" aria-hidden="true" tabindex="-1"></a><span class="in">ggplotly(p) %&gt;%</span></span>
<span id="cb10-131"><a href="#cb10-131" aria-hidden="true" tabindex="-1"></a><span class="in">  layout(hovermode = "x unified")</span></span>
<span id="cb10-132"><a href="#cb10-132" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb10-133"><a href="#cb10-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-134"><a href="#cb10-134" aria-hidden="true" tabindex="-1"></a><span class="fu">### Survival Curve</span></span>
<span id="cb10-135"><a href="#cb10-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-136"><a href="#cb10-136" aria-hidden="true" tabindex="-1"></a>The survival curve shows the number of survivors at each age from an initial population.</span>
<span id="cb10-137"><a href="#cb10-137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-138"><a href="#cb10-138" aria-hidden="true" tabindex="-1"></a><span class="in">```{r survival-curve}</span></span>
<span id="cb10-139"><a href="#cb10-139" aria-hidden="true" tabindex="-1"></a><span class="in">#| label: survival-curve</span></span>
<span id="cb10-140"><a href="#cb10-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-141"><a href="#cb10-141" aria-hidden="true" tabindex="-1"></a><span class="in">p2 &lt;- ggplot(mortality_table, aes(x = Age, y = lx)) +</span></span>
<span id="cb10-142"><a href="#cb10-142" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_line(color = "#2c3e50", size = 1) +</span></span>
<span id="cb10-143"><a href="#cb10-143" aria-hidden="true" tabindex="-1"></a><span class="in">  labs(</span></span>
<span id="cb10-144"><a href="#cb10-144" aria-hidden="true" tabindex="-1"></a><span class="in">    title = "Survival Curve",</span></span>
<span id="cb10-145"><a href="#cb10-145" aria-hidden="true" tabindex="-1"></a><span class="in">    subtitle = "Number of Survivors by Age (from 100,000 initial lives)",</span></span>
<span id="cb10-146"><a href="#cb10-146" aria-hidden="true" tabindex="-1"></a><span class="in">    x = "Age",</span></span>
<span id="cb10-147"><a href="#cb10-147" aria-hidden="true" tabindex="-1"></a><span class="in">    y = "Number of Survivors (lx)",</span></span>
<span id="cb10-148"><a href="#cb10-148" aria-hidden="true" tabindex="-1"></a><span class="in">    caption = "Source: Simulated data"</span></span>
<span id="cb10-149"><a href="#cb10-149" aria-hidden="true" tabindex="-1"></a><span class="in">  ) +</span></span>
<span id="cb10-150"><a href="#cb10-150" aria-hidden="true" tabindex="-1"></a><span class="in">  theme_minimal() +</span></span>
<span id="cb10-151"><a href="#cb10-151" aria-hidden="true" tabindex="-1"></a><span class="in">  theme(</span></span>
<span id="cb10-152"><a href="#cb10-152" aria-hidden="true" tabindex="-1"></a><span class="in">    plot.title = element_text(face = "bold"),</span></span>
<span id="cb10-153"><a href="#cb10-153" aria-hidden="true" tabindex="-1"></a><span class="in">    plot.subtitle = element_text(color = "gray50")</span></span>
<span id="cb10-154"><a href="#cb10-154" aria-hidden="true" tabindex="-1"></a><span class="in">  )</span></span>
<span id="cb10-155"><a href="#cb10-155" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-156"><a href="#cb10-156" aria-hidden="true" tabindex="-1"></a><span class="in"># Convert to interactive plot</span></span>
<span id="cb10-157"><a href="#cb10-157" aria-hidden="true" tabindex="-1"></a><span class="in">ggplotly(p2) %&gt;%</span></span>
<span id="cb10-158"><a href="#cb10-158" aria-hidden="true" tabindex="-1"></a><span class="in">  layout(hovermode = "x unified")</span></span>
<span id="cb10-159"><a href="#cb10-159" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb10-160"><a href="#cb10-160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-161"><a href="#cb10-161" aria-hidden="true" tabindex="-1"></a><span class="fu">## Calculating Life Expectancy</span></span>
<span id="cb10-162"><a href="#cb10-162" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-163"><a href="#cb10-163" aria-hidden="true" tabindex="-1"></a>Life expectancy is a key metric derived from mortality tables. Let's calculate and visualize life expectancy at different ages.</span>
<span id="cb10-164"><a href="#cb10-164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-165"><a href="#cb10-165" aria-hidden="true" tabindex="-1"></a><span class="in">```{r life-expectancy}</span></span>
<span id="cb10-166"><a href="#cb10-166" aria-hidden="true" tabindex="-1"></a><span class="in">#| label: life-expectancy</span></span>
<span id="cb10-167"><a href="#cb10-167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-168"><a href="#cb10-168" aria-hidden="true" tabindex="-1"></a><span class="in"># Calculate temporary life expectancies</span></span>
<span id="cb10-169"><a href="#cb10-169" aria-hidden="true" tabindex="-1"></a><span class="in">calculate_ex &lt;- function(mortality_table) {</span></span>
<span id="cb10-170"><a href="#cb10-170" aria-hidden="true" tabindex="-1"></a><span class="in">  ages &lt;- mortality_table$Age</span></span>
<span id="cb10-171"><a href="#cb10-171" aria-hidden="true" tabindex="-1"></a><span class="in">  lx &lt;- mortality_table$lx</span></span>
<span id="cb10-172"><a href="#cb10-172" aria-hidden="true" tabindex="-1"></a><span class="in">  n &lt;- length(ages)</span></span>
<span id="cb10-173"><a href="#cb10-173" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb10-174"><a href="#cb10-174" aria-hidden="true" tabindex="-1"></a><span class="in">  # Initialize ex vector</span></span>
<span id="cb10-175"><a href="#cb10-175" aria-hidden="true" tabindex="-1"></a><span class="in">  ex &lt;- numeric(n)</span></span>
<span id="cb10-176"><a href="#cb10-176" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb10-177"><a href="#cb10-177" aria-hidden="true" tabindex="-1"></a><span class="in">  for (i in 1:n) {</span></span>
<span id="cb10-178"><a href="#cb10-178" aria-hidden="true" tabindex="-1"></a><span class="in">    # Sum of lx+t for t &gt; 0</span></span>
<span id="cb10-179"><a href="#cb10-179" aria-hidden="true" tabindex="-1"></a><span class="in">    future_lx_sum &lt;- sum(lx[(i+1):n])</span></span>
<span id="cb10-180"><a href="#cb10-180" aria-hidden="true" tabindex="-1"></a><span class="in">    </span></span>
<span id="cb10-181"><a href="#cb10-181" aria-hidden="true" tabindex="-1"></a><span class="in">    # Life expectancy formula: sum of lx+t / lx</span></span>
<span id="cb10-182"><a href="#cb10-182" aria-hidden="true" tabindex="-1"></a><span class="in">    ex[i] &lt;- future_lx_sum / lx[i]</span></span>
<span id="cb10-183"><a href="#cb10-183" aria-hidden="true" tabindex="-1"></a><span class="in">  }</span></span>
<span id="cb10-184"><a href="#cb10-184" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb10-185"><a href="#cb10-185" aria-hidden="true" tabindex="-1"></a><span class="in">  return(ex)</span></span>
<span id="cb10-186"><a href="#cb10-186" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb10-187"><a href="#cb10-187" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-188"><a href="#cb10-188" aria-hidden="true" tabindex="-1"></a><span class="in"># Add life expectancy to the table</span></span>
<span id="cb10-189"><a href="#cb10-189" aria-hidden="true" tabindex="-1"></a><span class="in">mortality_table$ex &lt;- calculate_ex(mortality_table)</span></span>
<span id="cb10-190"><a href="#cb10-190" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-191"><a href="#cb10-191" aria-hidden="true" tabindex="-1"></a><span class="in"># Visualize life expectancy</span></span>
<span id="cb10-192"><a href="#cb10-192" aria-hidden="true" tabindex="-1"></a><span class="in">p3 &lt;- ggplot(mortality_table, aes(x = Age, y = ex)) +</span></span>
<span id="cb10-193"><a href="#cb10-193" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_line(color = "#e74c3c", size = 1) +</span></span>
<span id="cb10-194"><a href="#cb10-194" aria-hidden="true" tabindex="-1"></a><span class="in">  labs(</span></span>
<span id="cb10-195"><a href="#cb10-195" aria-hidden="true" tabindex="-1"></a><span class="in">    title = "Life Expectancy by Age",</span></span>
<span id="cb10-196"><a href="#cb10-196" aria-hidden="true" tabindex="-1"></a><span class="in">    subtitle = "Expected remaining years of life",</span></span>
<span id="cb10-197"><a href="#cb10-197" aria-hidden="true" tabindex="-1"></a><span class="in">    x = "Age",</span></span>
<span id="cb10-198"><a href="#cb10-198" aria-hidden="true" tabindex="-1"></a><span class="in">    y = "Life Expectancy (ex)",</span></span>
<span id="cb10-199"><a href="#cb10-199" aria-hidden="true" tabindex="-1"></a><span class="in">    caption = "Source: Simulated data"</span></span>
<span id="cb10-200"><a href="#cb10-200" aria-hidden="true" tabindex="-1"></a><span class="in">  ) +</span></span>
<span id="cb10-201"><a href="#cb10-201" aria-hidden="true" tabindex="-1"></a><span class="in">  theme_minimal() +</span></span>
<span id="cb10-202"><a href="#cb10-202" aria-hidden="true" tabindex="-1"></a><span class="in">  theme(</span></span>
<span id="cb10-203"><a href="#cb10-203" aria-hidden="true" tabindex="-1"></a><span class="in">    plot.title = element_text(face = "bold"),</span></span>
<span id="cb10-204"><a href="#cb10-204" aria-hidden="true" tabindex="-1"></a><span class="in">    plot.subtitle = element_text(color = "gray50")</span></span>
<span id="cb10-205"><a href="#cb10-205" aria-hidden="true" tabindex="-1"></a><span class="in">  )</span></span>
<span id="cb10-206"><a href="#cb10-206" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-207"><a href="#cb10-207" aria-hidden="true" tabindex="-1"></a><span class="in"># Convert to interactive plot</span></span>
<span id="cb10-208"><a href="#cb10-208" aria-hidden="true" tabindex="-1"></a><span class="in">ggplotly(p3) %&gt;%</span></span>
<span id="cb10-209"><a href="#cb10-209" aria-hidden="true" tabindex="-1"></a><span class="in">  layout(hovermode = "x unified")</span></span>
<span id="cb10-210"><a href="#cb10-210" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb10-211"><a href="#cb10-211" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-212"><a href="#cb10-212" aria-hidden="true" tabindex="-1"></a><span class="fu">## Actuarial Present Values</span></span>
<span id="cb10-213"><a href="#cb10-213" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-214"><a href="#cb10-214" aria-hidden="true" tabindex="-1"></a>Now let's calculate some actuarial present values, which are essential for insurance and annuity pricing.</span>
<span id="cb10-215"><a href="#cb10-215" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-216"><a href="#cb10-216" aria-hidden="true" tabindex="-1"></a><span class="fu">### Present Value of Life Annuity</span></span>
<span id="cb10-217"><a href="#cb10-217" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-218"><a href="#cb10-218" aria-hidden="true" tabindex="-1"></a><span class="in">```{r annuity-values}</span></span>
<span id="cb10-219"><a href="#cb10-219" aria-hidden="true" tabindex="-1"></a><span class="in">#| label: annuity-values</span></span>
<span id="cb10-220"><a href="#cb10-220" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-221"><a href="#cb10-221" aria-hidden="true" tabindex="-1"></a><span class="in"># Set interest rate</span></span>
<span id="cb10-222"><a href="#cb10-222" aria-hidden="true" tabindex="-1"></a><span class="in">interest_rate &lt;- 0.03</span></span>
<span id="cb10-223"><a href="#cb10-223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-224"><a href="#cb10-224" aria-hidden="true" tabindex="-1"></a><span class="in"># Calculate discount factor</span></span>
<span id="cb10-225"><a href="#cb10-225" aria-hidden="true" tabindex="-1"></a><span class="in">v &lt;- 1 / (1 + interest_rate)</span></span>
<span id="cb10-226"><a href="#cb10-226" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-227"><a href="#cb10-227" aria-hidden="true" tabindex="-1"></a><span class="in"># Calculate annuity values</span></span>
<span id="cb10-228"><a href="#cb10-228" aria-hidden="true" tabindex="-1"></a><span class="in">calculate_annuity &lt;- function(mortality_table, interest_rate) {</span></span>
<span id="cb10-229"><a href="#cb10-229" aria-hidden="true" tabindex="-1"></a><span class="in">  ages &lt;- mortality_table$Age</span></span>
<span id="cb10-230"><a href="#cb10-230" aria-hidden="true" tabindex="-1"></a><span class="in">  lx &lt;- mortality_table$lx</span></span>
<span id="cb10-231"><a href="#cb10-231" aria-hidden="true" tabindex="-1"></a><span class="in">  n &lt;- length(ages)</span></span>
<span id="cb10-232"><a href="#cb10-232" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb10-233"><a href="#cb10-233" aria-hidden="true" tabindex="-1"></a><span class="in">  # Initialize annuity value vector</span></span>
<span id="cb10-234"><a href="#cb10-234" aria-hidden="true" tabindex="-1"></a><span class="in">  ax &lt;- numeric(n)</span></span>
<span id="cb10-235"><a href="#cb10-235" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb10-236"><a href="#cb10-236" aria-hidden="true" tabindex="-1"></a><span class="in">  for (i in 1:n) {</span></span>
<span id="cb10-237"><a href="#cb10-237" aria-hidden="true" tabindex="-1"></a><span class="in">    # Sum of v^t * lx+t / lx for t &gt; 0</span></span>
<span id="cb10-238"><a href="#cb10-238" aria-hidden="true" tabindex="-1"></a><span class="in">    pv_sum &lt;- 0</span></span>
<span id="cb10-239"><a href="#cb10-239" aria-hidden="true" tabindex="-1"></a><span class="in">    for (t in 1:(n-i)) {</span></span>
<span id="cb10-240"><a href="#cb10-240" aria-hidden="true" tabindex="-1"></a><span class="in">      pv_sum &lt;- pv_sum + (1 / (1 + interest_rate))^t * lx[i+t] / lx[i]</span></span>
<span id="cb10-241"><a href="#cb10-241" aria-hidden="true" tabindex="-1"></a><span class="in">    }</span></span>
<span id="cb10-242"><a href="#cb10-242" aria-hidden="true" tabindex="-1"></a><span class="in">    </span></span>
<span id="cb10-243"><a href="#cb10-243" aria-hidden="true" tabindex="-1"></a><span class="in">    ax[i] &lt;- pv_sum</span></span>
<span id="cb10-244"><a href="#cb10-244" aria-hidden="true" tabindex="-1"></a><span class="in">  }</span></span>
<span id="cb10-245"><a href="#cb10-245" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb10-246"><a href="#cb10-246" aria-hidden="true" tabindex="-1"></a><span class="in">  return(ax)</span></span>
<span id="cb10-247"><a href="#cb10-247" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb10-248"><a href="#cb10-248" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-249"><a href="#cb10-249" aria-hidden="true" tabindex="-1"></a><span class="in"># Add annuity values to the table</span></span>
<span id="cb10-250"><a href="#cb10-250" aria-hidden="true" tabindex="-1"></a><span class="in">mortality_table$ax &lt;- calculate_annuity(mortality_table, interest_rate)</span></span>
<span id="cb10-251"><a href="#cb10-251" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-252"><a href="#cb10-252" aria-hidden="true" tabindex="-1"></a><span class="in"># Display annuity values for selected ages</span></span>
<span id="cb10-253"><a href="#cb10-253" aria-hidden="true" tabindex="-1"></a><span class="in">selected_ages &lt;- c(20, 30, 40, 50, 60, 65, 70, 80, 90)</span></span>
<span id="cb10-254"><a href="#cb10-254" aria-hidden="true" tabindex="-1"></a><span class="in">annuity_table &lt;- mortality_table[mortality_table$Age %in% selected_ages, c("Age", "ax")]</span></span>
<span id="cb10-255"><a href="#cb10-255" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-256"><a href="#cb10-256" aria-hidden="true" tabindex="-1"></a><span class="in">kable(annuity_table, </span></span>
<span id="cb10-257"><a href="#cb10-257" aria-hidden="true" tabindex="-1"></a><span class="in">      caption = paste0("Present Value of Life Annuity (Interest Rate = ", interest_rate*100, "%)"),</span></span>
<span id="cb10-258"><a href="#cb10-258" aria-hidden="true" tabindex="-1"></a><span class="in">      col.names = c("Age", "Annuity Value (ax)"),</span></span>
<span id="cb10-259"><a href="#cb10-259" aria-hidden="true" tabindex="-1"></a><span class="in">      digits = 4) %&gt;%</span></span>
<span id="cb10-260"><a href="#cb10-260" aria-hidden="true" tabindex="-1"></a><span class="in">  kable_styling(bootstrap_options = c("striped", "hover", "condensed"))</span></span>
<span id="cb10-261"><a href="#cb10-261" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb10-262"><a href="#cb10-262" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-263"><a href="#cb10-263" aria-hidden="true" tabindex="-1"></a><span class="fu">### Term Life Insurance Values</span></span>
<span id="cb10-264"><a href="#cb10-264" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-265"><a href="#cb10-265" aria-hidden="true" tabindex="-1"></a><span class="in">```{r insurance-values}</span></span>
<span id="cb10-266"><a href="#cb10-266" aria-hidden="true" tabindex="-1"></a><span class="in">#| label: insurance-values</span></span>
<span id="cb10-267"><a href="#cb10-267" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-268"><a href="#cb10-268" aria-hidden="true" tabindex="-1"></a><span class="in"># Calculate term life insurance values</span></span>
<span id="cb10-269"><a href="#cb10-269" aria-hidden="true" tabindex="-1"></a><span class="in">calculate_term_insurance &lt;- function(mortality_table, interest_rate, term) {</span></span>
<span id="cb10-270"><a href="#cb10-270" aria-hidden="true" tabindex="-1"></a><span class="in">  ages &lt;- mortality_table$Age</span></span>
<span id="cb10-271"><a href="#cb10-271" aria-hidden="true" tabindex="-1"></a><span class="in">  qx &lt;- mortality_table$qx</span></span>
<span id="cb10-272"><a href="#cb10-272" aria-hidden="true" tabindex="-1"></a><span class="in">  px &lt;- mortality_table$px</span></span>
<span id="cb10-273"><a href="#cb10-273" aria-hidden="true" tabindex="-1"></a><span class="in">  n &lt;- length(ages)</span></span>
<span id="cb10-274"><a href="#cb10-274" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb10-275"><a href="#cb10-275" aria-hidden="true" tabindex="-1"></a><span class="in">  # Initialize insurance value vector</span></span>
<span id="cb10-276"><a href="#cb10-276" aria-hidden="true" tabindex="-1"></a><span class="in">  Ax &lt;- numeric(n)</span></span>
<span id="cb10-277"><a href="#cb10-277" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb10-278"><a href="#cb10-278" aria-hidden="true" tabindex="-1"></a><span class="in">  for (i in 1:(n-term)) {</span></span>
<span id="cb10-279"><a href="#cb10-279" aria-hidden="true" tabindex="-1"></a><span class="in">    # Calculate term insurance value</span></span>
<span id="cb10-280"><a href="#cb10-280" aria-hidden="true" tabindex="-1"></a><span class="in">    value &lt;- 0</span></span>
<span id="cb10-281"><a href="#cb10-281" aria-hidden="true" tabindex="-1"></a><span class="in">    cum_prob &lt;- 1</span></span>
<span id="cb10-282"><a href="#cb10-282" aria-hidden="true" tabindex="-1"></a><span class="in">    </span></span>
<span id="cb10-283"><a href="#cb10-283" aria-hidden="true" tabindex="-1"></a><span class="in">    for (t in 0:(term-1)) {</span></span>
<span id="cb10-284"><a href="#cb10-284" aria-hidden="true" tabindex="-1"></a><span class="in">      if (i+t &lt;= n) {</span></span>
<span id="cb10-285"><a href="#cb10-285" aria-hidden="true" tabindex="-1"></a><span class="in">        # Probability of death in year t</span></span>
<span id="cb10-286"><a href="#cb10-286" aria-hidden="true" tabindex="-1"></a><span class="in">        death_prob &lt;- cum_prob * qx[i+t]</span></span>
<span id="cb10-287"><a href="#cb10-287" aria-hidden="true" tabindex="-1"></a><span class="in">        </span></span>
<span id="cb10-288"><a href="#cb10-288" aria-hidden="true" tabindex="-1"></a><span class="in">        # Present value of benefit</span></span>
<span id="cb10-289"><a href="#cb10-289" aria-hidden="true" tabindex="-1"></a><span class="in">        pv_benefit &lt;- (1 / (1 + interest_rate))^(t+1) * death_prob</span></span>
<span id="cb10-290"><a href="#cb10-290" aria-hidden="true" tabindex="-1"></a><span class="in">        </span></span>
<span id="cb10-291"><a href="#cb10-291" aria-hidden="true" tabindex="-1"></a><span class="in">        value &lt;- value + pv_benefit</span></span>
<span id="cb10-292"><a href="#cb10-292" aria-hidden="true" tabindex="-1"></a><span class="in">        </span></span>
<span id="cb10-293"><a href="#cb10-293" aria-hidden="true" tabindex="-1"></a><span class="in">        # Update cumulative survival probability</span></span>
<span id="cb10-294"><a href="#cb10-294" aria-hidden="true" tabindex="-1"></a><span class="in">        cum_prob &lt;- cum_prob * px[i+t]</span></span>
<span id="cb10-295"><a href="#cb10-295" aria-hidden="true" tabindex="-1"></a><span class="in">      }</span></span>
<span id="cb10-296"><a href="#cb10-296" aria-hidden="true" tabindex="-1"></a><span class="in">    }</span></span>
<span id="cb10-297"><a href="#cb10-297" aria-hidden="true" tabindex="-1"></a><span class="in">    </span></span>
<span id="cb10-298"><a href="#cb10-298" aria-hidden="true" tabindex="-1"></a><span class="in">    Ax[i] &lt;- value</span></span>
<span id="cb10-299"><a href="#cb10-299" aria-hidden="true" tabindex="-1"></a><span class="in">  }</span></span>
<span id="cb10-300"><a href="#cb10-300" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb10-301"><a href="#cb10-301" aria-hidden="true" tabindex="-1"></a><span class="in">  return(Ax)</span></span>
<span id="cb10-302"><a href="#cb10-302" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb10-303"><a href="#cb10-303" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-304"><a href="#cb10-304" aria-hidden="true" tabindex="-1"></a><span class="in"># Calculate 10-year term insurance values</span></span>
<span id="cb10-305"><a href="#cb10-305" aria-hidden="true" tabindex="-1"></a><span class="in">term &lt;- 10</span></span>
<span id="cb10-306"><a href="#cb10-306" aria-hidden="true" tabindex="-1"></a><span class="in">mortality_table$A10x &lt;- calculate_term_insurance(mortality_table, interest_rate, term)</span></span>
<span id="cb10-307"><a href="#cb10-307" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-308"><a href="#cb10-308" aria-hidden="true" tabindex="-1"></a><span class="in"># Display insurance values for selected ages</span></span>
<span id="cb10-309"><a href="#cb10-309" aria-hidden="true" tabindex="-1"></a><span class="in">insurance_table &lt;- mortality_table[mortality_table$Age %in% selected_ages, c("Age", "A10x")]</span></span>
<span id="cb10-310"><a href="#cb10-310" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-311"><a href="#cb10-311" aria-hidden="true" tabindex="-1"></a><span class="in">kable(insurance_table, </span></span>
<span id="cb10-312"><a href="#cb10-312" aria-hidden="true" tabindex="-1"></a><span class="in">      caption = paste0(term, "-Year Term Life Insurance Values (Interest Rate = ", interest_rate*100, "%)"),</span></span>
<span id="cb10-313"><a href="#cb10-313" aria-hidden="true" tabindex="-1"></a><span class="in">      col.names = c("Age", "Insurance Value (A10x)"),</span></span>
<span id="cb10-314"><a href="#cb10-314" aria-hidden="true" tabindex="-1"></a><span class="in">      digits = 4) %&gt;%</span></span>
<span id="cb10-315"><a href="#cb10-315" aria-hidden="true" tabindex="-1"></a><span class="in">  kable_styling(bootstrap_options = c("striped", "hover", "condensed"))</span></span>
<span id="cb10-316"><a href="#cb10-316" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb10-317"><a href="#cb10-317" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-318"><a href="#cb10-318" aria-hidden="true" tabindex="-1"></a><span class="fu">## Comparing Different Mortality Tables</span></span>
<span id="cb10-319"><a href="#cb10-319" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-320"><a href="#cb10-320" aria-hidden="true" tabindex="-1"></a>In practice, actuaries often need to compare different mortality tables. Let's create a second table using a different mortality law and compare them.</span>
<span id="cb10-321"><a href="#cb10-321" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-322"><a href="#cb10-322" aria-hidden="true" tabindex="-1"></a><span class="in">```{r compare-tables}</span></span>
<span id="cb10-323"><a href="#cb10-323" aria-hidden="true" tabindex="-1"></a><span class="in">#| label: compare-tables</span></span>
<span id="cb10-324"><a href="#cb10-324" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-325"><a href="#cb10-325" aria-hidden="true" tabindex="-1"></a><span class="in"># Create a second mortality table using Weibull distribution</span></span>
<span id="cb10-326"><a href="#cb10-326" aria-hidden="true" tabindex="-1"></a><span class="in">shape &lt;- 2.5</span></span>
<span id="cb10-327"><a href="#cb10-327" aria-hidden="true" tabindex="-1"></a><span class="in">scale &lt;- 80</span></span>
<span id="cb10-328"><a href="#cb10-328" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-329"><a href="#cb10-329" aria-hidden="true" tabindex="-1"></a><span class="in"># Calculate mortality rates using Weibull</span></span>
<span id="cb10-330"><a href="#cb10-330" aria-hidden="true" tabindex="-1"></a><span class="in">qx_weibull &lt;- pweibull(ages+1, shape, scale) - pweibull(ages, shape, scale)</span></span>
<span id="cb10-331"><a href="#cb10-331" aria-hidden="true" tabindex="-1"></a><span class="in">qx_weibull &lt;- qx_weibull / (1 - pweibull(ages, shape, scale))</span></span>
<span id="cb10-332"><a href="#cb10-332" aria-hidden="true" tabindex="-1"></a><span class="in">qx_weibull[is.nan(qx_weibull)] &lt;- 1</span></span>
<span id="cb10-333"><a href="#cb10-333" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-334"><a href="#cb10-334" aria-hidden="true" tabindex="-1"></a><span class="in"># Calculate survival probabilities</span></span>
<span id="cb10-335"><a href="#cb10-335" aria-hidden="true" tabindex="-1"></a><span class="in">px_weibull &lt;- 1 - qx_weibull</span></span>
<span id="cb10-336"><a href="#cb10-336" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-337"><a href="#cb10-337" aria-hidden="true" tabindex="-1"></a><span class="in"># Calculate number of survivors</span></span>
<span id="cb10-338"><a href="#cb10-338" aria-hidden="true" tabindex="-1"></a><span class="in">lx_weibull &lt;- numeric(length(ages))</span></span>
<span id="cb10-339"><a href="#cb10-339" aria-hidden="true" tabindex="-1"></a><span class="in">lx_weibull[1] &lt;- 100000</span></span>
<span id="cb10-340"><a href="#cb10-340" aria-hidden="true" tabindex="-1"></a><span class="in">for (i in 2:length(ages)) {</span></span>
<span id="cb10-341"><a href="#cb10-341" aria-hidden="true" tabindex="-1"></a><span class="in">  lx_weibull[i] &lt;- lx_weibull[i-1] * px_weibull[i-1]</span></span>
<span id="cb10-342"><a href="#cb10-342" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb10-343"><a href="#cb10-343" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-344"><a href="#cb10-344" aria-hidden="true" tabindex="-1"></a><span class="in"># Create comparison data frame</span></span>
<span id="cb10-345"><a href="#cb10-345" aria-hidden="true" tabindex="-1"></a><span class="in">comparison_data &lt;- data.frame(</span></span>
<span id="cb10-346"><a href="#cb10-346" aria-hidden="true" tabindex="-1"></a><span class="in">  Age = rep(ages, 2),</span></span>
<span id="cb10-347"><a href="#cb10-347" aria-hidden="true" tabindex="-1"></a><span class="in">  qx = c(qx, qx_weibull),</span></span>
<span id="cb10-348"><a href="#cb10-348" aria-hidden="true" tabindex="-1"></a><span class="in">  Model = rep(c("Gompertz-Makeham", "Weibull"), each = length(ages))</span></span>
<span id="cb10-349"><a href="#cb10-349" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb10-350"><a href="#cb10-350" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-351"><a href="#cb10-351" aria-hidden="true" tabindex="-1"></a><span class="in"># Create comparison plot</span></span>
<span id="cb10-352"><a href="#cb10-352" aria-hidden="true" tabindex="-1"></a><span class="in">p4 &lt;- ggplot(comparison_data, aes(x = Age, y = qx, color = Model)) +</span></span>
<span id="cb10-353"><a href="#cb10-353" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_line(size = 1) +</span></span>
<span id="cb10-354"><a href="#cb10-354" aria-hidden="true" tabindex="-1"></a><span class="in">  scale_color_manual(values = c("#3498db", "#e74c3c")) +</span></span>
<span id="cb10-355"><a href="#cb10-355" aria-hidden="true" tabindex="-1"></a><span class="in">  labs(</span></span>
<span id="cb10-356"><a href="#cb10-356" aria-hidden="true" tabindex="-1"></a><span class="in">    title = "Comparison of Mortality Models",</span></span>
<span id="cb10-357"><a href="#cb10-357" aria-hidden="true" tabindex="-1"></a><span class="in">    subtitle = "Gompertz-Makeham vs. Weibull",</span></span>
<span id="cb10-358"><a href="#cb10-358" aria-hidden="true" tabindex="-1"></a><span class="in">    x = "Age",</span></span>
<span id="cb10-359"><a href="#cb10-359" aria-hidden="true" tabindex="-1"></a><span class="in">    y = "Probability of Death (qx)",</span></span>
<span id="cb10-360"><a href="#cb10-360" aria-hidden="true" tabindex="-1"></a><span class="in">    caption = "Source: Simulated data"</span></span>
<span id="cb10-361"><a href="#cb10-361" aria-hidden="true" tabindex="-1"></a><span class="in">  ) +</span></span>
<span id="cb10-362"><a href="#cb10-362" aria-hidden="true" tabindex="-1"></a><span class="in">  theme_minimal() +</span></span>
<span id="cb10-363"><a href="#cb10-363" aria-hidden="true" tabindex="-1"></a><span class="in">  theme(</span></span>
<span id="cb10-364"><a href="#cb10-364" aria-hidden="true" tabindex="-1"></a><span class="in">    plot.title = element_text(face = "bold"),</span></span>
<span id="cb10-365"><a href="#cb10-365" aria-hidden="true" tabindex="-1"></a><span class="in">    plot.subtitle = element_text(color = "gray50"),</span></span>
<span id="cb10-366"><a href="#cb10-366" aria-hidden="true" tabindex="-1"></a><span class="in">    legend.position = "bottom"</span></span>
<span id="cb10-367"><a href="#cb10-367" aria-hidden="true" tabindex="-1"></a><span class="in">  )</span></span>
<span id="cb10-368"><a href="#cb10-368" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-369"><a href="#cb10-369" aria-hidden="true" tabindex="-1"></a><span class="in"># Convert to interactive plot</span></span>
<span id="cb10-370"><a href="#cb10-370" aria-hidden="true" tabindex="-1"></a><span class="in">ggplotly(p4) %&gt;%</span></span>
<span id="cb10-371"><a href="#cb10-371" aria-hidden="true" tabindex="-1"></a><span class="in">  layout(hovermode = "x unified")</span></span>
<span id="cb10-372"><a href="#cb10-372" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb10-373"><a href="#cb10-373" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-374"><a href="#cb10-374" aria-hidden="true" tabindex="-1"></a><span class="fu">## Practical Applications</span></span>
<span id="cb10-375"><a href="#cb10-375" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-376"><a href="#cb10-376" aria-hidden="true" tabindex="-1"></a><span class="fu">### Premium Calculation Example</span></span>
<span id="cb10-377"><a href="#cb10-377" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-378"><a href="#cb10-378" aria-hidden="true" tabindex="-1"></a>Let's calculate a simple premium for a 10-year term life insurance policy with a $100,000 benefit.</span>
<span id="cb10-379"><a href="#cb10-379" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-380"><a href="#cb10-380" aria-hidden="true" tabindex="-1"></a><span class="in">```{r premium-calculation}</span></span>
<span id="cb10-381"><a href="#cb10-381" aria-hidden="true" tabindex="-1"></a><span class="in">#| label: premium-calculation</span></span>
<span id="cb10-382"><a href="#cb10-382" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-383"><a href="#cb10-383" aria-hidden="true" tabindex="-1"></a><span class="in"># Function to calculate net single premium</span></span>
<span id="cb10-384"><a href="#cb10-384" aria-hidden="true" tabindex="-1"></a><span class="in">calculate_nsp &lt;- function(age, term, benefit, mortality_table, interest_rate) {</span></span>
<span id="cb10-385"><a href="#cb10-385" aria-hidden="true" tabindex="-1"></a><span class="in">  # Get index for the age</span></span>
<span id="cb10-386"><a href="#cb10-386" aria-hidden="true" tabindex="-1"></a><span class="in">  age_index &lt;- which(mortality_table$Age == age)</span></span>
<span id="cb10-387"><a href="#cb10-387" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb10-388"><a href="#cb10-388" aria-hidden="true" tabindex="-1"></a><span class="in">  if (length(age_index) == 0) {</span></span>
<span id="cb10-389"><a href="#cb10-389" aria-hidden="true" tabindex="-1"></a><span class="in">    return(NA)</span></span>
<span id="cb10-390"><a href="#cb10-390" aria-hidden="true" tabindex="-1"></a><span class="in">  }</span></span>
<span id="cb10-391"><a href="#cb10-391" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb10-392"><a href="#cb10-392" aria-hidden="true" tabindex="-1"></a><span class="in">  # Get term insurance value</span></span>
<span id="cb10-393"><a href="#cb10-393" aria-hidden="true" tabindex="-1"></a><span class="in">  A_term &lt;- mortality_table$A10x[age_index]</span></span>
<span id="cb10-394"><a href="#cb10-394" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb10-395"><a href="#cb10-395" aria-hidden="true" tabindex="-1"></a><span class="in">  # Calculate net single premium</span></span>
<span id="cb10-396"><a href="#cb10-396" aria-hidden="true" tabindex="-1"></a><span class="in">  nsp &lt;- benefit * A_term</span></span>
<span id="cb10-397"><a href="#cb10-397" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb10-398"><a href="#cb10-398" aria-hidden="true" tabindex="-1"></a><span class="in">  return(nsp)</span></span>
<span id="cb10-399"><a href="#cb10-399" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb10-400"><a href="#cb10-400" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-401"><a href="#cb10-401" aria-hidden="true" tabindex="-1"></a><span class="in"># Function to calculate annual premium</span></span>
<span id="cb10-402"><a href="#cb10-402" aria-hidden="true" tabindex="-1"></a><span class="in">calculate_annual_premium &lt;- function(age, term, benefit, mortality_table, interest_rate) {</span></span>
<span id="cb10-403"><a href="#cb10-403" aria-hidden="true" tabindex="-1"></a><span class="in">  # Get index for the age</span></span>
<span id="cb10-404"><a href="#cb10-404" aria-hidden="true" tabindex="-1"></a><span class="in">  age_index &lt;- which(mortality_table$Age == age)</span></span>
<span id="cb10-405"><a href="#cb10-405" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb10-406"><a href="#cb10-406" aria-hidden="true" tabindex="-1"></a><span class="in">  if (length(age_index) == 0) {</span></span>
<span id="cb10-407"><a href="#cb10-407" aria-hidden="true" tabindex="-1"></a><span class="in">    return(NA)</span></span>
<span id="cb10-408"><a href="#cb10-408" aria-hidden="true" tabindex="-1"></a><span class="in">  }</span></span>
<span id="cb10-409"><a href="#cb10-409" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb10-410"><a href="#cb10-410" aria-hidden="true" tabindex="-1"></a><span class="in">  # Get term insurance value and annuity value</span></span>
<span id="cb10-411"><a href="#cb10-411" aria-hidden="true" tabindex="-1"></a><span class="in">  A_term &lt;- mortality_table$A10x[age_index]</span></span>
<span id="cb10-412"><a href="#cb10-412" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb10-413"><a href="#cb10-413" aria-hidden="true" tabindex="-1"></a><span class="in">  # Calculate annuity value for term years</span></span>
<span id="cb10-414"><a href="#cb10-414" aria-hidden="true" tabindex="-1"></a><span class="in">  ax_term &lt;- 0</span></span>
<span id="cb10-415"><a href="#cb10-415" aria-hidden="true" tabindex="-1"></a><span class="in">  cum_prob &lt;- 1</span></span>
<span id="cb10-416"><a href="#cb10-416" aria-hidden="true" tabindex="-1"></a><span class="in">  v &lt;- 1 / (1 + interest_rate)</span></span>
<span id="cb10-417"><a href="#cb10-417" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb10-418"><a href="#cb10-418" aria-hidden="true" tabindex="-1"></a><span class="in">  for (t in 0:(term-1)) {</span></span>
<span id="cb10-419"><a href="#cb10-419" aria-hidden="true" tabindex="-1"></a><span class="in">    if (age_index + t &lt;= nrow(mortality_table)) {</span></span>
<span id="cb10-420"><a href="#cb10-420" aria-hidden="true" tabindex="-1"></a><span class="in">      ax_term &lt;- ax_term + v^t * cum_prob</span></span>
<span id="cb10-421"><a href="#cb10-421" aria-hidden="true" tabindex="-1"></a><span class="in">      cum_prob &lt;- cum_prob * mortality_table$px[age_index + t]</span></span>
<span id="cb10-422"><a href="#cb10-422" aria-hidden="true" tabindex="-1"></a><span class="in">    }</span></span>
<span id="cb10-423"><a href="#cb10-423" aria-hidden="true" tabindex="-1"></a><span class="in">  }</span></span>
<span id="cb10-424"><a href="#cb10-424" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb10-425"><a href="#cb10-425" aria-hidden="true" tabindex="-1"></a><span class="in">  # Calculate annual premium</span></span>
<span id="cb10-426"><a href="#cb10-426" aria-hidden="true" tabindex="-1"></a><span class="in">  annual_premium &lt;- benefit * A_term / ax_term</span></span>
<span id="cb10-427"><a href="#cb10-427" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb10-428"><a href="#cb10-428" aria-hidden="true" tabindex="-1"></a><span class="in">  return(annual_premium)</span></span>
<span id="cb10-429"><a href="#cb10-429" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb10-430"><a href="#cb10-430" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-431"><a href="#cb10-431" aria-hidden="true" tabindex="-1"></a><span class="in"># Calculate premiums for different ages</span></span>
<span id="cb10-432"><a href="#cb10-432" aria-hidden="true" tabindex="-1"></a><span class="in">premium_ages &lt;- c(25, 30, 35, 40, 45, 50, 55, 60)</span></span>
<span id="cb10-433"><a href="#cb10-433" aria-hidden="true" tabindex="-1"></a><span class="in">benefit &lt;- 100000</span></span>
<span id="cb10-434"><a href="#cb10-434" aria-hidden="true" tabindex="-1"></a><span class="in">term &lt;- 10</span></span>
<span id="cb10-435"><a href="#cb10-435" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-436"><a href="#cb10-436" aria-hidden="true" tabindex="-1"></a><span class="in"># Calculate premiums</span></span>
<span id="cb10-437"><a href="#cb10-437" aria-hidden="true" tabindex="-1"></a><span class="in">nsp_values &lt;- sapply(premium_ages, calculate_nsp, term = term, benefit = benefit, </span></span>
<span id="cb10-438"><a href="#cb10-438" aria-hidden="true" tabindex="-1"></a><span class="in">                    mortality_table = mortality_table, interest_rate = interest_rate)</span></span>
<span id="cb10-439"><a href="#cb10-439" aria-hidden="true" tabindex="-1"></a><span class="in">annual_premiums &lt;- sapply(premium_ages, calculate_annual_premium, term = term, benefit = benefit, </span></span>
<span id="cb10-440"><a href="#cb10-440" aria-hidden="true" tabindex="-1"></a><span class="in">                         mortality_table = mortality_table, interest_rate = interest_rate)</span></span>
<span id="cb10-441"><a href="#cb10-441" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-442"><a href="#cb10-442" aria-hidden="true" tabindex="-1"></a><span class="in"># Create premium table</span></span>
<span id="cb10-443"><a href="#cb10-443" aria-hidden="true" tabindex="-1"></a><span class="in">premium_table &lt;- data.frame(</span></span>
<span id="cb10-444"><a href="#cb10-444" aria-hidden="true" tabindex="-1"></a><span class="in">  Age = premium_ages,</span></span>
<span id="cb10-445"><a href="#cb10-445" aria-hidden="true" tabindex="-1"></a><span class="in">  NSP = nsp_values,</span></span>
<span id="cb10-446"><a href="#cb10-446" aria-hidden="true" tabindex="-1"></a><span class="in">  Annual_Premium = annual_premiums</span></span>
<span id="cb10-447"><a href="#cb10-447" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb10-448"><a href="#cb10-448" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-449"><a href="#cb10-449" aria-hidden="true" tabindex="-1"></a><span class="in">kable(premium_table, </span></span>
<span id="cb10-450"><a href="#cb10-450" aria-hidden="true" tabindex="-1"></a><span class="in">      caption = paste0("10-Year Term Life Insurance Premiums ($", format(benefit, big.mark = ","), " Benefit)"),</span></span>
<span id="cb10-451"><a href="#cb10-451" aria-hidden="true" tabindex="-1"></a><span class="in">      col.names = c("Age", "Net Single Premium ($)", "Annual Premium ($)"),</span></span>
<span id="cb10-452"><a href="#cb10-452" aria-hidden="true" tabindex="-1"></a><span class="in">      digits = 2,</span></span>
<span id="cb10-453"><a href="#cb10-453" aria-hidden="true" tabindex="-1"></a><span class="in">      format.args = list(big.mark = ",")) %&gt;%</span></span>
<span id="cb10-454"><a href="#cb10-454" aria-hidden="true" tabindex="-1"></a><span class="in">  kable_styling(bootstrap_options = c("striped", "hover", "condensed"))</span></span>
<span id="cb10-455"><a href="#cb10-455" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb10-456"><a href="#cb10-456" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-457"><a href="#cb10-457" aria-hidden="true" tabindex="-1"></a><span class="fu">### Visualizing Premium Trends</span></span>
<span id="cb10-458"><a href="#cb10-458" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-459"><a href="#cb10-459" aria-hidden="true" tabindex="-1"></a><span class="in">```{r premium-trends}</span></span>
<span id="cb10-460"><a href="#cb10-460" aria-hidden="true" tabindex="-1"></a><span class="in">#| label: premium-trends</span></span>
<span id="cb10-461"><a href="#cb10-461" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-462"><a href="#cb10-462" aria-hidden="true" tabindex="-1"></a><span class="in"># Create premium trend plot</span></span>
<span id="cb10-463"><a href="#cb10-463" aria-hidden="true" tabindex="-1"></a><span class="in">p5 &lt;- ggplot(premium_table, aes(x = Age, y = Annual_Premium)) +</span></span>
<span id="cb10-464"><a href="#cb10-464" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_line(color = "#2c3e50", size = 1) +</span></span>
<span id="cb10-465"><a href="#cb10-465" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_point(color = "#3498db", size = 3) +</span></span>
<span id="cb10-466"><a href="#cb10-466" aria-hidden="true" tabindex="-1"></a><span class="in">  labs(</span></span>
<span id="cb10-467"><a href="#cb10-467" aria-hidden="true" tabindex="-1"></a><span class="in">    title = "Annual Premium by Age",</span></span>
<span id="cb10-468"><a href="#cb10-468" aria-hidden="true" tabindex="-1"></a><span class="in">    subtitle = paste0("10-Year Term Life Insurance ($", format(benefit, big.mark = ","), " Benefit)"),</span></span>
<span id="cb10-469"><a href="#cb10-469" aria-hidden="true" tabindex="-1"></a><span class="in">    x = "Age",</span></span>
<span id="cb10-470"><a href="#cb10-470" aria-hidden="true" tabindex="-1"></a><span class="in">    y = "Annual Premium ($)",</span></span>
<span id="cb10-471"><a href="#cb10-471" aria-hidden="true" tabindex="-1"></a><span class="in">    caption = "Source: Simulated data"</span></span>
<span id="cb10-472"><a href="#cb10-472" aria-hidden="true" tabindex="-1"></a><span class="in">  ) +</span></span>
<span id="cb10-473"><a href="#cb10-473" aria-hidden="true" tabindex="-1"></a><span class="in">  scale_y_continuous(labels = scales::dollar_format()) +</span></span>
<span id="cb10-474"><a href="#cb10-474" aria-hidden="true" tabindex="-1"></a><span class="in">  theme_minimal() +</span></span>
<span id="cb10-475"><a href="#cb10-475" aria-hidden="true" tabindex="-1"></a><span class="in">  theme(</span></span>
<span id="cb10-476"><a href="#cb10-476" aria-hidden="true" tabindex="-1"></a><span class="in">    plot.title = element_text(face = "bold"),</span></span>
<span id="cb10-477"><a href="#cb10-477" aria-hidden="true" tabindex="-1"></a><span class="in">    plot.subtitle = element_text(color = "gray50")</span></span>
<span id="cb10-478"><a href="#cb10-478" aria-hidden="true" tabindex="-1"></a><span class="in">  )</span></span>
<span id="cb10-479"><a href="#cb10-479" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-480"><a href="#cb10-480" aria-hidden="true" tabindex="-1"></a><span class="in"># Convert to interactive plot</span></span>
<span id="cb10-481"><a href="#cb10-481" aria-hidden="true" tabindex="-1"></a><span class="in">ggplotly(p5) %&gt;%</span></span>
<span id="cb10-482"><a href="#cb10-482" aria-hidden="true" tabindex="-1"></a><span class="in">  layout(hovermode = "x unified")</span></span>
<span id="cb10-483"><a href="#cb10-483" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb10-484"><a href="#cb10-484" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-485"><a href="#cb10-485" aria-hidden="true" tabindex="-1"></a><span class="fu">## Conclusion</span></span>
<span id="cb10-486"><a href="#cb10-486" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-487"><a href="#cb10-487" aria-hidden="true" tabindex="-1"></a>This post has demonstrated how to work with mortality tables in R, from basic construction to practical applications in insurance pricing. The interactive visualizations help in understanding the patterns and relationships in mortality data.</span>
<span id="cb10-488"><a href="#cb10-488" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-489"><a href="#cb10-489" aria-hidden="true" tabindex="-1"></a>For actuaries and data scientists, R provides powerful tools for mortality analysis, allowing for sophisticated modeling and visualization that can enhance decision-making in insurance and pension contexts.</span>
<span id="cb10-490"><a href="#cb10-490" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-491"><a href="#cb10-491" aria-hidden="true" tabindex="-1"></a>In future posts, we'll explore more advanced topics such as:</span>
<span id="cb10-492"><a href="#cb10-492" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-493"><a href="#cb10-493" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Stochastic mortality modeling</span>
<span id="cb10-494"><a href="#cb10-494" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Multi-state models for health insurance</span>
<span id="cb10-495"><a href="#cb10-495" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Bayesian approaches to mortality projection</span>
<span id="cb10-496"><a href="#cb10-496" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Machine learning applications in mortality analysis</span>
<span id="cb10-497"><a href="#cb10-497" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-498"><a href="#cb10-498" aria-hidden="true" tabindex="-1"></a><span class="fu">## References</span></span>
<span id="cb10-499"><a href="#cb10-499" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-500"><a href="#cb10-500" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>Dickson, D. C., Hardy, M. R., &amp; Waters, H. R. (2013). *Actuarial Mathematics for Life Contingent Risks*. Cambridge University Press.</span>
<span id="cb10-501"><a href="#cb10-501" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-502"><a href="#cb10-502" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>Bowers, N. L., Gerber, H. U., Hickman, J. C., Jones, D. A., &amp; Nesbitt, C. J. (1997). *Actuarial Mathematics*. Society of Actuaries.</span>
<span id="cb10-503"><a href="#cb10-503" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-504"><a href="#cb10-504" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>Charpentier, A. (2014). *Computational Actuarial Science with R*. CRC Press.</span>
<span id="cb10-505"><a href="#cb10-505" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-506"><a href="#cb10-506" aria-hidden="true" tabindex="-1"></a><span class="ss">4. </span>Society of Actuaries. (2019). *Life Tables and Mortality Models*. Education and Examination Committee of the Society of Actuaries.</span></code><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
<p>© 2025 Your Name. All content licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a></p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/username/quarto-website/edit/main/posts/actuarial/mortality-analysis.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/username/quarto-website/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
<p>Made with <a href="https://quarto.org/">Quarto</a> | <a href="../..\privacy.html">Privacy Policy</a></p>
</div>
  </div>
</footer>


</body></html>